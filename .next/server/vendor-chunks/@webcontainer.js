"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@webcontainer";
exports.ids = ["vendor-chunks/@webcontainer"];
exports.modules = {

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* reexport safe */ _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__.PreviewMessageType),\n/* harmony export */   WebContainer: () => (/* binding */ WebContainer),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   configureAPIKey: () => (/* binding */ configureAPIKey),\n/* harmony export */   isPreviewMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_5__.isPreviewMessage),\n/* harmony export */   reloadPreview: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_5__.reloadPreview)\n/* harmony export */ });\n/* harmony import */ var _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/auth-state.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js\");\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n/* harmony import */ var _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vendor/index.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js\");\n/* harmony import */ var _internal_tokens_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./internal/tokens.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\");\n/* harmony import */ var _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./internal/iframe-url.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils.js\");\n/* harmony import */ var _utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/file-system.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js\");\n/**\n * The WebContainer Public API allows you build custom applications on top of an in-browser Node.js runtime.\n *\n * Its main entrypoint is the {@link WebContainer} class.\n *\n * @packageDocumentation\n */ \n\n\n\n\n\n\n\nconst auth = _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.auth;\n\n\nlet bootPromise = null;\nlet cachedServerPromise = null;\nlet cachedBootOptions = {};\nconst decoder = new TextDecoder();\nconst encoder = new TextEncoder();\n/**\n * The main export of this library. An instance of `WebContainer` represents a runtime\n * ready to be used.\n */ class WebContainer {\n    static{\n        /** @internal */ this._instance = null;\n    }\n    static{\n        /** @internal */ this._teardownPromise = null;\n    }\n    /** @internal */ constructor(/** @internal */ _instance, fs, previewScript, /** @internal */ _runtimeInfo){\n        this._tornDown = false;\n        this._unsubscribeFromTokenChangedListener = ()=>{};\n        this._instance = _instance;\n        this._runtimeInfo = _runtimeInfo;\n        this.fs = new FileSystemAPIClient(fs);\n        // forward the credentials to webcontainer if needed\n        if (_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.initialized) {\n            this._unsubscribeFromTokenChangedListener = (0,_internal_tokens_js__WEBPACK_IMPORTED_MODULE_3__.addAccessTokenChangedListener)((accessToken)=>{\n                this._instance.setCredentials({\n                    accessToken,\n                    editorOrigin: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.editorOrigin\n                });\n            });\n            (async ()=>{\n                await _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.authComplete.promise;\n                if (this._tornDown) {\n                    return;\n                }\n                (0,_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.assertAuthTokens)(_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.tokens);\n                await this._instance.setCredentials({\n                    accessToken: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.tokens.access,\n                    editorOrigin: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.editorOrigin\n                });\n            })().catch((error)=>{\n                // print the error as this is likely a bug in webcontainer\n                console.error(error);\n            });\n        }\n    }\n    async spawn(command, optionsOrArgs, options) {\n        let args = [];\n        if (Array.isArray(optionsOrArgs)) {\n            args = optionsOrArgs;\n        } else {\n            options = optionsOrArgs;\n        }\n        let output = undefined;\n        let outputStream = new ReadableStream();\n        if (options?.output !== false) {\n            const result = streamWithPush();\n            output = result.push;\n            outputStream = result.stream;\n        }\n        let stdout = undefined;\n        let stdoutStream;\n        let stderr = undefined;\n        let stderrStream;\n        const wrappedOutput = proxyListener(binaryListener(output));\n        const wrappedStdout = proxyListener(binaryListener(stdout));\n        const wrappedStderr = proxyListener(binaryListener(stderr));\n        const process = await this._instance.run({\n            command,\n            args,\n            cwd: options?.cwd,\n            env: options?.env,\n            terminal: options?.terminal\n        }, wrappedStdout, wrappedStderr, wrappedOutput);\n        return new WebContainerProcessImpl(process, outputStream, stdoutStream, stderrStream);\n    }\n    async export(path, options) {\n        const serializeOptions = {\n            format: options?.format ?? \"json\",\n            includes: options?.includes,\n            excludes: options?.excludes,\n            external: true\n        };\n        const result = await this._instance.serialize(path, serializeOptions);\n        if (serializeOptions.format === \"json\") {\n            const data = JSON.parse(decoder.decode(result));\n            return (0,_utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__.toExternalFileSystemTree)(data);\n        }\n        return result;\n    }\n    on(event, listener) {\n        if (event === \"preview-message\") {\n            const originalListener = listener;\n            listener = (message)=>{\n                if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.isPreviewMessage)(message)) {\n                    originalListener(message);\n                }\n            };\n        }\n        const { listener: wrapped, subscribe } = syncSubscription(listener);\n        return subscribe(this._instance.on(event, _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.proxy(wrapped)));\n    }\n    /**\n     * Mounts a tree of files into the filesystem. This can be specified as a tree object ({@link FileSystemTree})\n     * or as a binary snapshot generated by [`@webcontainer/snapshot`](https://www.npmjs.com/package/@webcontainer/snapshot).\n     *\n     * @param snapshotOrTree - A tree of files, or a binary snapshot. Note that binary payloads will be transferred.\n     * @param options.mountPoint - Specifies a nested path where the tree should be mounted.\n     */ mount(snapshotOrTree, options) {\n        const payload = snapshotOrTree instanceof Uint8Array ? snapshotOrTree : snapshotOrTree instanceof ArrayBuffer ? new Uint8Array(snapshotOrTree) : encoder.encode(JSON.stringify((0,_utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__.toInternalFileSystemTree)(snapshotOrTree)));\n        return this._instance.loadFiles(_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.transfer(payload, [\n            payload.buffer\n        ]), {\n            mountPoints: options?.mountPoint\n        });\n    }\n    /**\n     * Set a custom script to be injected into all previews. When this function is called, every\n     * future page reload will contain the provided script tag on all HTML responses.\n     *\n     * Note:\n     *\n     * When this function resolves, every preview reloaded _after_ will have the new script.\n     * Existing preview have to be explicitely reloaded.\n     *\n     * To reload a preview you can use `reloadPreview`.\n     *\n     * @param scriptSrc Source for the script tag.\n     * @param options Options to define which type of script this is.\n     */ setPreviewScript(scriptSrc, options) {\n        return this._instance.setPreviewScript(scriptSrc, options);\n    }\n    /**\n     * The default value of the `PATH` environment variable for processes started through {@link spawn}.\n     */ get path() {\n        return this._runtimeInfo.path;\n    }\n    /**\n     * The full path to the working directory (see {@link FileSystemAPI}).\n     */ get workdir() {\n        return this._runtimeInfo.cwd;\n    }\n    /**\n     * Destroys the WebContainer instance, turning it unusable, and releases its resources. After this,\n     * a new WebContainer instance can be obtained by calling {@link WebContainer.boot | `boot`}.\n     *\n     * All entities derived from this instance (e.g. processes, the file system, etc.) also become unusable\n     * after calling this method.\n     */ teardown() {\n        if (this._tornDown) {\n            throw new Error(\"WebContainer already torn down\");\n        }\n        this._tornDown = true;\n        this._unsubscribeFromTokenChangedListener();\n        const teardownFn = async ()=>{\n            try {\n                await this.fs._teardown();\n                await this._instance.teardown();\n            } finally{\n                this._instance[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n                if (WebContainer._instance === this) {\n                    WebContainer._instance = null;\n                }\n            }\n        };\n        WebContainer._teardownPromise = teardownFn();\n    }\n    /**\n     * Boots a WebContainer. Only a single instance of WebContainer can be booted concurrently\n     * (see {@link WebContainer.teardown | `teardown`}).\n     *\n     * Booting WebContainer is an expensive operation.\n     */ static async boot(options = {}) {\n        await this._teardownPromise;\n        WebContainer._teardownPromise = null;\n        const { workdirName } = options;\n        if (window.crossOriginIsolated && options.coep === \"none\") {\n            console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.\\nSet the 'coep' option to 'require-corp'.`);\n        }\n        if (workdirName?.includes(\"/\") || workdirName === \"..\" || workdirName === \".\") {\n            throw new Error(\"workdirName should be a valid folder name\");\n        }\n        // signal that boot was called to auth module as calling auth.init after boot is likely incorrect\n        _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.bootCalled = true;\n        // try to \"acquire the lock\", i.e. wait for any ongoing boot request to finish\n        while(bootPromise){\n            await bootPromise;\n        }\n        if (WebContainer._instance) {\n            throw new Error(\"Only a single WebContainer instance can be booted\");\n        }\n        const instancePromise = unsynchronizedBoot(options);\n        // the \"lock\" is a promise for the ongoing boot that never fails\n        bootPromise = instancePromise.catch(()=>{});\n        try {\n            const instance = await instancePromise;\n            WebContainer._instance = instance;\n            return instance;\n        } finally{\n            // release the \"lock\"\n            bootPromise = null;\n        }\n    }\n}\n/**\n * Configure an API key to be used for this instance of WebContainer.\n *\n * @param key WebContainer API key.\n */ function configureAPIKey(key) {\n    if (_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.bootCalled) {\n        throw new Error(\"`configureAPIKey` should always be called before `WebContainer.boot`\");\n    }\n    _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam(\"client_id\", key);\n}\nconst DIR_ENTRY_TYPE_FILE = 1;\nconst DIR_ENTRY_TYPE_DIR = 2;\n/**\n * @internal\n */ class DirEntImpl {\n    constructor(name, _type){\n        this.name = name;\n        this._type = _type;\n    }\n    isFile() {\n        return this._type === DIR_ENTRY_TYPE_FILE;\n    }\n    isDirectory() {\n        return this._type === DIR_ENTRY_TYPE_DIR;\n    }\n}\nclass FSWatcher {\n    constructor(_apiClient, _path, _options, _listener){\n        this._closed = false;\n        this._apiClient = _apiClient;\n        this._path = _path;\n        this._options = _options;\n        this._listener = _listener;\n        this._apiClient._watchers.add(this);\n        this._wrappedListener = (event, filename)=>{\n            if (this._listener && !this._closed) {\n                this._listener(event, filename);\n            }\n        };\n        this._apiClient._fs.watch(this._path, this._options, proxyListener(this._wrappedListener)).then((_watcher)=>{\n            this._watcher = _watcher;\n            if (this._closed) {\n                return this._teardown();\n            }\n            return undefined;\n        }).catch(console.error);\n    }\n    async close() {\n        if (!this._closed) {\n            this._closed = true;\n            this._apiClient._watchers.delete(this);\n            await this._teardown();\n        }\n    }\n    /**\n     * @internal\n     */ async _teardown() {\n        await this._watcher?.close().finally(()=>{\n            this._watcher?.[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n        });\n    }\n}\n/**\n * @internal\n */ class WebContainerProcessImpl {\n    constructor(process, output, stdout, stderr){\n        this.output = output;\n        this._process = process;\n        this.input = new WritableStream({\n            write: (data)=>{\n                // this promise is not supposed to fail anyway\n                this._getProcess()?.write(data).catch(()=>{});\n            }\n        });\n        this.exit = this._onExit();\n        this.stdout = stdout;\n        this.stderr = stderr;\n    }\n    kill() {\n        this._process?.kill();\n    }\n    resize(dimensions) {\n        this._getProcess()?.resize(dimensions);\n    }\n    async _onExit() {\n        try {\n            return await this._process.onExit;\n        } finally{\n            this._process?.[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n            this._process = null;\n        }\n    }\n    _getProcess() {\n        if (this._process == null) {\n            console.warn(\"This process already exited\");\n        }\n        return this._process;\n    }\n}\n/**\n * @internal\n */ class FileSystemAPIClient {\n    constructor(fs){\n        this._watchers = new Set([]);\n        this._fs = fs;\n    }\n    rm(...args) {\n        return this._fs.rm(...args);\n    }\n    async readFile(path, encoding) {\n        return await this._fs.readFile(path, encoding);\n    }\n    async rename(oldPath, newPath) {\n        return await this._fs.rename(oldPath, newPath);\n    }\n    async writeFile(path, data, options) {\n        if (data instanceof Uint8Array) {\n            const buffer = data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n            data = _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.transfer(new Uint8Array(buffer), [\n                buffer\n            ]);\n        }\n        await this._fs.writeFile(path, data, options);\n    }\n    async readdir(path, options) {\n        const result = await this._fs.readdir(path, options);\n        if (isStringArray(result)) {\n            return result;\n        }\n        if (isTypedArrayCollection(result)) {\n            return result;\n        }\n        const entries = result.map((entry)=>new DirEntImpl(entry.name, entry[\"Symbol(type)\"]));\n        return entries;\n    }\n    async mkdir(path, options) {\n        return await this._fs.mkdir(path, options);\n    }\n    watch(path, options, listener) {\n        if (typeof options === \"function\") {\n            listener = options;\n            options = null;\n        }\n        return new FSWatcher(this, path, options, listener);\n    }\n    /**\n     * @internal\n     */ async _teardown() {\n        this._fs[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n        await Promise.all([\n            ...this._watchers\n        ].map((watcher)=>watcher.close()));\n    }\n}\nasync function unsynchronizedBoot(options) {\n    const { serverPromise } = serverFactory(options);\n    const server = await serverPromise;\n    const instance = await server.build({\n        host: window.location.host,\n        version: \"1.6.1\",\n        workdirName: options.workdirName,\n        forwardPreviewErrors: options.forwardPreviewErrors\n    });\n    const [fs, previewScript, runtimeInfo] = await Promise.all([\n        instance.fs(),\n        instance.previewScript(),\n        instance.runtimeInfo()\n    ]);\n    return new WebContainer(instance, fs, previewScript, runtimeInfo);\n}\nfunction binaryListener(listener) {\n    if (listener == null) {\n        return undefined;\n    }\n    return (data)=>{\n        if (data instanceof Uint8Array) {\n            listener(decoder.decode(data));\n        } else if (data == null) {\n            listener(null);\n        }\n    };\n}\nfunction proxyListener(listener) {\n    if (listener == null) {\n        return undefined;\n    }\n    return _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.proxy(listener);\n}\nfunction serverFactory(options) {\n    if (cachedServerPromise != null) {\n        if (options.coep !== cachedBootOptions.coep) {\n            console.warn(`Attempting to boot WebContainer with 'coep: ${options.coep}'`);\n            console.warn(`First boot had 'coep: ${cachedBootOptions.coep}', new settings will not take effect!`);\n        }\n        return {\n            serverPromise: cachedServerPromise\n        };\n    }\n    if (options.coep) {\n        _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam(\"coep\", options.coep);\n    }\n    if (options.experimentalNode) {\n        _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam(\"experimental_node\", \"1\");\n    }\n    const iframe = document.createElement(\"iframe\");\n    iframe.style.display = \"none\";\n    iframe.setAttribute(\"allow\", \"cross-origin-isolated\");\n    const url = _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.url;\n    iframe.src = url.toString();\n    const { origin } = url;\n    cachedBootOptions = {\n        ...options\n    };\n    cachedServerPromise = new Promise((resolve)=>{\n        const onMessage = (event)=>{\n            if (event.origin !== origin) {\n                return;\n            }\n            const { data } = event;\n            if (data.type === \"init\") {\n                resolve(_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.wrap(event.ports[0]));\n                return;\n            }\n            if (data.type === \"warning\") {\n                console[data.level].call(console, data.message);\n                return;\n            }\n        };\n        window.addEventListener(\"message\", onMessage);\n    });\n    document.body.insertBefore(iframe, null);\n    return {\n        serverPromise: cachedServerPromise\n    };\n}\nfunction isStringArray(list) {\n    return typeof list[0] === \"string\";\n}\nfunction isTypedArrayCollection(list) {\n    return list[0] instanceof Uint8Array;\n}\nfunction streamWithPush() {\n    let controller = null;\n    const stream = new ReadableStream({\n        start (controller_) {\n            controller = controller_;\n        }\n    });\n    const push = (item)=>{\n        if (item != null) {\n            controller?.enqueue(item);\n        } else {\n            controller?.close();\n            controller = null;\n        }\n    };\n    return {\n        stream,\n        push\n    };\n}\nfunction syncSubscription(listener) {\n    let stopped = false;\n    let unsubscribe = ()=>{};\n    const wrapped = (...args)=>{\n        if (stopped) {\n            return;\n        }\n        listener(...args);\n    };\n    return {\n        subscribe (promise) {\n            promise.then((unsubscribe_)=>{\n                unsubscribe = unsubscribe_;\n                if (stopped) {\n                    unsubscribe();\n                }\n            });\n            return ()=>{\n                stopped = true;\n                unsubscribe();\n            };\n        },\n        listener: wrapped\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7OztDQU1DLEdBQ3NFO0FBQ1A7QUFDcEI7QUFDZ0I7QUFDUztBQUNYO0FBQ1o7QUFDOEM7QUFDckYsTUFBTUksT0FBT0MseURBQVFBLENBQUM7QUFDQztBQUNIO0FBQzNCLElBQUlNLGNBQWM7QUFDbEIsSUFBSUMsc0JBQXNCO0FBQzFCLElBQUlDLG9CQUFvQixDQUFDO0FBQ3pCLE1BQU1DLFVBQVUsSUFBSUM7QUFDcEIsTUFBTUMsVUFBVSxJQUFJQztBQUNwQjs7O0NBR0MsR0FDTSxNQUFNQzs7UUFPVCxjQUFjLFFBQ1BDLFlBQVk7OztRQUNuQixjQUFjLFFBQ1BDLG1CQUFtQjs7SUFHMUIsY0FBYyxHQUNkQyxZQUNBLGNBQWMsR0FDZEYsU0FBUyxFQUFFRyxFQUFFLEVBQUVDLGFBQWEsRUFDNUIsY0FBYyxHQUNkQyxZQUFZLENBQUU7YUFQZEMsWUFBWTthQUNaQyx1Q0FBdUMsS0FBUTtRQU8zQyxJQUFJLENBQUNQLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDSyxZQUFZLEdBQUdBO1FBQ3BCLElBQUksQ0FBQ0YsRUFBRSxHQUFHLElBQUlLLG9CQUFvQkw7UUFDbEMsb0RBQW9EO1FBQ3BELElBQUl0Qiw4REFBU0EsQ0FBQzRCLFdBQVcsRUFBRTtZQUN2QixJQUFJLENBQUNGLG9DQUFvQyxHQUFHcEIsa0ZBQTZCQSxDQUFDLENBQUN1QjtnQkFDdkUsSUFBSSxDQUFDVixTQUFTLENBQUNXLGNBQWMsQ0FBQztvQkFBRUQ7b0JBQWFFLGNBQWMvQiw4REFBU0EsQ0FBQytCLFlBQVk7Z0JBQUM7WUFDdEY7WUFDQztnQkFDRyxNQUFNL0IsOERBQVNBLENBQUNnQyxZQUFZLENBQUNDLE9BQU87Z0JBQ3BDLElBQUksSUFBSSxDQUFDUixTQUFTLEVBQUU7b0JBQ2hCO2dCQUNKO2dCQUNBeEIseUVBQWdCQSxDQUFD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LENBQUNpSztRQUNWLElBQUlBLFFBQVEsTUFBTTtZQUNkSCxZQUFZSSxRQUFRRDtRQUN4QixPQUNLO1lBQ0RILFlBQVlsRTtZQUNaa0UsYUFBYTtRQUNqQjtJQUNKO0lBQ0EsT0FBTztRQUFFN0o7UUFBUUQ7SUFBSztBQUMxQjtBQUNBLFNBQVNvQyxpQkFBaUJMLFFBQVE7SUFDOUIsSUFBSW9JLFVBQVU7SUFDZCxJQUFJQyxjQUFjLEtBQVE7SUFDMUIsTUFBTWxJLFVBQVcsQ0FBQyxHQUFHM0M7UUFDakIsSUFBSTRLLFNBQVM7WUFDVDtRQUNKO1FBQ0FwSSxZQUFZeEM7SUFDaEI7SUFDQSxPQUFPO1FBQ0g0QyxXQUFVdEQsT0FBTztZQUNiQSxRQUFRNkcsSUFBSSxDQUFDLENBQUMyRTtnQkFDVkQsY0FBY0M7Z0JBQ2QsSUFBSUYsU0FBUztvQkFDVEM7Z0JBQ0o7WUFDSjtZQUNBLE9BQU87Z0JBQ0hELFVBQVU7Z0JBQ1ZDO1lBQ0o7UUFDSjtRQUNBckksVUFBVUc7SUFDZDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW5kZXguanM/MWQ5YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBXZWJDb250YWluZXIgUHVibGljIEFQSSBhbGxvd3MgeW91IGJ1aWxkIGN1c3RvbSBhcHBsaWNhdGlvbnMgb24gdG9wIG9mIGFuIGluLWJyb3dzZXIgTm9kZS5qcyBydW50aW1lLlxuICpcbiAqIEl0cyBtYWluIGVudHJ5cG9pbnQgaXMgdGhlIHtAbGluayBXZWJDb250YWluZXJ9IGNsYXNzLlxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5pbXBvcnQgeyBhdXRoU3RhdGUsIGFzc2VydEF1dGhUb2tlbnMgfSBmcm9tICcuL2ludGVybmFsL2F1dGgtc3RhdGUuanMnO1xuaW1wb3J0IHsgUHJldmlld01lc3NhZ2VUeXBlIH0gZnJvbSAnLi9wcmV2aWV3LW1lc3NhZ2UtdHlwZXMuanMnO1xuaW1wb3J0IHsgQ29tbGluayB9IGZyb20gJy4vdmVuZG9yL2luZGV4LmpzJztcbmltcG9ydCB7IGF1dGggYXMgYXV0aEltcGwgfSBmcm9tICcuL2ludGVybmFsL2F1dGgtc3RhdGUuanMnO1xuaW1wb3J0IHsgYWRkQWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXIgfSBmcm9tICcuL2ludGVybmFsL3Rva2Vucy5qcyc7XG5pbXBvcnQgeyBpZnJhbWVTZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJuYWwvaWZyYW1lLXVybC5qcyc7XG5pbXBvcnQgeyBpc1ByZXZpZXdNZXNzYWdlIH0gZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyB0b0V4dGVybmFsRmlsZVN5c3RlbVRyZWUsIHRvSW50ZXJuYWxGaWxlU3lzdGVtVHJlZSB9IGZyb20gJy4vdXRpbHMvZmlsZS1zeXN0ZW0uanMnO1xuZXhwb3J0IGNvbnN0IGF1dGggPSBhdXRoSW1wbDtcbmV4cG9ydCB7IFByZXZpZXdNZXNzYWdlVHlwZSB9O1xuZXhwb3J0ICogZnJvbSAnLi91dGlscy5qcyc7XG5sZXQgYm9vdFByb21pc2UgPSBudWxsO1xubGV0IGNhY2hlZFNlcnZlclByb21pc2UgPSBudWxsO1xubGV0IGNhY2hlZEJvb3RPcHRpb25zID0ge307XG5jb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5jb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4vKipcbiAqIFRoZSBtYWluIGV4cG9ydCBvZiB0aGlzIGxpYnJhcnkuIEFuIGluc3RhbmNlIG9mIGBXZWJDb250YWluZXJgIHJlcHJlc2VudHMgYSBydW50aW1lXG4gKiByZWFkeSB0byBiZSB1c2VkLlxuICovXG5leHBvcnQgY2xhc3MgV2ViQ29udGFpbmVyIHtcbiAgICBfaW5zdGFuY2U7XG4gICAgX3J1bnRpbWVJbmZvO1xuICAgIC8qKlxuICAgICAqIEdpdmVzIGFjY2VzcyB0byB0aGUgdW5kZXJseWluZyBmaWxlIHN5c3RlbS5cbiAgICAgKi9cbiAgICBmcztcbiAgICAvKiogQGludGVybmFsICovXG4gICAgc3RhdGljIF9pbnN0YW5jZSA9IG51bGw7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHN0YXRpYyBfdGVhcmRvd25Qcm9taXNlID0gbnVsbDtcbiAgICBfdG9ybkRvd24gPSBmYWxzZTtcbiAgICBfdW5zdWJzY3JpYmVGcm9tVG9rZW5DaGFuZ2VkTGlzdGVuZXIgPSAoKSA9PiB7IH07XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfaW5zdGFuY2UsIGZzLCBwcmV2aWV3U2NyaXB0LCBcbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3J1bnRpbWVJbmZvKSB7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlID0gX2luc3RhbmNlO1xuICAgICAgICB0aGlzLl9ydW50aW1lSW5mbyA9IF9ydW50aW1lSW5mbztcbiAgICAgICAgdGhpcy5mcyA9IG5ldyBGaWxlU3lzdGVtQVBJQ2xpZW50KGZzKTtcbiAgICAgICAgLy8gZm9yd2FyZCB0aGUgY3JlZGVudGlhbHMgdG8gd2ViY29udGFpbmVyIGlmIG5lZWRlZFxuICAgICAgICBpZiAoYXV0aFN0YXRlLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZUZyb21Ub2tlbkNoYW5nZWRMaXN0ZW5lciA9IGFkZEFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVyKChhY2Nlc3NUb2tlbikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlLnNldENyZWRlbnRpYWxzKHsgYWNjZXNzVG9rZW4sIGVkaXRvck9yaWdpbjogYXV0aFN0YXRlLmVkaXRvck9yaWdpbiB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhdXRoU3RhdGUuYXV0aENvbXBsZXRlLnByb21pc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Rvcm5Eb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXNzZXJ0QXV0aFRva2VucyhhdXRoU3RhdGUudG9rZW5zKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9pbnN0YW5jZS5zZXRDcmVkZW50aWFscyh7XG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhdXRoU3RhdGUudG9rZW5zLmFjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yT3JpZ2luOiBhdXRoU3RhdGUuZWRpdG9yT3JpZ2luLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkoKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBwcmludCB0aGUgZXJyb3IgYXMgdGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gd2ViY29udGFpbmVyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzcGF3bihjb21tYW5kLCBvcHRpb25zT3JBcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBhcmdzID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnNPckFyZ3MpKSB7XG4gICAgICAgICAgICBhcmdzID0gb3B0aW9uc09yQXJncztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JBcmdzO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBvdXRwdXRTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oKTtcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm91dHB1dCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHN0cmVhbVdpdGhQdXNoKCk7XG4gICAgICAgICAgICBvdXRwdXQgPSByZXN1bHQucHVzaDtcbiAgICAgICAgICAgIG91dHB1dFN0cmVhbSA9IHJlc3VsdC5zdHJlYW07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0ZG91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHN0ZG91dFN0cmVhbTtcbiAgICAgICAgbGV0IHN0ZGVyciA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHN0ZGVyclN0cmVhbTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZE91dHB1dCA9IHByb3h5TGlzdGVuZXIoYmluYXJ5TGlzdGVuZXIob3V0cHV0KSk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRTdGRvdXQgPSBwcm94eUxpc3RlbmVyKGJpbmFyeUxpc3RlbmVyKHN0ZG91dCkpO1xuICAgICAgICBjb25zdCB3cmFwcGVkU3RkZXJyID0gcHJveHlMaXN0ZW5lcihiaW5hcnlMaXN0ZW5lcihzdGRlcnIpKTtcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IGF3YWl0IHRoaXMuX2luc3RhbmNlLnJ1bih7XG4gICAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgIGN3ZDogb3B0aW9ucz8uY3dkLFxuICAgICAgICAgICAgZW52OiBvcHRpb25zPy5lbnYsXG4gICAgICAgICAgICB0ZXJtaW5hbDogb3B0aW9ucz8udGVybWluYWwsXG4gICAgICAgIH0sIHdyYXBwZWRTdGRvdXQsIHdyYXBwZWRTdGRlcnIsIHdyYXBwZWRPdXRwdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFdlYkNvbnRhaW5lclByb2Nlc3NJbXBsKHByb2Nlc3MsIG91dHB1dFN0cmVhbSwgc3Rkb3V0U3RyZWFtLCBzdGRlcnJTdHJlYW0pO1xuICAgIH1cbiAgICBhc3luYyBleHBvcnQocGF0aCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBzZXJpYWxpemVPcHRpb25zID0ge1xuICAgICAgICAgICAgZm9ybWF0OiBvcHRpb25zPy5mb3JtYXQgPz8gJ2pzb24nLFxuICAgICAgICAgICAgaW5jbHVkZXM6IG9wdGlvbnM/LmluY2x1ZGVzLFxuICAgICAgICAgICAgZXhjbHVkZXM6IG9wdGlvbnM/LmV4Y2x1ZGVzLFxuICAgICAgICAgICAgZXh0ZXJuYWw6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2luc3RhbmNlLnNlcmlhbGl6ZShwYXRoLCBzZXJpYWxpemVPcHRpb25zKTtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZU9wdGlvbnMuZm9ybWF0ID09PSAnanNvbicpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKHJlc3VsdCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRvRXh0ZXJuYWxGaWxlU3lzdGVtVHJlZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50ID09PSAncHJldmlldy1tZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgICAgICAgbGlzdGVuZXIgPSAoKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNQcmV2aWV3TWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgbGlzdGVuZXI6IHdyYXBwZWQsIHN1YnNjcmliZSB9ID0gc3luY1N1YnNjcmlwdGlvbihsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmUodGhpcy5faW5zdGFuY2Uub24oZXZlbnQsIENvbWxpbmsucHJveHkod3JhcHBlZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW91bnRzIGEgdHJlZSBvZiBmaWxlcyBpbnRvIHRoZSBmaWxlc3lzdGVtLiBUaGlzIGNhbiBiZSBzcGVjaWZpZWQgYXMgYSB0cmVlIG9iamVjdCAoe0BsaW5rIEZpbGVTeXN0ZW1UcmVlfSlcbiAgICAgKiBvciBhcyBhIGJpbmFyeSBzbmFwc2hvdCBnZW5lcmF0ZWQgYnkgW2BAd2ViY29udGFpbmVyL3NuYXBzaG90YF0oaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQHdlYmNvbnRhaW5lci9zbmFwc2hvdCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc25hcHNob3RPclRyZWUgLSBBIHRyZWUgb2YgZmlsZXMsIG9yIGEgYmluYXJ5IHNuYXBzaG90LiBOb3RlIHRoYXQgYmluYXJ5IHBheWxvYWRzIHdpbGwgYmUgdHJhbnNmZXJyZWQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMubW91bnRQb2ludCAtIFNwZWNpZmllcyBhIG5lc3RlZCBwYXRoIHdoZXJlIHRoZSB0cmVlIHNob3VsZCBiZSBtb3VudGVkLlxuICAgICAqL1xuICAgIG1vdW50KHNuYXBzaG90T3JUcmVlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBzbmFwc2hvdE9yVHJlZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXlcbiAgICAgICAgICAgID8gc25hcHNob3RPclRyZWVcbiAgICAgICAgICAgIDogc25hcHNob3RPclRyZWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclxuICAgICAgICAgICAgICAgID8gbmV3IFVpbnQ4QXJyYXkoc25hcHNob3RPclRyZWUpXG4gICAgICAgICAgICAgICAgOiBlbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeSh0b0ludGVybmFsRmlsZVN5c3RlbVRyZWUoc25hcHNob3RPclRyZWUpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZS5sb2FkRmlsZXMoQ29tbGluay50cmFuc2ZlcihwYXlsb2FkLCBbcGF5bG9hZC5idWZmZXJdKSwge1xuICAgICAgICAgICAgbW91bnRQb2ludHM6IG9wdGlvbnM/Lm1vdW50UG9pbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYSBjdXN0b20gc2NyaXB0IHRvIGJlIGluamVjdGVkIGludG8gYWxsIHByZXZpZXdzLiBXaGVuIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLCBldmVyeVxuICAgICAqIGZ1dHVyZSBwYWdlIHJlbG9hZCB3aWxsIGNvbnRhaW4gdGhlIHByb3ZpZGVkIHNjcmlwdCB0YWcgb24gYWxsIEhUTUwgcmVzcG9uc2VzLlxuICAgICAqXG4gICAgICogTm90ZTpcbiAgICAgKlxuICAgICAqIFdoZW4gdGhpcyBmdW5jdGlvbiByZXNvbHZlcywgZXZlcnkgcHJldmlldyByZWxvYWRlZCBfYWZ0ZXJfIHdpbGwgaGF2ZSB0aGUgbmV3IHNjcmlwdC5cbiAgICAgKiBFeGlzdGluZyBwcmV2aWV3IGhhdmUgdG8gYmUgZXhwbGljaXRlbHkgcmVsb2FkZWQuXG4gICAgICpcbiAgICAgKiBUbyByZWxvYWQgYSBwcmV2aWV3IHlvdSBjYW4gdXNlIGByZWxvYWRQcmV2aWV3YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY3JpcHRTcmMgU291cmNlIGZvciB0aGUgc2NyaXB0IHRhZy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIGRlZmluZSB3aGljaCB0eXBlIG9mIHNjcmlwdCB0aGlzIGlzLlxuICAgICAqL1xuICAgIHNldFByZXZpZXdTY3JpcHQoc2NyaXB0U3JjLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZS5zZXRQcmV2aWV3U2NyaXB0KHNjcmlwdFNyYywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoZSBgUEFUSGAgZW52aXJvbm1lbnQgdmFyaWFibGUgZm9yIHByb2Nlc3NlcyBzdGFydGVkIHRocm91Z2gge0BsaW5rIHNwYXdufS5cbiAgICAgKi9cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVJbmZvLnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmdWxsIHBhdGggdG8gdGhlIHdvcmtpbmcgZGlyZWN0b3J5IChzZWUge0BsaW5rIEZpbGVTeXN0ZW1BUEl9KS5cbiAgICAgKi9cbiAgICBnZXQgd29ya2RpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVJbmZvLmN3ZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIFdlYkNvbnRhaW5lciBpbnN0YW5jZSwgdHVybmluZyBpdCB1bnVzYWJsZSwgYW5kIHJlbGVhc2VzIGl0cyByZXNvdXJjZXMuIEFmdGVyIHRoaXMsXG4gICAgICogYSBuZXcgV2ViQ29udGFpbmVyIGluc3RhbmNlIGNhbiBiZSBvYnRhaW5lZCBieSBjYWxsaW5nIHtAbGluayBXZWJDb250YWluZXIuYm9vdCB8IGBib290YH0uXG4gICAgICpcbiAgICAgKiBBbGwgZW50aXRpZXMgZGVyaXZlZCBmcm9tIHRoaXMgaW5zdGFuY2UgKGUuZy4gcHJvY2Vzc2VzLCB0aGUgZmlsZSBzeXN0ZW0sIGV0Yy4pIGFsc28gYmVjb21lIHVudXNhYmxlXG4gICAgICogYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICAgKi9cbiAgICB0ZWFyZG93bigpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Rvcm5Eb3duKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYkNvbnRhaW5lciBhbHJlYWR5IHRvcm4gZG93bicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Rvcm5Eb3duID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVGcm9tVG9rZW5DaGFuZ2VkTGlzdGVuZXIoKTtcbiAgICAgICAgY29uc3QgdGVhcmRvd25GbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5mcy5fdGVhcmRvd24oKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9pbnN0YW5jZS50ZWFyZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VbQ29tbGluay5yZWxlYXNlUHJveHldKCk7XG4gICAgICAgICAgICAgICAgaWYgKFdlYkNvbnRhaW5lci5faW5zdGFuY2UgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgV2ViQ29udGFpbmVyLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBXZWJDb250YWluZXIuX3RlYXJkb3duUHJvbWlzZSA9IHRlYXJkb3duRm4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQm9vdHMgYSBXZWJDb250YWluZXIuIE9ubHkgYSBzaW5nbGUgaW5zdGFuY2Ugb2YgV2ViQ29udGFpbmVyIGNhbiBiZSBib290ZWQgY29uY3VycmVudGx5XG4gICAgICogKHNlZSB7QGxpbmsgV2ViQ29udGFpbmVyLnRlYXJkb3duIHwgYHRlYXJkb3duYH0pLlxuICAgICAqXG4gICAgICogQm9vdGluZyBXZWJDb250YWluZXIgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgYm9vdChvcHRpb25zID0ge30pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fdGVhcmRvd25Qcm9taXNlO1xuICAgICAgICBXZWJDb250YWluZXIuX3RlYXJkb3duUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIGNvbnN0IHsgd29ya2Rpck5hbWUgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICh3aW5kb3cuY3Jvc3NPcmlnaW5Jc29sYXRlZCAmJiBvcHRpb25zLmNvZXAgPT09ICdub25lJykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBBIENyb3NzLU9yaWdpbi1FbWJlZGRlci1Qb2xpY3kgaGVhZGVyIGlzIHJlcXVpcmVkIGluIGNyb3NzIG9yaWdpbiBpc29sYXRlZCBlbnZpcm9ubWVudHMuXFxuU2V0IHRoZSAnY29lcCcgb3B0aW9uIHRvICdyZXF1aXJlLWNvcnAnLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JrZGlyTmFtZT8uaW5jbHVkZXMoJy8nKSB8fCB3b3JrZGlyTmFtZSA9PT0gJy4uJyB8fCB3b3JrZGlyTmFtZSA9PT0gJy4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dvcmtkaXJOYW1lIHNob3VsZCBiZSBhIHZhbGlkIGZvbGRlciBuYW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2lnbmFsIHRoYXQgYm9vdCB3YXMgY2FsbGVkIHRvIGF1dGggbW9kdWxlIGFzIGNhbGxpbmcgYXV0aC5pbml0IGFmdGVyIGJvb3QgaXMgbGlrZWx5IGluY29ycmVjdFxuICAgICAgICBhdXRoU3RhdGUuYm9vdENhbGxlZCA9IHRydWU7XG4gICAgICAgIC8vIHRyeSB0byBcImFjcXVpcmUgdGhlIGxvY2tcIiwgaS5lLiB3YWl0IGZvciBhbnkgb25nb2luZyBib290IHJlcXVlc3QgdG8gZmluaXNoXG4gICAgICAgIHdoaWxlIChib290UHJvbWlzZSkge1xuICAgICAgICAgICAgYXdhaXQgYm9vdFByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFdlYkNvbnRhaW5lci5faW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBhIHNpbmdsZSBXZWJDb250YWluZXIgaW5zdGFuY2UgY2FuIGJlIGJvb3RlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluc3RhbmNlUHJvbWlzZSA9IHVuc3luY2hyb25pemVkQm9vdChvcHRpb25zKTtcbiAgICAgICAgLy8gdGhlIFwibG9ja1wiIGlzIGEgcHJvbWlzZSBmb3IgdGhlIG9uZ29pbmcgYm9vdCB0aGF0IG5ldmVyIGZhaWxzXG4gICAgICAgIGJvb3RQcm9taXNlID0gaW5zdGFuY2VQcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGF3YWl0IGluc3RhbmNlUHJvbWlzZTtcbiAgICAgICAgICAgIFdlYkNvbnRhaW5lci5faW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIC8vIHJlbGVhc2UgdGhlIFwibG9ja1wiXG4gICAgICAgICAgICBib290UHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIENvbmZpZ3VyZSBhbiBBUEkga2V5IHRvIGJlIHVzZWQgZm9yIHRoaXMgaW5zdGFuY2Ugb2YgV2ViQ29udGFpbmVyLlxuICpcbiAqIEBwYXJhbSBrZXkgV2ViQ29udGFpbmVyIEFQSSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVBUElLZXkoa2V5KSB7XG4gICAgaWYgKGF1dGhTdGF0ZS5ib290Q2FsbGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYGNvbmZpZ3VyZUFQSUtleWAgc2hvdWxkIGFsd2F5cyBiZSBjYWxsZWQgYmVmb3JlIGBXZWJDb250YWluZXIuYm9vdGAnKTtcbiAgICB9XG4gICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnY2xpZW50X2lkJywga2V5KTtcbn1cbmNvbnN0IERJUl9FTlRSWV9UWVBFX0ZJTEUgPSAxO1xuY29uc3QgRElSX0VOVFJZX1RZUEVfRElSID0gMjtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERpckVudEltcGwge1xuICAgIG5hbWU7XG4gICAgX3R5cGU7XG4gICAgY29uc3RydWN0b3IobmFtZSwgX3R5cGUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fdHlwZSA9IF90eXBlO1xuICAgIH1cbiAgICBpc0ZpbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlID09PSBESVJfRU5UUllfVFlQRV9GSUxFO1xuICAgIH1cbiAgICBpc0RpcmVjdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGUgPT09IERJUl9FTlRSWV9UWVBFX0RJUjtcbiAgICB9XG59XG5jbGFzcyBGU1dhdGNoZXIge1xuICAgIF9hcGlDbGllbnQ7XG4gICAgX3BhdGg7XG4gICAgX29wdGlvbnM7XG4gICAgX2xpc3RlbmVyO1xuICAgIF93cmFwcGVkTGlzdGVuZXI7XG4gICAgX3dhdGNoZXI7XG4gICAgX2Nsb3NlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKF9hcGlDbGllbnQsIF9wYXRoLCBfb3B0aW9ucywgX2xpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuX2FwaUNsaWVudCA9IF9hcGlDbGllbnQ7XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IF9vcHRpb25zO1xuICAgICAgICB0aGlzLl9saXN0ZW5lciA9IF9saXN0ZW5lcjtcbiAgICAgICAgdGhpcy5fYXBpQ2xpZW50Ll93YXRjaGVycy5hZGQodGhpcyk7XG4gICAgICAgIHRoaXMuX3dyYXBwZWRMaXN0ZW5lciA9IChldmVudCwgZmlsZW5hbWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9saXN0ZW5lciAmJiAhdGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXIoZXZlbnQsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fYXBpQ2xpZW50Ll9mc1xuICAgICAgICAgICAgLndhdGNoKHRoaXMuX3BhdGgsIHRoaXMuX29wdGlvbnMsIHByb3h5TGlzdGVuZXIodGhpcy5fd3JhcHBlZExpc3RlbmVyKSlcbiAgICAgICAgICAgIC50aGVuKChfd2F0Y2hlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fd2F0Y2hlciA9IF93YXRjaGVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZWFyZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9XG4gICAgYXN5bmMgY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fYXBpQ2xpZW50Ll93YXRjaGVycy5kZWxldGUodGhpcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl90ZWFyZG93bigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jIF90ZWFyZG93bigpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fd2F0Y2hlcj8uY2xvc2UoKS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3dhdGNoZXI/LltDb21saW5rLnJlbGVhc2VQcm94eV0oKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgV2ViQ29udGFpbmVyUHJvY2Vzc0ltcGwge1xuICAgIG91dHB1dDtcbiAgICBpbnB1dDtcbiAgICBleGl0O1xuICAgIF9wcm9jZXNzO1xuICAgIHN0ZG91dDtcbiAgICBzdGRlcnI7XG4gICAgY29uc3RydWN0b3IocHJvY2Vzcywgb3V0cHV0LCBzdGRvdXQsIHN0ZGVycikge1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICAgICAgdGhpcy5fcHJvY2VzcyA9IHByb2Nlc3M7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBuZXcgV3JpdGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgd3JpdGU6IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBwcm9taXNlIGlzIG5vdCBzdXBwb3NlZCB0byBmYWlsIGFueXdheVxuICAgICAgICAgICAgICAgIHRoaXMuX2dldFByb2Nlc3MoKVxuICAgICAgICAgICAgICAgICAgICA/LndyaXRlKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhpdCA9IHRoaXMuX29uRXhpdCgpO1xuICAgICAgICB0aGlzLnN0ZG91dCA9IHN0ZG91dDtcbiAgICAgICAgdGhpcy5zdGRlcnIgPSBzdGRlcnI7XG4gICAgfVxuICAgIGtpbGwoKSB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3M/LmtpbGwoKTtcbiAgICB9XG4gICAgcmVzaXplKGRpbWVuc2lvbnMpIHtcbiAgICAgICAgdGhpcy5fZ2V0UHJvY2VzcygpPy5yZXNpemUoZGltZW5zaW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIF9vbkV4aXQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcHJvY2Vzcy5vbkV4aXQ7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzPy5bQ29tbGluay5yZWxlYXNlUHJveHldKCk7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0UHJvY2VzcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Byb2Nlc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGlzIHByb2Nlc3MgYWxyZWFkeSBleGl0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2VzcztcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBGaWxlU3lzdGVtQVBJQ2xpZW50IHtcbiAgICBfZnM7XG4gICAgX3dhdGNoZXJzID0gbmV3IFNldChbXSk7XG4gICAgY29uc3RydWN0b3IoZnMpIHtcbiAgICAgICAgdGhpcy5fZnMgPSBmcztcbiAgICB9XG4gICAgcm0oLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnMucm0oLi4uYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHJlYWRGaWxlKHBhdGgsIGVuY29kaW5nKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9mcy5yZWFkRmlsZShwYXRoLCBlbmNvZGluZyk7XG4gICAgfVxuICAgIGFzeW5jIHJlbmFtZShvbGRQYXRoLCBuZXdQYXRoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9mcy5yZW5hbWUob2xkUGF0aCwgbmV3UGF0aCk7XG4gICAgfVxuICAgIGFzeW5jIHdyaXRlRmlsZShwYXRoLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gZGF0YS5idWZmZXIuc2xpY2UoZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVPZmZzZXQgKyBkYXRhLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgZGF0YSA9IENvbWxpbmsudHJhbnNmZXIobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSwgW2J1ZmZlcl0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuX2ZzLndyaXRlRmlsZShwYXRoLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgcmVhZGRpcihwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ZzLnJlYWRkaXIocGF0aCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChpc1N0cmluZ0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVHlwZWRBcnJheUNvbGxlY3Rpb24ocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbnRyaWVzID0gcmVzdWx0Lm1hcCgoZW50cnkpID0+IG5ldyBEaXJFbnRJbXBsKGVudHJ5Lm5hbWUsIGVudHJ5WydTeW1ib2wodHlwZSknXSkpO1xuICAgICAgICByZXR1cm4gZW50cmllcztcbiAgICB9XG4gICAgYXN5bmMgbWtkaXIocGF0aCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZnMubWtkaXIocGF0aCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHdhdGNoKHBhdGgsIG9wdGlvbnMsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGU1dhdGNoZXIodGhpcywgcGF0aCwgb3B0aW9ucywgbGlzdGVuZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyBfdGVhcmRvd24oKSB7XG4gICAgICAgIHRoaXMuX2ZzW0NvbWxpbmsucmVsZWFzZVByb3h5XSgpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbLi4udGhpcy5fd2F0Y2hlcnNdLm1hcCgod2F0Y2hlcikgPT4gd2F0Y2hlci5jbG9zZSgpKSk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gdW5zeW5jaHJvbml6ZWRCb290KG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHNlcnZlclByb21pc2UgfSA9IHNlcnZlckZhY3Rvcnkob3B0aW9ucyk7XG4gICAgY29uc3Qgc2VydmVyID0gYXdhaXQgc2VydmVyUHJvbWlzZTtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGF3YWl0IHNlcnZlci5idWlsZCh7XG4gICAgICAgIGhvc3Q6IHdpbmRvdy5sb2NhdGlvbi5ob3N0LFxuICAgICAgICB2ZXJzaW9uOiBcIjEuNi4xXCIsXG4gICAgICAgIHdvcmtkaXJOYW1lOiBvcHRpb25zLndvcmtkaXJOYW1lLFxuICAgICAgICBmb3J3YXJkUHJldmlld0Vycm9yczogb3B0aW9ucy5mb3J3YXJkUHJldmlld0Vycm9ycyxcbiAgICB9KTtcbiAgICBjb25zdCBbZnMsIHByZXZpZXdTY3JpcHQsIHJ1bnRpbWVJbmZvXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgaW5zdGFuY2UuZnMoKSxcbiAgICAgICAgaW5zdGFuY2UucHJldmlld1NjcmlwdCgpLFxuICAgICAgICBpbnN0YW5jZS5ydW50aW1lSW5mbygpLFxuICAgIF0pO1xuICAgIHJldHVybiBuZXcgV2ViQ29udGFpbmVyKGluc3RhbmNlLCBmcywgcHJldmlld1NjcmlwdCwgcnVudGltZUluZm8pO1xufVxuZnVuY3Rpb24gYmluYXJ5TGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihkZWNvZGVyLmRlY29kZShkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBwcm94eUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgaWYgKGxpc3RlbmVyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIENvbWxpbmsucHJveHkobGlzdGVuZXIpO1xufVxuZnVuY3Rpb24gc2VydmVyRmFjdG9yeShvcHRpb25zKSB7XG4gICAgaWYgKGNhY2hlZFNlcnZlclByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5jb2VwICE9PSBjYWNoZWRCb290T3B0aW9ucy5jb2VwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEF0dGVtcHRpbmcgdG8gYm9vdCBXZWJDb250YWluZXIgd2l0aCAnY29lcDogJHtvcHRpb25zLmNvZXB9J2ApO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBGaXJzdCBib290IGhhZCAnY29lcDogJHtjYWNoZWRCb290T3B0aW9ucy5jb2VwfScsIG5ldyBzZXR0aW5ncyB3aWxsIG5vdCB0YWtlIGVmZmVjdCFgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzZXJ2ZXJQcm9taXNlOiBjYWNoZWRTZXJ2ZXJQcm9taXNlIH07XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNvZXApIHtcbiAgICAgICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnY29lcCcsIG9wdGlvbnMuY29lcCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmV4cGVyaW1lbnRhbE5vZGUpIHtcbiAgICAgICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnZXhwZXJpbWVudGFsX25vZGUnLCAnMScpO1xuICAgIH1cbiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhbGxvdycsICdjcm9zcy1vcmlnaW4taXNvbGF0ZWQnKTtcbiAgICBjb25zdCB1cmwgPSBpZnJhbWVTZXR0aW5ncy51cmw7XG4gICAgaWZyYW1lLnNyYyA9IHVybC50b1N0cmluZygpO1xuICAgIGNvbnN0IHsgb3JpZ2luIH0gPSB1cmw7XG4gICAgY2FjaGVkQm9vdE9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICBjYWNoZWRTZXJ2ZXJQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3Qgb25NZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQub3JpZ2luICE9PSBvcmlnaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGV2ZW50O1xuICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luaXQnKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShDb21saW5rLndyYXAoZXZlbnQucG9ydHNbMF0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnd2FybmluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlW2RhdGEubGV2ZWxdLmNhbGwoY29uc29sZSwgZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShpZnJhbWUsIG51bGwpO1xuICAgIHJldHVybiB7IHNlcnZlclByb21pc2U6IGNhY2hlZFNlcnZlclByb21pc2UgfTtcbn1cbmZ1bmN0aW9uIGlzU3RyaW5nQXJyYXkobGlzdCkge1xuICAgIHJldHVybiB0eXBlb2YgbGlzdFswXSA9PT0gJ3N0cmluZyc7XG59XG5mdW5jdGlvbiBpc1R5cGVkQXJyYXlDb2xsZWN0aW9uKGxpc3QpIHtcbiAgICByZXR1cm4gbGlzdFswXSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk7XG59XG5mdW5jdGlvbiBzdHJlYW1XaXRoUHVzaCgpIHtcbiAgICBsZXQgY29udHJvbGxlciA9IG51bGw7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgc3RhcnQoY29udHJvbGxlcl8pIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBjb250cm9sbGVyXztcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCBwdXNoID0gKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0gIT0gbnVsbCkge1xuICAgICAgICAgICAgY29udHJvbGxlcj8uZW5xdWV1ZShpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI/LmNsb3NlKCk7XG4gICAgICAgICAgICBjb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHsgc3RyZWFtLCBwdXNoIH07XG59XG5mdW5jdGlvbiBzeW5jU3Vic2NyaXB0aW9uKGxpc3RlbmVyKSB7XG4gICAgbGV0IHN0b3BwZWQgPSBmYWxzZTtcbiAgICBsZXQgdW5zdWJzY3JpYmUgPSAoKSA9PiB7IH07XG4gICAgY29uc3Qgd3JhcHBlZCA9ICgoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoc3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1YnNjcmliZShwcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9taXNlLnRoZW4oKHVuc3Vic2NyaWJlXykgPT4ge1xuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmVfO1xuICAgICAgICAgICAgICAgIGlmIChzdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBsaXN0ZW5lcjogd3JhcHBlZCxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbImF1dGhTdGF0ZSIsImFzc2VydEF1dGhUb2tlbnMiLCJQcmV2aWV3TWVzc2FnZVR5cGUiLCJDb21saW5rIiwiYXV0aCIsImF1dGhJbXBsIiwiYWRkQWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXIiLCJpZnJhbWVTZXR0aW5ncyIsImlzUHJldmlld01lc3NhZ2UiLCJ0b0V4dGVybmFsRmlsZVN5c3RlbVRyZWUiLCJ0b0ludGVybmFsRmlsZVN5c3RlbVRyZWUiLCJib290UHJvbWlzZSIsImNhY2hlZFNlcnZlclByb21pc2UiLCJjYWNoZWRCb290T3B0aW9ucyIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsIldlYkNvbnRhaW5lciIsIl9pbnN0YW5jZSIsIl90ZWFyZG93blByb21pc2UiLCJjb25zdHJ1Y3RvciIsImZzIiwicHJldmlld1NjcmlwdCIsIl9ydW50aW1lSW5mbyIsIl90b3JuRG93biIsIl91bnN1YnNjcmliZUZyb21Ub2tlbkNoYW5nZWRMaXN0ZW5lciIsIkZpbGVTeXN0ZW1BUElDbGllbnQiLCJpbml0aWFsaXplZCIsImFjY2Vzc1Rva2VuIiwic2V0Q3JlZGVudGlhbHMiLCJlZGl0b3JPcmlnaW4iLCJhdXRoQ29tcGxldGUiLCJwcm9taXNlIiwidG9rZW5zIiwiYWNjZXNzIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJzcGF3biIsImNvbW1hbmQiLCJvcHRpb25zT3JBcmdzIiwib3B0aW9ucyIsImFyZ3MiLCJBcnJheSIsImlzQXJyYXkiLCJvdXRwdXQiLCJ1bmRlZmluZWQiLCJvdXRwdXRTdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInJlc3VsdCIsInN0cmVhbVdpdGhQdXNoIiwicHVzaCIsInN0cmVhbSIsInN0ZG91dCIsInN0ZG91dFN0cmVhbSIsInN0ZGVyciIsInN0ZGVyclN0cmVhbSIsIndyYXBwZWRPdXRwdXQiLCJwcm94eUxpc3RlbmVyIiwiYmluYXJ5TGlzdGVuZXIiLCJ3cmFwcGVkU3Rkb3V0Iiwid3JhcHBlZFN0ZGVyciIsInByb2Nlc3MiLCJydW4iLCJjd2QiLCJlbnYiLCJ0ZXJtaW5hbCIsIldlYkNvbnRhaW5lclByb2Nlc3NJbXBsIiwiZXhwb3J0IiwicGF0aCIsInNlcmlhbGl6ZU9wdGlvbnMiLCJmb3JtYXQiLCJpbmNsdWRlcyIsImV4Y2x1ZGVzIiwiZXh0ZXJuYWwiLCJzZXJpYWxpemUiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiZGVjb2RlIiwib24iLCJldmVudCIsImxpc3RlbmVyIiwib3JpZ2luYWxMaXN0ZW5lciIsIm1lc3NhZ2UiLCJ3cmFwcGVkIiwic3Vic2NyaWJlIiwic3luY1N1YnNjcmlwdGlvbiIsInByb3h5IiwibW91bnQiLCJzbmFwc2hvdE9yVHJlZSIsInBheWxvYWQiLCJVaW50OEFycmF5IiwiQXJyYXlCdWZmZXIiLCJlbmNvZGUiLCJzdHJpbmdpZnkiLCJsb2FkRmlsZXMiLCJ0cmFuc2ZlciIsImJ1ZmZlciIsIm1vdW50UG9pbnRzIiwibW91bnRQb2ludCIsInNldFByZXZpZXdTY3JpcHQiLCJzY3JpcHRTcmMiLCJ3b3JrZGlyIiwidGVhcmRvd24iLCJFcnJvciIsInRlYXJkb3duRm4iLCJfdGVhcmRvd24iLCJyZWxlYXNlUHJveHkiLCJib290Iiwid29ya2Rpck5hbWUiLCJ3aW5kb3ciLCJjcm9zc09yaWdpbklzb2xhdGVkIiwiY29lcCIsIndhcm4iLCJib290Q2FsbGVkIiwiaW5zdGFuY2VQcm9taXNlIiwidW5zeW5jaHJvbml6ZWRCb290IiwiaW5zdGFuY2UiLCJjb25maWd1cmVBUElLZXkiLCJrZXkiLCJzZXRRdWVyeVBhcmFtIiwiRElSX0VOVFJZX1RZUEVfRklMRSIsIkRJUl9FTlRSWV9UWVBFX0RJUiIsIkRpckVudEltcGwiLCJuYW1lIiwiX3R5cGUiLCJpc0ZpbGUiLCJpc0RpcmVjdG9yeSIsIkZTV2F0Y2hlciIsIl9hcGlDbGllbnQiLCJfcGF0aCIsIl9vcHRpb25zIiwiX2xpc3RlbmVyIiwiX2Nsb3NlZCIsIl93YXRjaGVycyIsImFkZCIsIl93cmFwcGVkTGlzdGVuZXIiLCJmaWxlbmFtZSIsIl9mcyIsIndhdGNoIiwidGhlbiIsIl93YXRjaGVyIiwiY2xvc2UiLCJkZWxldGUiLCJmaW5hbGx5IiwiX3Byb2Nlc3MiLCJpbnB1dCIsIldyaXRhYmxlU3RyZWFtIiwid3JpdGUiLCJfZ2V0UHJvY2VzcyIsImV4aXQiLCJfb25FeGl0Iiwia2lsbCIsInJlc2l6ZSIsImRpbWVuc2lvbnMiLCJvbkV4aXQiLCJTZXQiLCJybSIsInJlYWRGaWxlIiwiZW5jb2RpbmciLCJyZW5hbWUiLCJvbGRQYXRoIiwibmV3UGF0aCIsIndyaXRlRmlsZSIsInNsaWNlIiwiYnl0ZU9mZnNldCIsImJ5dGVMZW5ndGgiLCJyZWFkZGlyIiwiaXNTdHJpbmdBcnJheSIsImlzVHlwZWRBcnJheUNvbGxlY3Rpb24iLCJlbnRyaWVzIiwibWFwIiwiZW50cnkiLCJta2RpciIsIlByb21pc2UiLCJhbGwiLCJ3YXRjaGVyIiwic2VydmVyUHJvbWlzZSIsInNlcnZlckZhY3RvcnkiLCJzZXJ2ZXIiLCJidWlsZCIsImhvc3QiLCJsb2NhdGlvbiIsInZlcnNpb24iLCJmb3J3YXJkUHJldmlld0Vycm9ycyIsInJ1bnRpbWVJbmZvIiwiZXhwZXJpbWVudGFsTm9kZSIsImlmcmFtZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsInNldEF0dHJpYnV0ZSIsInVybCIsInNyYyIsInRvU3RyaW5nIiwib3JpZ2luIiwicmVzb2x2ZSIsIm9uTWVzc2FnZSIsInR5cGUiLCJ3cmFwIiwicG9ydHMiLCJsZXZlbCIsImNhbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsImluc2VydEJlZm9yZSIsImxpc3QiLCJjb250cm9sbGVyIiwic3RhcnQiLCJjb250cm9sbGVyXyIsIml0ZW0iLCJlbnF1ZXVlIiwic3RvcHBlZCIsInVuc3Vic2NyaWJlIiwidW5zdWJzY3JpYmVfIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TypedEventTarget: () => (/* binding */ TypedEventTarget)\n/* harmony export */ });\nclass TypedEventTarget {\n    listen(listener) {\n        function wrappedListener(event) {\n            listener(event.data);\n        }\n        this._bus.addEventListener(\"message\", wrappedListener);\n        return ()=>this._bus.removeEventListener(\"message\", wrappedListener);\n    }\n    fireEvent(data) {\n        this._bus.dispatchEvent(new MessageEvent(\"message\", {\n            data\n        }));\n    }\n    constructor(){\n        this._bus = new EventTarget();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9UeXBlZEV2ZW50VGFyZ2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQTtJQUVUQyxPQUFPQyxRQUFRLEVBQUU7UUFDYixTQUFTQyxnQkFBZ0JDLEtBQUs7WUFDMUJGLFNBQVNFLE1BQU1DLElBQUk7UUFDdkI7UUFDQSxJQUFJLENBQUNDLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUMsV0FBV0o7UUFDdEMsT0FBTyxJQUFNLElBQUksQ0FBQ0csSUFBSSxDQUFDRSxtQkFBbUIsQ0FBQyxXQUFXTDtJQUMxRDtJQUNBTSxVQUFVSixJQUFJLEVBQUU7UUFDWixJQUFJLENBQUNDLElBQUksQ0FBQ0ksYUFBYSxDQUFDLElBQUlDLGFBQWEsV0FBVztZQUFFTjtRQUFLO0lBQy9EOzthQVZBQyxPQUFPLElBQUlNOztBQVdmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvVHlwZWRFdmVudFRhcmdldC5qcz9lOTUwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBUeXBlZEV2ZW50VGFyZ2V0IHtcbiAgICBfYnVzID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgICAgIGZ1bmN0aW9uIHdyYXBwZWRMaXN0ZW5lcihldmVudCkge1xuICAgICAgICAgICAgbGlzdGVuZXIoZXZlbnQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYnVzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB3cmFwcGVkTGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy5fYnVzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB3cmFwcGVkTGlzdGVuZXIpO1xuICAgIH1cbiAgICBmaXJlRXZlbnQoZGF0YSkge1xuICAgICAgICB0aGlzLl9idXMuZGlzcGF0Y2hFdmVudChuZXcgTWVzc2FnZUV2ZW50KCdtZXNzYWdlJywgeyBkYXRhIH0pKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiVHlwZWRFdmVudFRhcmdldCIsImxpc3RlbiIsImxpc3RlbmVyIiwid3JhcHBlZExpc3RlbmVyIiwiZXZlbnQiLCJkYXRhIiwiX2J1cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZmlyZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsIk1lc3NhZ2VFdmVudCIsIkV2ZW50VGFyZ2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js":
/*!********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/auth-state.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertAuthTokens: () => (/* binding */ assertAuthTokens),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   authState: () => (/* binding */ authState)\n/* harmony export */ });\n/* harmony import */ var _tokens_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tokens.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n/* harmony import */ var _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./iframe-url.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\");\n/* harmony import */ var _code_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./code.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js\");\n/* harmony import */ var _reset_promise_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./reset-promise.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js\");\n/* harmony import */ var _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TypedEventTarget.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\");\n\n\n\n\n\n\n/**\n * @internal\n */ const authState = {\n    initialized: false,\n    bootCalled: false,\n    authComplete: (0,_reset_promise_js__WEBPACK_IMPORTED_MODULE_4__.resettablePromise)(),\n    clientId: \"\",\n    oauthScope: \"\",\n    broadcastChannel: null,\n    get editorOrigin () {\n        return _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.editorOrigin;\n    },\n    tokens: null\n};\nconst authFailedListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__.TypedEventTarget();\nconst loggedOutListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__.TypedEventTarget();\nfunction broadcastMessage(message) {\n    if (!authState.broadcastChannel) {\n        return;\n    }\n    authState.broadcastChannel.postMessage(message);\n    // check if we are in a popup mode\n    if (localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME) === \"true\" && message.type !== \"auth-logout\") {\n        localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME);\n        // wait a tick to make sure the posted message has been sent\n        setTimeout(()=>{\n            window.close();\n        });\n    }\n}\nconst auth = {\n    init ({ editorOrigin, clientId, scope }) {\n        if (authState.initialized) {\n            throw new Error(\"Init should only be called once\");\n        }\n        let enterprise = true;\n        if (enterprise && authState.bootCalled) {\n            throw new Error(\"`auth.init` should always be called before `WebContainer.boot`\");\n        }\n        authState.initialized = true;\n        authState.tokens = _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromStorage();\n        authState.clientId = clientId;\n        authState.oauthScope = scope;\n        authState.broadcastChannel = new BroadcastChannel(_constants_js__WEBPACK_IMPORTED_MODULE_1__.BROADCAST_CHANNEL_NAME);\n        // configure iframe url\n        _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.setQueryParam(\"client_id\", clientId);\n        if (editorOrigin) {\n            _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.editorOrigin = new URL(editorOrigin).origin;\n        }\n        loggedOutListeners.listen(()=>authState.authComplete.reset());\n        // if authentication or logout are done in another page, we want to reflect the state on this page as well\n        authState.broadcastChannel.addEventListener(\"message\", onChannelMessage);\n        async function onChannelMessage(event) {\n            const typedEvent = event.data;\n            if (typedEvent.type === \"auth-complete\") {\n                authState.tokens = _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromStorage();\n                // we ignore the possible error here because they can't have expired just yet\n                await authState.tokens.activate(onFailedTokenRefresh);\n                authState.authComplete.resolve();\n                return;\n            }\n            if (typedEvent.type === \"auth-failed\") {\n                authFailedListeners.fireEvent(typedEvent);\n                return;\n            }\n            if (typedEvent.type === \"auth-logout\") {\n                loggedOutListeners.fireEvent();\n                return;\n            }\n        }\n        if (authState.tokens) {\n            const tokens = authState.tokens;\n            if (tokens.origin === authState.editorOrigin) {\n                /**\n                 * Here we assume that the refresh token never expires which\n                 * might not be correct. If that is the case though, we will\n                 * emit a 'logged-out' event to signal that the user has been\n                 * logged out, which could also happen at a later time anyway.\n                 *\n                 * Because this flow is done entirely locally, we do not broadcast\n                 * anything to the other tabs. They should be performing a similar\n                 * check.\n                 */ (async ()=>{\n                    const success = await tokens.activate(onFailedTokenRefresh);\n                    if (!success) {\n                        // if we got new token in the meantime we discard this error\n                        if (authState.tokens !== tokens) {\n                            return;\n                        }\n                        loggedOutListeners.fireEvent();\n                        return;\n                    }\n                    authState.authComplete.resolve();\n                })();\n                return {\n                    status: \"authorized\"\n                };\n            }\n            (0,_tokens_js__WEBPACK_IMPORTED_MODULE_0__.clearTokensInStorage)();\n            authState.tokens = null;\n        }\n        const locationURL = new URL(window.location.href);\n        const { searchParams } = locationURL;\n        const updateURL = ()=>window.history.replaceState({}, document.title, locationURL);\n        // check for errors first, aka the user declined the authorisation or stackblitz did\n        if (searchParams.has(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR)) {\n            const error = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR);\n            const description = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR_DESCRIPTION);\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR);\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR_DESCRIPTION);\n            updateURL();\n            broadcastMessage({\n                type: \"auth-failed\",\n                error,\n                description\n            });\n            return {\n                status: \"auth-failed\",\n                error,\n                description\n            };\n        }\n        // if there's an auth code\n        if (searchParams.has(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE)) {\n            const authCode = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE);\n            const editorOrigin = authState.editorOrigin;\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE);\n            updateURL();\n            const codeVerifier = localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME);\n            if (!codeVerifier) {\n                return {\n                    status: \"need-auth\"\n                };\n            }\n            localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME);\n            _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromAuthCode({\n                editorOrigin,\n                clientId: authState.clientId,\n                authCode,\n                codeVerifier,\n                redirectUri: defaultRedirectUri()\n            }).then(async (tokens)=>{\n                authState.tokens = tokens;\n                assertAuthTokens(authState.tokens);\n                const success = await authState.tokens.activate(onFailedTokenRefresh);\n                // if authentication failed we throw, and we'll mark auth as failed\n                if (!success) {\n                    throw new Error();\n                }\n                authState.authComplete.resolve();\n                broadcastMessage({\n                    type: \"auth-complete\"\n                });\n            }).catch((error)=>{\n                // this should never happen unless the rails app is now down for some reason?\n                console.error(error);\n                // treat it as a logged out event so that the user can retry to login\n                loggedOutListeners.fireEvent();\n                broadcastMessage({\n                    type: \"auth-logout\"\n                });\n            });\n            return {\n                status: \"authorized\"\n            };\n        }\n        return {\n            status: \"need-auth\"\n        };\n    },\n    async startAuthFlow ({ popup } = {}) {\n        if (!authState.initialized) {\n            throw new Error(\"auth.init must be called first\");\n        }\n        if (popup) {\n            localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME, \"true\");\n            const height = 500;\n            const width = 620;\n            const left = window.screenLeft + (window.outerWidth - width) / 2;\n            const top = window.screenTop + (window.outerHeight - height) / 2;\n            window.open(await generateOAuthRequest(), \"_blank\", `popup,width=${width},height=${height},left=${left},top=${top}`);\n        } else {\n            window.location.href = await generateOAuthRequest();\n        }\n    },\n    async logout ({ ignoreRevokeError } = {}) {\n        await authState.tokens?.revoke(authState.clientId, ignoreRevokeError ?? false);\n        loggedOutListeners.fireEvent();\n        broadcastMessage({\n            type: \"auth-logout\"\n        });\n    },\n    loggedIn () {\n        return authState.authComplete.promise;\n    },\n    on (event, listener) {\n        switch(event){\n            case \"auth-failed\":\n                {\n                    return authFailedListeners.listen(listener);\n                }\n            case \"logged-out\":\n                {\n                    return loggedOutListeners.listen(listener);\n                }\n            default:\n                {\n                    throw new Error(`Unsupported event type '${event}'.`);\n                }\n        }\n    }\n};\nfunction onFailedTokenRefresh() {\n    loggedOutListeners.fireEvent();\n    broadcastMessage({\n        type: \"auth-logout\"\n    });\n}\nfunction defaultRedirectUri() {\n    return window.location.href;\n}\nasync function generateOAuthRequest() {\n    const codeVerifier = (0,_code_js__WEBPACK_IMPORTED_MODULE_3__.newCodeVerifier)();\n    localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME, codeVerifier);\n    const codeChallenge = await (0,_code_js__WEBPACK_IMPORTED_MODULE_3__.S256)(codeVerifier);\n    const url = new URL(\"/oauth/authorize\", authState.editorOrigin);\n    const { searchParams } = url;\n    searchParams.append(\"response_type\", \"code\");\n    searchParams.append(\"client_id\", authState.clientId);\n    searchParams.append(\"redirect_uri\", defaultRedirectUri());\n    searchParams.append(\"scope\", authState.oauthScope);\n    searchParams.append(\"code_challenge\", codeChallenge);\n    searchParams.append(\"code_challenge_method\", \"S256\");\n    return url.toString();\n}\n/**\n * @internal\n */ function assertAuthTokens(tokens) {\n    if (!tokens) {\n        throw new Error(\"Oops! Tokens is not defined when it always should be.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9hdXRoLXN0YXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEyRDtBQUMwSDtBQUNwSTtBQUNDO0FBQ0s7QUFDRTtBQUN6RDs7Q0FFQyxHQUNNLE1BQU1hLFlBQVk7SUFDckJDLGFBQWE7SUFDYkMsWUFBWTtJQUNaQyxjQUFjTCxvRUFBaUJBO0lBQy9CTSxVQUFVO0lBQ1ZDLFlBQVk7SUFDWkMsa0JBQWtCO0lBQ2xCLElBQUlDLGdCQUFlO1FBQ2YsT0FBT1osMERBQWNBLENBQUNZLFlBQVk7SUFDdEM7SUFDQUMsUUFBUTtBQUNaLEVBQUU7QUFDRixNQUFNQyxzQkFBc0IsSUFBSVYsa0VBQWdCQTtBQUNoRCxNQUFNVyxxQkFBcUIsSUFBSVgsa0VBQWdCQTtBQUMvQyxTQUFTWSxpQkFBaUJDLE9BQU87SUFDN0IsSUFBSSxDQUFDWixVQUFVTSxnQkFBZ0IsRUFBRTtRQUM3QjtJQUNKO0lBQ0FOLFVBQVVNLGdCQUFnQixDQUFDTyxXQUFXLENBQUNEO0lBQ3ZDLGtDQUFrQztJQUNsQyxJQUFJRSxhQUFhQyxPQUFPLENBQUN0Qiw2REFBa0JBLE1BQU0sVUFBVW1CLFFBQVFJLElBQUksS0FBSyxlQUFlO1FBQ3ZGRixhQUFhRyxVQUFVLENBQUN4Qiw2REFBa0JBO1FBQzFDLDREQUE0RDtRQUM1RHlCLFdBQVc7WUFDUEMsT0FBT0MsS0FBSztRQUNoQjtJQUNKO0FBQ0o7QUFDTyxNQUFNQyxPQUFPO0lBQ2hCQyxNQUFLLEVBQUVmLFlBQVksRUFBRUgsUUFBUSxFQUFFbUIsS0FBSyxFQUFFO1FBQ2xDLElBQUl2QixVQUFVQyxXQUFXLEVBQUU7WUFDdkIsTUFBTSxJQUFJdUIsTUFBTTtRQUNwQjtRQUNBLElBQUlDLGFBQWE7UUFDakIsSUFBSUEsY0FBY3pCLFVBQVVFLFVBQVUsRUFBRTtZQUNwQyxNQUFNLElBQUlzQixNQUFNO1FBQ3BCO1FBQ0F4QixVQUFVQyxXQUFXLEdB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QUNBLFNBQVM4QztJQUNMLE9BQU8zQyxPQUFPMEIsUUFBUSxDQUFDQyxJQUFJO0FBQy9CO0FBQ0EsZUFBZWlDO0lBQ1gsTUFBTXBCLGVBQWU5RCx5REFBZUE7SUFDcENpQixhQUFhdUQsT0FBTyxDQUFDOUUscUVBQTBCQSxFQUFFb0U7SUFDakQsTUFBTTRCLGdCQUFnQixNQUFNM0YsOENBQUlBLENBQUMrRDtJQUNqQyxNQUFNNkIsTUFBTSxJQUFJM0QsSUFBSSxvQkFBb0I3QixVQUFVTyxZQUFZO0lBQzlELE1BQU0sRUFBRXdDLFlBQVksRUFBRSxHQUFHeUM7SUFDekJ6QyxhQUFhMEMsTUFBTSxDQUFDLGlCQUFpQjtJQUNyQzFDLGFBQWEwQyxNQUFNLENBQUMsYUFBYXpGLFVBQVVJLFFBQVE7SUFDbkQyQyxhQUFhMEMsTUFBTSxDQUFDLGdCQUFnQjNCO0lBQ3BDZixhQUFhMEMsTUFBTSxDQUFDLFNBQVN6RixVQUFVSyxVQUFVO0lBQ2pEMEMsYUFBYTBDLE1BQU0sQ0FBQyxrQkFBa0JGO0lBQ3RDeEMsYUFBYTBDLE1BQU0sQ0FBQyx5QkFBeUI7SUFDN0MsT0FBT0QsSUFBSUUsUUFBUTtBQUN2QjtBQUNBOztDQUVDLEdBQ00sU0FBUzFCLGlCQUFpQnhELE1BQU07SUFDbkMsSUFBSSxDQUFDQSxRQUFRO1FBQ1QsTUFBTSxJQUFJZ0IsTUFBTTtJQUNwQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvYXV0aC1zdGF0ZS5qcz84ODI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRva2VucywgY2xlYXJUb2tlbnNJblN0b3JhZ2UgfSBmcm9tICcuL3Rva2Vucy5qcyc7XG5pbXBvcnQgeyBTRUFSQ0hfUEFSQU1fQVVUSF9DT0RFLCBTRUFSQ0hfUEFSQU1fRVJST1IsIFNUT1JBR0VfQ09ERV9WRVJJRklFUl9OQU1FLCBCUk9BRENBU1RfQ0hBTk5FTF9OQU1FLCBTVE9SQUdFX1BPUFVQX05BTUUsIFNFQVJDSF9QQVJBTV9FUlJPUl9ERVNDUklQVElPTiwgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBpZnJhbWVTZXR0aW5ncyB9IGZyb20gJy4vaWZyYW1lLXVybC5qcyc7XG5pbXBvcnQgeyBTMjU2LCBuZXdDb2RlVmVyaWZpZXIgfSBmcm9tICcuL2NvZGUuanMnO1xuaW1wb3J0IHsgcmVzZXR0YWJsZVByb21pc2UgfSBmcm9tICcuL3Jlc2V0LXByb21pc2UuanMnO1xuaW1wb3J0IHsgVHlwZWRFdmVudFRhcmdldCB9IGZyb20gJy4vVHlwZWRFdmVudFRhcmdldC5qcyc7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgYXV0aFN0YXRlID0ge1xuICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICBib290Q2FsbGVkOiBmYWxzZSxcbiAgICBhdXRoQ29tcGxldGU6IHJlc2V0dGFibGVQcm9taXNlKCksXG4gICAgY2xpZW50SWQ6ICcnLFxuICAgIG9hdXRoU2NvcGU6ICcnLFxuICAgIGJyb2FkY2FzdENoYW5uZWw6IG51bGwsXG4gICAgZ2V0IGVkaXRvck9yaWdpbigpIHtcbiAgICAgICAgcmV0dXJuIGlmcmFtZVNldHRpbmdzLmVkaXRvck9yaWdpbjtcbiAgICB9LFxuICAgIHRva2VuczogbnVsbCxcbn07XG5jb25zdCBhdXRoRmFpbGVkTGlzdGVuZXJzID0gbmV3IFR5cGVkRXZlbnRUYXJnZXQoKTtcbmNvbnN0IGxvZ2dlZE91dExpc3RlbmVycyA9IG5ldyBUeXBlZEV2ZW50VGFyZ2V0KCk7XG5mdW5jdGlvbiBicm9hZGNhc3RNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZiAoIWF1dGhTdGF0ZS5icm9hZGNhc3RDaGFubmVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXV0aFN0YXRlLmJyb2FkY2FzdENoYW5uZWwucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgLy8gY2hlY2sgaWYgd2UgYXJlIGluIGEgcG9wdXAgbW9kZVxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX1BPUFVQX05BTUUpID09PSAndHJ1ZScgJiYgbWVzc2FnZS50eXBlICE9PSAnYXV0aC1sb2dvdXQnKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfUE9QVVBfTkFNRSk7XG4gICAgICAgIC8vIHdhaXQgYSB0aWNrIHRvIG1ha2Ugc3VyZSB0aGUgcG9zdGVkIG1lc3NhZ2UgaGFzIGJlZW4gc2VudFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgYXV0aCA9IHtcbiAgICBpbml0KHsgZWRpdG9yT3JpZ2luLCBjbGllbnRJZCwgc2NvcGUgfSkge1xuICAgICAgICBpZiAoYXV0aFN0YXRlLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luaXQgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZW50ZXJwcmlzZSA9IHRydWU7XG4gICAgICAgIGlmIChlbnRlcnByaXNlICYmIGF1dGhTdGF0ZS5ib290Q2FsbGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BhdXRoLmluaXRgIHNob3VsZCBhbHdheXMgYmUgY2FsbGVkIGJlZm9yZSBgV2ViQ29udGFpbmVyLmJvb3RgJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXV0aFN0YXRlLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgYXV0aFN0YXRlLnRva2VucyA9IFRva2Vucy5mcm9tU3RvcmFnZSgpO1xuICAgICAgICBhdXRoU3RhdGUuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICAgICAgYXV0aFN0YXRlLm9hdXRoU2NvcGUgPSBzY29wZTtcbiAgICAgICAgYXV0aFN0YXRlLmJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChCUk9BRENBU1RfQ0hBTk5FTF9OQU1FKTtcbiAgICAgICAgLy8gY29uZmlndXJlIGlmcmFtZSB1cmxcbiAgICAgICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnY2xpZW50X2lkJywgY2xpZW50SWQpO1xuICAgICAgICBpZiAoZWRpdG9yT3JpZ2luKSB7XG4gICAgICAgICAgICBpZnJhbWVTZXR0aW5ncy5lZGl0b3JPcmlnaW4gPSBuZXcgVVJMKGVkaXRvck9yaWdpbikub3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZE91dExpc3RlbmVycy5saXN0ZW4oKCkgPT4gYXV0aFN0YXRlLmF1dGhDb21wbGV0ZS5yZXNldCgpKTtcbiAgICAgICAgLy8gaWYgYXV0aGVudGljYXRpb24gb3IgbG9nb3V0IGFyZSBkb25lIGluIGFub3RoZXIgcGFnZSwgd2Ugd2FudCB0byByZWZsZWN0IHRoZSBzdGF0ZSBvbiB0aGlzIHBhZ2UgYXMgd2VsbFxuICAgICAgICBhdXRoU3RhdGUuYnJvYWRjYXN0Q2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25DaGFubmVsTWVzc2FnZSk7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9uQ2hhbm5lbE1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVkRXZlbnQgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgaWYgKHR5cGVkRXZlbnQudHlwZSA9PT0gJ2F1dGgtY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgICAgYXV0aFN0YXRlLnRva2VucyA9IFRva2Vucy5mcm9tU3RvcmFnZSgpO1xuICAgICAgICAgICAgICAgIC8vIHdlIGlnbm9yZSB0aGUgcG9zc2libGUgZXJyb3IgaGVyZSBiZWNhdXNlIHRoZXkgY2FuJ3QgaGF2ZSBleHBpcmVkIGp1c3QgeWV0XG4gICAgICAgICAgICAgICAgYXdhaXQgYXV0aFN0YXRlLnRva2Vucy5hY3RpdmF0ZShvbkZhaWxlZFRva2VuUmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgYXV0aFN0YXRlLmF1dGhDb21wbGV0ZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVkRXZlbnQudHlwZSA9PT0gJ2F1dGgtZmFpbGVkJykge1xuICAgICAgICAgICAgICAgIGF1dGhGYWlsZWRMaXN0ZW5lcnMuZmlyZUV2ZW50KHR5cGVkRXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlZEV2ZW50LnR5cGUgPT09ICdhdXRoLWxvZ291dCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZWRPdXRMaXN0ZW5lcnMuZmlyZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRoU3RhdGUudG9rZW5zKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbnMgPSBhdXRoU3RhdGUudG9rZW5zO1xuICAgICAgICAgICAgaWYgKHRva2Vucy5vcmlnaW4gPT09IGF1dGhTdGF0ZS5lZGl0b3JPcmlnaW4pIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBIZXJlIHdlIGFzc3VtZSB0aGF0IHRoZSByZWZyZXNoIHRva2VuIG5ldmVyIGV4cGlyZXMgd2hpY2hcbiAgICAgICAgICAgICAgICAgKiBtaWdodCBub3QgYmUgY29ycmVjdC4gSWYgdGhhdCBpcyB0aGUgY2FzZSB0aG91Z2gsIHdlIHdpbGxcbiAgICAgICAgICAgICAgICAgKiBlbWl0IGEgJ2xvZ2dlZC1vdXQnIGV2ZW50IHRvIHNpZ25hbCB0aGF0IHRoZSB1c2VyIGhhcyBiZWVuXG4gICAgICAgICAgICAgICAgICogbG9nZ2VkIG91dCwgd2hpY2ggY291bGQgYWxzbyBoYXBwZW4gYXQgYSBsYXRlciB0aW1lIGFueXdheS5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEJlY2F1c2UgdGhpcyBmbG93IGlzIGRvbmUgZW50aXJlbHkgbG9jYWxseSwgd2UgZG8gbm90IGJyb2FkY2FzdFxuICAgICAgICAgICAgICAgICAqIGFueXRoaW5nIHRvIHRoZSBvdGhlciB0YWJzLiBUaGV5IHNob3VsZCBiZSBwZXJmb3JtaW5nIGEgc2ltaWxhclxuICAgICAgICAgICAgICAgICAqIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0b2tlbnMuYWN0aXZhdGUob25GYWlsZWRUb2tlblJlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGdvdCBuZXcgdG9rZW4gaW4gdGhlIG1lYW50aW1lIHdlIGRpc2NhcmQgdGhpcyBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhTdGF0ZS50b2tlbnMgIT09IHRva2Vucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlZE91dExpc3RlbmVycy5maXJlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdXRoU3RhdGUuYXV0aENvbXBsZXRlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogJ2F1dGhvcml6ZWQnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhclRva2Vuc0luU3RvcmFnZSgpO1xuICAgICAgICAgICAgYXV0aFN0YXRlLnRva2VucyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25VUkwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IGxvY2F0aW9uVVJMO1xuICAgICAgICBjb25zdCB1cGRhdGVVUkwgPSAoKSA9PiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCBsb2NhdGlvblVSTCk7XG4gICAgICAgIC8vIGNoZWNrIGZvciBlcnJvcnMgZmlyc3QsIGFrYSB0aGUgdXNlciBkZWNsaW5lZCB0aGUgYXV0aG9yaXNhdGlvbiBvciBzdGFja2JsaXR6IGRpZFxuICAgICAgICBpZiAoc2VhcmNoUGFyYW1zLmhhcyhTRUFSQ0hfUEFSQU1fRVJST1IpKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHNlYXJjaFBhcmFtcy5nZXQoU0VBUkNIX1BBUkFNX0VSUk9SKTtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2VhcmNoUGFyYW1zLmdldChTRUFSQ0hfUEFSQU1fRVJST1JfREVTQ1JJUFRJT04pO1xuICAgICAgICAgICAgc2VhcmNoUGFyYW1zLmRlbGV0ZShTRUFSQ0hfUEFSQU1fRVJST1IpO1xuICAgICAgICAgICAgc2VhcmNoUGFyYW1zLmRlbGV0ZShTRUFSQ0hfUEFSQU1fRVJST1JfREVTQ1JJUFRJT04pO1xuICAgICAgICAgICAgdXBkYXRlVVJMKCk7XG4gICAgICAgICAgICBicm9hZGNhc3RNZXNzYWdlKHsgdHlwZTogJ2F1dGgtZmFpbGVkJywgZXJyb3IsIGRlc2NyaXB0aW9uIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnYXV0aC1mYWlsZWQnLCBlcnJvciwgZGVzY3JpcHRpb24gfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGVyZSdzIGFuIGF1dGggY29kZVxuICAgICAgICBpZiAoc2VhcmNoUGFyYW1zLmhhcyhTRUFSQ0hfUEFSQU1fQVVUSF9DT0RFKSkge1xuICAgICAgICAgICAgY29uc3QgYXV0aENvZGUgPSBzZWFyY2hQYXJhbXMuZ2V0KFNFQVJDSF9QQVJBTV9BVVRIX0NPREUpO1xuICAgICAgICAgICAgY29uc3QgZWRpdG9yT3JpZ2luID0gYXV0aFN0YXRlLmVkaXRvck9yaWdpbjtcbiAgICAgICAgICAgIHNlYXJjaFBhcmFtcy5kZWxldGUoU0VBUkNIX1BBUkFNX0FVVEhfQ09ERSk7XG4gICAgICAgICAgICB1cGRhdGVVUkwoKTtcbiAgICAgICAgICAgIGNvbnN0IGNvZGVWZXJpZmllciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfQ09ERV9WRVJJRklFUl9OQU1FKTtcbiAgICAgICAgICAgIGlmICghY29kZVZlcmlmaWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbmVlZC1hdXRoJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9DT0RFX1ZFUklGSUVSX05BTUUpO1xuICAgICAgICAgICAgVG9rZW5zLmZyb21BdXRoQ29kZSh7XG4gICAgICAgICAgICAgICAgZWRpdG9yT3JpZ2luLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBhdXRoU3RhdGUuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgYXV0aENvZGUsXG4gICAgICAgICAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VXJpOiBkZWZhdWx0UmVkaXJlY3RVcmkoKSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHRva2VucykgPT4ge1xuICAgICAgICAgICAgICAgIGF1dGhTdGF0ZS50b2tlbnMgPSB0b2tlbnM7XG4gICAgICAgICAgICAgICAgYXNzZXJ0QXV0aFRva2VucyhhdXRoU3RhdGUudG9rZW5zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgYXV0aFN0YXRlLnRva2Vucy5hY3RpdmF0ZShvbkZhaWxlZFRva2VuUmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgYXV0aGVudGljYXRpb24gZmFpbGVkIHdlIHRocm93LCBhbmQgd2UnbGwgbWFyayBhdXRoIGFzIGZhaWxlZFxuICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXV0aFN0YXRlLmF1dGhDb21wbGV0ZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0TWVzc2FnZSh7IHR5cGU6ICdhdXRoLWNvbXBsZXRlJyB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiB1bmxlc3MgdGhlIHJhaWxzIGFwcCBpcyBub3cgZG93biBmb3Igc29tZSByZWFzb24/XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gdHJlYXQgaXQgYXMgYSBsb2dnZWQgb3V0IGV2ZW50IHNvIHRoYXQgdGhlIHVzZXIgY2FuIHJldHJ5IHRvIGxvZ2luXG4gICAgICAgICAgICAgICAgbG9nZ2VkT3V0TGlzdGVuZXJzLmZpcmVFdmVudCgpO1xuICAgICAgICAgICAgICAgIGJyb2FkY2FzdE1lc3NhZ2UoeyB0eXBlOiAnYXV0aC1sb2dvdXQnIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6ICdhdXRob3JpemVkJyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogJ25lZWQtYXV0aCcgfTtcbiAgICB9LFxuICAgIGFzeW5jIHN0YXJ0QXV0aEZsb3coeyBwb3B1cCB9ID0ge30pIHtcbiAgICAgICAgaWYgKCFhdXRoU3RhdGUuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYXV0aC5pbml0IG11c3QgYmUgY2FsbGVkIGZpcnN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcHVwKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX1BPUFVQX05BTUUsICd0cnVlJyk7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSA1MDA7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IDYyMDtcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSB3aW5kb3cuc2NyZWVuTGVmdCArICh3aW5kb3cub3V0ZXJXaWR0aCAtIHdpZHRoKSAvIDI7XG4gICAgICAgICAgICBjb25zdCB0b3AgPSB3aW5kb3cuc2NyZWVuVG9wICsgKHdpbmRvdy5vdXRlckhlaWdodCAtIGhlaWdodCkgLyAyO1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oYXdhaXQgZ2VuZXJhdGVPQXV0aFJlcXVlc3QoKSwgJ19ibGFuaycsIGBwb3B1cCx3aWR0aD0ke3dpZHRofSxoZWlnaHQ9JHtoZWlnaHR9LGxlZnQ9JHtsZWZ0fSx0b3A9JHt0b3B9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGF3YWl0IGdlbmVyYXRlT0F1dGhSZXF1ZXN0KCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIGxvZ291dCh7IGlnbm9yZVJldm9rZUVycm9yIH0gPSB7fSkge1xuICAgICAgICBhd2FpdCBhdXRoU3RhdGUudG9rZW5zPy5yZXZva2UoYXV0aFN0YXRlLmNsaWVudElkLCBpZ25vcmVSZXZva2VFcnJvciA/PyBmYWxzZSk7XG4gICAgICAgIGxvZ2dlZE91dExpc3RlbmVycy5maXJlRXZlbnQoKTtcbiAgICAgICAgYnJvYWRjYXN0TWVzc2FnZSh7IHR5cGU6ICdhdXRoLWxvZ291dCcgfSk7XG4gICAgfSxcbiAgICBsb2dnZWRJbigpIHtcbiAgICAgICAgcmV0dXJuIGF1dGhTdGF0ZS5hdXRoQ29tcGxldGUucHJvbWlzZTtcbiAgICB9LFxuICAgIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50KSB7XG4gICAgICAgICAgICBjYXNlICdhdXRoLWZhaWxlZCc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aEZhaWxlZExpc3RlbmVycy5saXN0ZW4obGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnbG9nZ2VkLW91dCc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VkT3V0TGlzdGVuZXJzLmxpc3RlbihsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBldmVudCB0eXBlICcke2V2ZW50fScuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxufTtcbmZ1bmN0aW9uIG9uRmFpbGVkVG9rZW5SZWZyZXNoKCkge1xuICAgIGxvZ2dlZE91dExpc3RlbmVycy5maXJlRXZlbnQoKTtcbiAgICBicm9hZGNhc3RNZXNzYWdlKHsgdHlwZTogJ2F1dGgtbG9nb3V0JyB9KTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRSZWRpcmVjdFVyaSgpIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7XG59XG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZU9BdXRoUmVxdWVzdCgpIHtcbiAgICBjb25zdCBjb2RlVmVyaWZpZXIgPSBuZXdDb2RlVmVyaWZpZXIoKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0NPREVfVkVSSUZJRVJfTkFNRSwgY29kZVZlcmlmaWVyKTtcbiAgICBjb25zdCBjb2RlQ2hhbGxlbmdlID0gYXdhaXQgUzI1Nihjb2RlVmVyaWZpZXIpO1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJy9vYXV0aC9hdXRob3JpemUnLCBhdXRoU3RhdGUuZWRpdG9yT3JpZ2luKTtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gdXJsO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3Jlc3BvbnNlX3R5cGUnLCAnY29kZScpO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIGF1dGhTdGF0ZS5jbGllbnRJZCk7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgncmVkaXJlY3RfdXJpJywgZGVmYXVsdFJlZGlyZWN0VXJpKCkpO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3Njb3BlJywgYXV0aFN0YXRlLm9hdXRoU2NvcGUpO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ2NvZGVfY2hhbGxlbmdlJywgY29kZUNoYWxsZW5nZSk7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgnY29kZV9jaGFsbGVuZ2VfbWV0aG9kJywgJ1MyNTYnKTtcbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0QXV0aFRva2Vucyh0b2tlbnMpIHtcbiAgICBpZiAoIXRva2Vucykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09vcHMhIFRva2VucyBpcyBub3QgZGVmaW5lZCB3aGVuIGl0IGFsd2F5cyBzaG91bGQgYmUuJyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlRva2VucyIsImNsZWFyVG9rZW5zSW5TdG9yYWdlIiwiU0VBUkNIX1BBUkFNX0FVVEhfQ09ERSIsIlNFQVJDSF9QQVJBTV9FUlJPUiIsIlNUT1JBR0VfQ09ERV9WRVJJRklFUl9OQU1FIiwiQlJPQURDQVNUX0NIQU5ORUxfTkFNRSIsIlNUT1JBR0VfUE9QVVBfTkFNRSIsIlNFQVJDSF9QQVJBTV9FUlJPUl9ERVNDUklQVElPTiIsImlmcmFtZVNldHRpbmdzIiwiUzI1NiIsIm5ld0NvZGVWZXJpZmllciIsInJlc2V0dGFibGVQcm9taXNlIiwiVHlwZWRFdmVudFRhcmdldCIsImF1dGhTdGF0ZSIsImluaXRpYWxpemVkIiwiYm9vdENhbGxlZCIsImF1dGhDb21wbGV0ZSIsImNsaWVudElkIiwib2F1dGhTY29wZSIsImJyb2FkY2FzdENoYW5uZWwiLCJlZGl0b3JPcmlnaW4iLCJ0b2tlbnMiLCJhdXRoRmFpbGVkTGlzdGVuZXJzIiwibG9nZ2VkT3V0TGlzdGVuZXJzIiwiYnJvYWRjYXN0TWVzc2FnZSIsIm1lc3NhZ2UiLCJwb3N0TWVzc2FnZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ0eXBlIiwicmVtb3ZlSXRlbSIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJjbG9zZSIsImF1dGgiLCJpbml0Iiwic2NvcGUiLCJFcnJvciIsImVudGVycHJpc2UiLCJmcm9tU3RvcmFnZSIsIkJyb2FkY2FzdENoYW5uZWwiLCJzZXRRdWVyeVBhcmFtIiwiVVJMIiwib3JpZ2luIiwibGlzdGVuIiwicmVzZXQiLCJhZGRFdmVudExpc3RlbmVyIiwib25DaGFubmVsTWVzc2FnZSIsImV2ZW50IiwidHlwZWRFdmVudCIsImRhdGEiLCJhY3RpdmF0ZSIsIm9uRmFpbGVkVG9rZW5SZWZyZXNoIiwicmVzb2x2ZSIsImZpcmVFdmVudCIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJsb2NhdGlvblVSTCIsImxvY2F0aW9uIiwiaHJlZiIsInNlYXJjaFBhcmFtcyIsInVwZGF0ZVVSTCIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJkb2N1bWVudCIsInRpdGxlIiwiaGFzIiwiZXJyb3IiLCJnZXQiLCJkZXNjcmlwdGlvbiIsImRlbGV0ZSIsImF1dGhDb2RlIiwiY29kZVZlcmlmaWVyIiwiZnJvbUF1dGhDb2RlIiwicmVkaXJlY3RVcmkiLCJkZWZhdWx0UmVkaXJlY3RVcmkiLCJ0aGVuIiwiYXNzZXJ0QXV0aFRva2VucyIsImNhdGNoIiwiY29uc29sZSIsInN0YXJ0QXV0aEZsb3ciLCJwb3B1cCIsInNldEl0ZW0iLCJoZWlnaHQiLCJ3aWR0aCIsImxlZnQiLCJzY3JlZW5MZWZ0Iiwib3V0ZXJXaWR0aCIsInRvcCIsInNjcmVlblRvcCIsIm91dGVySGVpZ2h0Iiwib3BlbiIsImdlbmVyYXRlT0F1dGhSZXF1ZXN0IiwibG9nb3V0IiwiaWdub3JlUmV2b2tlRXJyb3IiLCJyZXZva2UiLCJsb2dnZWRJbiIsInByb21pc2UiLCJvbiIsImxpc3RlbmVyIiwiY29kZUNoYWxsZW5nZSIsInVybCIsImFwcGVuZCIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js":
/*!**************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/code.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S256: () => (/* binding */ S256),\n/* harmony export */   newCodeVerifier: () => (/* binding */ newCodeVerifier)\n/* harmony export */ });\n/**\n * Implementation of https://www.rfc-editor.org/rfc/rfc7636#section-4.2 that can\n * run in the browser.\n *\n * @internal\n *\n * @param input Code verifier.\n */ async function S256(input) {\n    // input here is assumed to match https://www.rfc-editor.org/rfc/rfc3986#section-2.3\n    const ascii = new TextEncoder().encode(input);\n    const sha256 = new Uint8Array(await crypto.subtle.digest(\"SHA-256\", ascii));\n    // base64url encode, based on https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\n    return btoa(sha256.reduce((binary, byte)=>binary + String.fromCodePoint(byte), \"\")).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n}\n/**\n * Implementation of https://www.rfc-editor.org/rfc/rfc7636#section-4.1 with\n * a slight deviation:\n *\n *  - We use 128 characters (it's expected to be between 43 and 128)\n *  - We use 64 characters instead of 66\n *\n * So the entropy is lower given the space size is 64^128 instead of 66^128.\n * It still satisfies the entropy constraint given that 64^128 > 66^43.\n *\n * @internal\n */ function newCodeVerifier() {\n    const random = new Uint8Array(96);\n    crypto.getRandomValues(random);\n    let codeVerifier = \"\";\n    for(let i = 0; i < 32; ++i){\n        codeVerifier += nextFourChars(random[3 * i + 0], random[3 * i + 1], random[3 * i + 2]);\n    }\n    return codeVerifier;\n}\nfunction nextFourChars(byte1, byte2, byte3) {\n    const char1 = byte1 >> 2;\n    const char2 = (byte1 & 3) << 4 | byte2 >> 4;\n    const char3 = byte2 & 15 | (byte3 & 192) >> 2;\n    const char4 = byte3 & 63;\n    return [\n        char1,\n        char2,\n        char3,\n        char4\n    ].map(unreservedCharacters).join(\"\");\n}\nfunction unreservedCharacters(code) {\n    let offset;\n    if (code < 26) {\n        offset = code + 65; // [A-Z]\n    } else if (code < 52) {\n        offset = code - 26 + 97; // [a-z]\n    } else if (code < 62) {\n        offset = code - 52 + 48; // [0-9]\n    } else {\n        offset = code === 62 ? 30 /* _ */  : 45 /* - */ ;\n    }\n    return String.fromCharCode(offset);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7Ozs7Ozs7Q0FPQyxHQUNNLGVBQWVBLEtBQUtDLEtBQUs7SUFDNUIsb0ZBQW9GO0lBQ3BGLE1BQU1DLFFBQVEsSUFBSUMsY0FBY0MsTUFBTSxDQUFDSDtJQUN2QyxNQUFNSSxTQUFTLElBQUlDLFdBQVcsTUFBTUMsT0FBT0MsTUFBTSxDQUFDQyxNQUFNLENBQUMsV0FBV1A7SUFDcEUsMEdBQTBHO0lBQzFHLE9BQU9RLEtBQUtMLE9BQU9NLE1BQU0sQ0FBQyxDQUFDQyxRQUFRQyxPQUFTRCxTQUFTRSxPQUFPQyxhQUFhLENBQUNGLE9BQU8sS0FDNUVHLE9BQU8sQ0FBQyxPQUFPLEtBQ2ZBLE9BQU8sQ0FBQyxPQUFPLEtBQ2ZBLE9BQU8sQ0FBQyxPQUFPO0FBQ3hCO0FBQ0E7Ozs7Ozs7Ozs7O0NBV0MsR0FDTSxTQUFTQztJQUNaLE1BQU1DLFNBQVMsSUFBSVosV0FBVztJQUM5QkMsT0FBT1ksZUFBZSxDQUFDRDtJQUN2QixJQUFJRSxlQUFlO0lBQ25CLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJLElBQUksRUFBRUEsRUFBRztRQUN6QkQsZ0JBQWdCRSxjQUFjSixNQUFNLENBQUMsSUFBSUcsSUFBSSxFQUFFLEVBQUVILE1BQU0sQ0FBQyxJQUFJRyxJQUFJLEVBQUUsRUFBRUgsTUFBTSxDQUFDLElBQUlHLElBQUksRUFBRTtJQUN6RjtJQUNBLE9BQU9EO0FBQ1g7QUFDQSxTQUFTRSxjQUFjQyxLQUFLLEVBQUVDLEtBQUssRUFBRUMsS0FBSztJQUN0QyxNQUFNQyxRQUFRSCxTQUFTO0lBQ3ZCLE1BQU1JLFFBQVEsQ0FBRUosUUFBUSxNQUFNLElBQU1DLFNBQVM7SUFDN0MsTUFBTUksUUFBUSxRQUFTLEtBQU8sQ0FBQ0gsUUFBUSxHQUFFLEtBQU07SUFDL0MsTUFBTUksUUFBUUosUUFBUTtJQUN0QixPQUFPO1FBQUNDO1FBQU9DO1FBQU9DO1FBQU9DO0tBQU0sQ0FBQ0MsR0FBRyxDQUFDQyxzQkFBc0JDLElBQUksQ0FBQztBQUN2RTtBQUNBLFNBQVNELHFCQUFxQkUsSUFBSTtJQUM5QixJQUFJQztJQUNKLElBQUlELE9BQU8sSUFBSTtRQUNYQyxTQUFTRCxPQUFPLElBQUksUUFBUTtJQUNoQyxPQUNLLElBQUlBLE9BQU8sSUFBSTtRQUNoQkMsU0FBU0QsT0FBTyxLQUFLLElBQUksUUFBUTtJQUNyQyxPQUNLLElBQUlBLE9BQU8sSUFBSTtRQUNoQkMsU0FBU0QsT0FBTyxLQUFLLElBQUksUUFBUTtJQUNyQyxPQUNLO1FBQ0RDLFNBQVNELFNBQVMsS0FBSyxHQUFHLEtBQUssTUFBSyxHQUFHLEtBQUs7SUFDaEQ7SUFDQSxPQUFPbkIsT0FBT3FCLFlBQVksQ0FBQ0Q7QUFDL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1vcy1tdnAvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb2RlLmpzPzNjMDAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzYzNiNzZWN0aW9uLTQuMiB0aGF0IGNhblxuICogcnVuIGluIHRoZSBicm93c2VyLlxuICpcbiAqIEBpbnRlcm5hbFxuICpcbiAqIEBwYXJhbSBpbnB1dCBDb2RlIHZlcmlmaWVyLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUzI1NihpbnB1dCkge1xuICAgIC8vIGlucHV0IGhlcmUgaXMgYXNzdW1lZCB0byBtYXRjaCBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjMzk4NiNzZWN0aW9uLTIuM1xuICAgIGNvbnN0IGFzY2lpID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlucHV0KTtcbiAgICBjb25zdCBzaGEyNTYgPSBuZXcgVWludDhBcnJheShhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGFzY2lpKSk7XG4gICAgLy8gYmFzZTY0dXJsIGVuY29kZSwgYmFzZWQgb24gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9HbG9zc2FyeS9CYXNlNjQjdGhlX3VuaWNvZGVfcHJvYmxlbVxuICAgIHJldHVybiBidG9hKHNoYTI1Ni5yZWR1Y2UoKGJpbmFyeSwgYnl0ZSkgPT4gYmluYXJ5ICsgU3RyaW5nLmZyb21Db2RlUG9pbnQoYnl0ZSksICcnKSlcbiAgICAgICAgLnJlcGxhY2UoL1xcKy9nLCAnLScpXG4gICAgICAgIC5yZXBsYWNlKC9cXC8vZywgJ18nKVxuICAgICAgICAucmVwbGFjZSgvPSskLywgJycpO1xufVxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzYzNiNzZWN0aW9uLTQuMSB3aXRoXG4gKiBhIHNsaWdodCBkZXZpYXRpb246XG4gKlxuICogIC0gV2UgdXNlIDEyOCBjaGFyYWN0ZXJzIChpdCdzIGV4cGVjdGVkIHRvIGJlIGJldHdlZW4gNDMgYW5kIDEyOClcbiAqICAtIFdlIHVzZSA2NCBjaGFyYWN0ZXJzIGluc3RlYWQgb2YgNjZcbiAqXG4gKiBTbyB0aGUgZW50cm9weSBpcyBsb3dlciBnaXZlbiB0aGUgc3BhY2Ugc2l6ZSBpcyA2NF4xMjggaW5zdGVhZCBvZiA2Nl4xMjguXG4gKiBJdCBzdGlsbCBzYXRpc2ZpZXMgdGhlIGVudHJvcHkgY29uc3RyYWludCBnaXZlbiB0aGF0IDY0XjEyOCA+IDY2XjQzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbmV3Q29kZVZlcmlmaWVyKCkge1xuICAgIGNvbnN0IHJhbmRvbSA9IG5ldyBVaW50OEFycmF5KDk2KTtcbiAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHJhbmRvbSk7XG4gICAgbGV0IGNvZGVWZXJpZmllciA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7ICsraSkge1xuICAgICAgICBjb2RlVmVyaWZpZXIgKz0gbmV4dEZvdXJDaGFycyhyYW5kb21bMyAqIGkgKyAwXSwgcmFuZG9tWzMgKiBpICsgMV0sIHJhbmRvbVszICogaSArIDJdKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGVWZXJpZmllcjtcbn1cbmZ1bmN0aW9uIG5leHRGb3VyQ2hhcnMoYnl0ZTEsIGJ5dGUyLCBieXRlMykge1xuICAgIGNvbnN0IGNoYXIxID0gYnl0ZTEgPj4gMjtcbiAgICBjb25zdCBjaGFyMiA9ICgoYnl0ZTEgJiAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcbiAgICBjb25zdCBjaGFyMyA9IChieXRlMiAmIDE1KSB8ICgoYnl0ZTMgJiAxOTIpID4+IDIpO1xuICAgIGNvbnN0IGNoYXI0ID0gYnl0ZTMgJiA2MztcbiAgICByZXR1cm4gW2NoYXIxLCBjaGFyMiwgY2hhcjMsIGNoYXI0XS5tYXAodW5yZXNlcnZlZENoYXJhY3RlcnMpLmpvaW4oJycpO1xufVxuZnVuY3Rpb24gdW5yZXNlcnZlZENoYXJhY3RlcnMoY29kZSkge1xuICAgIGxldCBvZmZzZXQ7XG4gICAgaWYgKGNvZGUgPCAyNikge1xuICAgICAgICBvZmZzZXQgPSBjb2RlICsgNjU7IC8vIFtBLVpdXG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPCA1Mikge1xuICAgICAgICBvZmZzZXQgPSBjb2RlIC0gMjYgKyA5NzsgLy8gW2Etel1cbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZSA8IDYyKSB7XG4gICAgICAgIG9mZnNldCA9IGNvZGUgLSA1MiArIDQ4OyAvLyBbMC05XVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb2Zmc2V0ID0gY29kZSA9PT0gNjIgPyAzMCAvKiBfICovIDogNDUgLyogLSAqLztcbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUob2Zmc2V0KTtcbn1cbiJdLCJuYW1lcyI6WyJTMjU2IiwiaW5wdXQiLCJhc2NpaSIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwic2hhMjU2IiwiVWludDhBcnJheSIsImNyeXB0byIsInN1YnRsZSIsImRpZ2VzdCIsImJ0b2EiLCJyZWR1Y2UiLCJiaW5hcnkiLCJieXRlIiwiU3RyaW5nIiwiZnJvbUNvZGVQb2ludCIsInJlcGxhY2UiLCJuZXdDb2RlVmVyaWZpZXIiLCJyYW5kb20iLCJnZXRSYW5kb21WYWx1ZXMiLCJjb2RlVmVyaWZpZXIiLCJpIiwibmV4dEZvdXJDaGFycyIsImJ5dGUxIiwiYnl0ZTIiLCJieXRlMyIsImNoYXIxIiwiY2hhcjIiLCJjaGFyMyIsImNoYXI0IiwibWFwIiwidW5yZXNlcnZlZENoYXJhY3RlcnMiLCJqb2luIiwiY29kZSIsIm9mZnNldCIsImZyb21DaGFyQ29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/constants.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BROADCAST_CHANNEL_NAME: () => (/* binding */ BROADCAST_CHANNEL_NAME),\n/* harmony export */   DEFAULT_EDITOR_ORIGIN: () => (/* binding */ DEFAULT_EDITOR_ORIGIN),\n/* harmony export */   SEARCH_PARAM_AUTH_CODE: () => (/* binding */ SEARCH_PARAM_AUTH_CODE),\n/* harmony export */   SEARCH_PARAM_ERROR: () => (/* binding */ SEARCH_PARAM_ERROR),\n/* harmony export */   SEARCH_PARAM_ERROR_DESCRIPTION: () => (/* binding */ SEARCH_PARAM_ERROR_DESCRIPTION),\n/* harmony export */   STORAGE_CODE_VERIFIER_NAME: () => (/* binding */ STORAGE_CODE_VERIFIER_NAME),\n/* harmony export */   STORAGE_POPUP_NAME: () => (/* binding */ STORAGE_POPUP_NAME),\n/* harmony export */   STORAGE_TOKENS_NAME: () => (/* binding */ STORAGE_TOKENS_NAME)\n/* harmony export */ });\nconst DEFAULT_EDITOR_ORIGIN = \"https://stackblitz.com\";\nconst SEARCH_PARAM_AUTH_CODE = \"code\";\nconst SEARCH_PARAM_ERROR = \"error\";\nconst SEARCH_PARAM_ERROR_DESCRIPTION = \"error_description\";\nconst BROADCAST_CHANNEL_NAME = \"__wc_api_bc__\";\nconst STORAGE_TOKENS_NAME = \"__wc_api_tokens__\";\nconst STORAGE_CODE_VERIFIER_NAME = \"__wc_api_verifier__\";\nconst STORAGE_POPUP_NAME = \"__wc_api_popup__\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBTyxNQUFNQSx3QkFBd0IseUJBQXlCO0FBQ3ZELE1BQU1DLHlCQUF5QixPQUFPO0FBQ3RDLE1BQU1DLHFCQUFxQixRQUFRO0FBQ25DLE1BQU1DLGlDQUFpQyxvQkFBb0I7QUFDM0QsTUFBTUMseUJBQXlCLGdCQUFnQjtBQUMvQyxNQUFNQyxzQkFBc0Isb0JBQW9CO0FBQ2hELE1BQU1DLDZCQUE2QixzQkFBc0I7QUFDekQsTUFBTUMscUJBQXFCLG1CQUFtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW9zLW12cC8uL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L2ludGVybmFsL2NvbnN0YW50cy5qcz85ZmM1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBERUZBVUxUX0VESVRPUl9PUklHSU4gPSAnaHR0cHM6Ly9zdGFja2JsaXR6LmNvbSc7XG5leHBvcnQgY29uc3QgU0VBUkNIX1BBUkFNX0FVVEhfQ09ERSA9ICdjb2RlJztcbmV4cG9ydCBjb25zdCBTRUFSQ0hfUEFSQU1fRVJST1IgPSAnZXJyb3InO1xuZXhwb3J0IGNvbnN0IFNFQVJDSF9QQVJBTV9FUlJPUl9ERVNDUklQVElPTiA9ICdlcnJvcl9kZXNjcmlwdGlvbic7XG5leHBvcnQgY29uc3QgQlJPQURDQVNUX0NIQU5ORUxfTkFNRSA9ICdfX3djX2FwaV9iY19fJztcbmV4cG9ydCBjb25zdCBTVE9SQUdFX1RPS0VOU19OQU1FID0gJ19fd2NfYXBpX3Rva2Vuc19fJztcbmV4cG9ydCBjb25zdCBTVE9SQUdFX0NPREVfVkVSSUZJRVJfTkFNRSA9ICdfX3djX2FwaV92ZXJpZmllcl9fJztcbmV4cG9ydCBjb25zdCBTVE9SQUdFX1BPUFVQX05BTUUgPSAnX193Y19hcGlfcG9wdXBfXyc7XG4iXSwibmFtZXMiOlsiREVGQVVMVF9FRElUT1JfT1JJR0lOIiwiU0VBUkNIX1BBUkFNX0FVVEhfQ09ERSIsIlNFQVJDSF9QQVJBTV9FUlJPUiIsIlNFQVJDSF9QQVJBTV9FUlJPUl9ERVNDUklQVElPTiIsIkJST0FEQ0FTVF9DSEFOTkVMX05BTUUiLCJTVE9SQUdFX1RPS0VOU19OQU1FIiwiU1RPUkFHRV9DT0RFX1ZFUklGSUVSX05BTUUiLCJTVE9SQUdFX1BPUFVQX05BTUUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js":
/*!********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/iframe-url.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   iframeSettings: () => (/* binding */ iframeSettings)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n\nconst params = {};\nlet editorOrigin = null;\nconst iframeSettings = {\n    get editorOrigin () {\n        if (editorOrigin == null) {\n            editorOrigin = new URL(globalThis.WEBCONTAINER_API_IFRAME_URL ?? _constants_js__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_EDITOR_ORIGIN).origin;\n        }\n        return editorOrigin;\n    },\n    set editorOrigin (newOrigin){\n        editorOrigin = new URL(newOrigin).origin;\n    },\n    setQueryParam (key, value) {\n        params[key] = value;\n    },\n    get url () {\n        const url = new URL(this.editorOrigin);\n        url.pathname = \"/headless\";\n        for(const param in params){\n            url.searchParams.set(param, params[param]);\n        }\n        url.searchParams.set(\"version\", \"1.6.1\");\n        return url;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9pZnJhbWUtdXJsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVEO0FBQ3ZELE1BQU1DLFNBQVMsQ0FBQztBQUNoQixJQUFJQyxlQUFlO0FBQ1osTUFBTUMsaUJBQWlCO0lBQzFCLElBQUlELGdCQUFlO1FBQ2YsSUFBSUEsZ0JBQWdCLE1BQU07WUFDdEJBLGVBQWUsSUFBSUUsSUFBSUMsV0FBV0MsMkJBQTJCLElBQUlOLGdFQUFxQkEsRUFBRU8sTUFBTTtRQUNsRztRQUNBLE9BQU9MO0lBQ1g7SUFDQSxJQUFJQSxjQUFhTSxVQUFXO1FBQ3hCTixlQUFlLElBQUlFLElBQUlJLFdBQVdELE1BQU07SUFDNUM7SUFDQUUsZUFBY0MsR0FBRyxFQUFFQyxLQUFLO1FBQ3BCVixNQUFNLENBQUNTLElBQUksR0FBR0M7SUFDbEI7SUFDQSxJQUFJQyxPQUFNO1FBQ04sTUFBTUEsTUFBTSxJQUFJUixJQUFJLElBQUksQ0FBQ0YsWUFBWTtRQUNyQ1UsSUFBSUMsUUFBUSxHQUFHO1FBQ2YsSUFBSyxNQUFNQyxTQUFTYixPQUFRO1lBQ3hCVyxJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQ0YsT0FBT2IsTUFBTSxDQUFDYSxNQUFNO1FBQzdDO1FBQ0FGLElBQUlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDLFdBQVc7UUFDaEMsT0FBT0o7SUFDWDtBQUNKLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1vcy1tdnAvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9pZnJhbWUtdXJsLmpzP2UwYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgREVGQVVMVF9FRElUT1JfT1JJR0lOIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuY29uc3QgcGFyYW1zID0ge307XG5sZXQgZWRpdG9yT3JpZ2luID0gbnVsbDtcbmV4cG9ydCBjb25zdCBpZnJhbWVTZXR0aW5ncyA9IHtcbiAgICBnZXQgZWRpdG9yT3JpZ2luKCkge1xuICAgICAgICBpZiAoZWRpdG9yT3JpZ2luID09IG51bGwpIHtcbiAgICAgICAgICAgIGVkaXRvck9yaWdpbiA9IG5ldyBVUkwoZ2xvYmFsVGhpcy5XRUJDT05UQUlORVJfQVBJX0lGUkFNRV9VUkwgPz8gREVGQVVMVF9FRElUT1JfT1JJR0lOKS5vcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVkaXRvck9yaWdpbjtcbiAgICB9LFxuICAgIHNldCBlZGl0b3JPcmlnaW4obmV3T3JpZ2luKSB7XG4gICAgICAgIGVkaXRvck9yaWdpbiA9IG5ldyBVUkwobmV3T3JpZ2luKS5vcmlnaW47XG4gICAgfSxcbiAgICBzZXRRdWVyeVBhcmFtKGtleSwgdmFsdWUpIHtcbiAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICB9LFxuICAgIGdldCB1cmwoKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGhpcy5lZGl0b3JPcmlnaW4pO1xuICAgICAgICB1cmwucGF0aG5hbWUgPSAnL2hlYWRsZXNzJztcbiAgICAgICAgZm9yIChjb25zdCBwYXJhbSBpbiBwYXJhbXMpIHtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KHBhcmFtLCBwYXJhbXNbcGFyYW1dKTtcbiAgICAgICAgfVxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndmVyc2lvbicsIFwiMS42LjFcIik7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfSxcbn07XG4iXSwibmFtZXMiOlsiREVGQVVMVF9FRElUT1JfT1JJR0lOIiwicGFyYW1zIiwiZWRpdG9yT3JpZ2luIiwiaWZyYW1lU2V0dGluZ3MiLCJVUkwiLCJnbG9iYWxUaGlzIiwiV0VCQ09OVEFJTkVSX0FQSV9JRlJBTUVfVVJMIiwib3JpZ2luIiwibmV3T3JpZ2luIiwic2V0UXVlcnlQYXJhbSIsImtleSIsInZhbHVlIiwidXJsIiwicGF0aG5hbWUiLCJwYXJhbSIsInNlYXJjaFBhcmFtcyIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/reset-promise.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resettablePromise: () => (/* binding */ resettablePromise)\n/* harmony export */ });\n/**\n * @internal\n */ function resettablePromise() {\n    let resolve;\n    let promise;\n    function reset() {\n        promise = new Promise((_resolve)=>resolve = _resolve);\n    }\n    reset();\n    return {\n        get promise () {\n            return promise;\n        },\n        resolve (value) {\n            return resolve(value);\n        },\n        reset\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9yZXNldC1wcm9taXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Q0FFQyxHQUNNLFNBQVNBO0lBQ1osSUFBSUM7SUFDSixJQUFJQztJQUNKLFNBQVNDO1FBQ0xELFVBQVUsSUFBSUUsUUFBUSxDQUFDQyxXQUFjSixVQUFVSTtJQUNuRDtJQUNBRjtJQUNBLE9BQU87UUFDSCxJQUFJRCxXQUFVO1lBQ1YsT0FBT0E7UUFDWDtRQUNBRCxTQUFRSyxLQUFLO1lBQ1QsT0FBT0wsUUFBUUs7UUFDbkI7UUFDQUg7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvcmVzZXQtcHJvbWlzZS5qcz8yYmIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldHRhYmxlUHJvbWlzZSgpIHtcbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChfcmVzb2x2ZSkgPT4gKHJlc29sdmUgPSBfcmVzb2x2ZSkpO1xuICAgIH1cbiAgICByZXNldCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCBwcm9taXNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzZXQsXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6WyJyZXNldHRhYmxlUHJvbWlzZSIsInJlc29sdmUiLCJwcm9taXNlIiwicmVzZXQiLCJQcm9taXNlIiwiX3Jlc29sdmUiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js":
/*!****************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/tokens.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tokens: () => (/* binding */ Tokens),\n/* harmony export */   addAccessTokenChangedListener: () => (/* binding */ addAccessTokenChangedListener),\n/* harmony export */   clearTokensInStorage: () => (/* binding */ clearTokensInStorage)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n/* harmony import */ var _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TypedEventTarget.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\");\n\n\nconst IGNORED_ERROR = new Error();\nIGNORED_ERROR.stack = \"\";\nconst accessTokenChangedListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_1__.TypedEventTarget();\n/**\n * @internal\n */ class Tokens {\n    constructor(// editor origin that those tokens are bound to, mostly used for development\n    origin, // token to use to get a new access token\n    refresh, // token to provide to webcontainer\n    access, // time in UTC when the token expires\n    expires){\n        this._revoked = new AbortController();\n        this.origin = origin;\n        this.refresh = refresh;\n        this.access = access;\n        this.expires = expires;\n    }\n    async activate(onFailedRefresh) {\n        if (this._revoked.signal.aborted) {\n            throw new Error(\"Token revoked\");\n        }\n        // if the access token expired we fetch a new one\n        if (this.expires < Date.now()) {\n            if (!await this._fetchNewAccessToken()) {\n                return false;\n            }\n        }\n        this._sync();\n        this._startRefreshTokensLoop(onFailedRefresh);\n        return true;\n    }\n    async revoke(clientId, ignoreRevokeError) {\n        this._revoked.abort();\n        try {\n            const response = await fetch(`${this.origin}/oauth/revoke`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                },\n                body: new URLSearchParams({\n                    token: this.refresh,\n                    token_type_hint: \"refresh_token\",\n                    client_id: clientId\n                }),\n                mode: \"cors\"\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to logout`);\n            }\n        } catch (error) {\n            if (!ignoreRevokeError) {\n                throw error;\n            }\n        }\n        clearTokensInStorage();\n    }\n    static fromStorage() {\n        const savedTokens = readTokensFromStorage();\n        if (!savedTokens) {\n            return null;\n        }\n        return new Tokens(savedTokens.origin, savedTokens.refresh, savedTokens.access, savedTokens.expires);\n    }\n    static async fromAuthCode({ editorOrigin, clientId, codeVerifier, authCode, redirectUri }) {\n        const response = await fetch(`${editorOrigin}/oauth/token`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            body: new URLSearchParams({\n                client_id: clientId,\n                code: authCode,\n                code_verifier: codeVerifier,\n                grant_type: \"authorization_code\",\n                redirect_uri: redirectUri\n            }),\n            mode: \"cors\"\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to fetch token: ${response.status}`);\n        }\n        const tokenResponse = await response.json();\n        assertTokenResponse(tokenResponse);\n        const { access_token: access, refresh_token: refresh } = tokenResponse;\n        const expires = getExpiresFromTokenResponse(tokenResponse);\n        return new Tokens(editorOrigin, refresh, access, expires);\n    }\n    async _fetchNewAccessToken() {\n        try {\n            const response = await fetch(`${this.origin}/oauth/token`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                },\n                body: new URLSearchParams({\n                    grant_type: \"refresh_token\",\n                    refresh_token: this.refresh\n                }),\n                mode: \"cors\",\n                signal: this._revoked.signal\n            });\n            if (!response.ok) {\n                throw IGNORED_ERROR;\n            }\n            const tokenResponse = await response.json();\n            assertTokenResponse(tokenResponse);\n            const { access_token: access, refresh_token: refresh } = tokenResponse;\n            const expires = getExpiresFromTokenResponse(tokenResponse);\n            this.access = access;\n            this.expires = expires;\n            this.refresh = refresh;\n            return true;\n        } catch  {\n            clearTokensInStorage();\n            return false;\n        }\n    }\n    _sync() {\n        persistTokensInStorage(this);\n        fireAccessTokenChanged(this.access);\n    }\n    async _startRefreshTokensLoop(onFailedRefresh) {\n        while(true){\n            const expiresIn = this.expires - Date.now() - 1000;\n            await wait(Math.max(expiresIn, 1000));\n            if (this._revoked.signal.aborted) {\n                return;\n            }\n            if (!this._fetchNewAccessToken()) {\n                onFailedRefresh();\n                return;\n            }\n            this._sync();\n        }\n    }\n}\n/**\n * @internal\n */ function clearTokensInStorage() {\n    localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME);\n}\n/**\n * @internal\n */ function addAccessTokenChangedListener(listener) {\n    return accessTokenChangedListeners.listen(listener);\n}\nfunction readTokensFromStorage() {\n    const serializedTokens = localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME);\n    if (!serializedTokens) {\n        return null;\n    }\n    try {\n        return JSON.parse(serializedTokens);\n    } catch  {\n        return null;\n    }\n}\nfunction persistTokensInStorage(tokens) {\n    localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME, JSON.stringify(tokens));\n}\nfunction getExpiresFromTokenResponse({ created_at, expires_in }) {\n    return (created_at + expires_in) * 1000;\n}\nfunction assertTokenResponse(token) {\n    if (typeof token !== \"object\" || !token) {\n        throw new Error(\"Invalid Token Response\");\n    }\n    if (typeof token.access_token !== \"string\" || typeof token.refresh_token !== \"string\" || typeof token.created_at !== \"number\" || typeof token.expires_in !== \"number\") {\n        throw new Error(\"Invalid Token Response\");\n    }\n}\nfunction wait(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\nfunction fireAccessTokenChanged(accessToken) {\n    accessTokenChangedListeners.fireEvent(accessToken);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC90b2tlbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUQ7QUFDSTtBQUN6RCxNQUFNRSxnQkFBZ0IsSUFBSUM7QUFDMUJELGNBQWNFLEtBQUssR0FBRztBQUN0QixNQUFNQyw4QkFBOEIsSUFBSUosa0VBQWdCQTtBQUN4RDs7Q0FFQyxHQUNNLE1BQU1LO0lBTVRDLFlBQ0EsNEVBQTRFO0lBQzVFQyxNQUFNLEVBQ04seUNBQXlDO0lBQ3pDQyxPQUFPLEVBQ1AsbUNBQW1DO0lBQ25DQyxNQUFNLEVBQ04scUNBQXFDO0lBQ3JDQyxPQUFPLENBQUU7YUFUVEMsV0FBVyxJQUFJQztRQVVYLElBQUksQ0FBQ0wsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNuQjtJQUNBLE1BQU1HLFNBQVNDLGVBQWUsRUFBRTtRQUM1QixJQUFJLElBQUksQ0FBQ0gsUUFBUSxDQUFDSSxNQUFNLENBQUNDLE9BQU8sRUFBRTtZQUM5QixNQUFNLElBQUlkLE1BQU07UUFDcEI7UUFDQSxpREFBaUQ7UUFDakQsSUFBSSxJQUFJLENBQUNRLE9BQU8sR0FBR08sS0FBS0MsR0FBRyxJQUFJO1lBQzNCLElBQUksQ0FBRSxNQUFNLElBQUksQ0FBQ0Msb0JBQW9CLElBQUs7Z0JBQ3RDLE9BQU87WUFDWDtRQUNKO1FBQ0EsSUFBSSxDQUFDQyxLQUFLO1FBQ1YsSUFBSSxDQUFDQyx1QkFBdUIsQ0FBQ1A7UUFDN0IsT0FBTztJQUNYO0lBQ0EsTUFBTVEsT0FBT0MsUUFBUSxFQUFFQyxpQkFBaUIsRUFBRTtRQUN0QyxJQUFJLENBQUNiLFFBQVEsQ0FBQ2MsS0FBSztRQUNuQixJQUFJO1lBQ0EsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUNwQixNQUFNLENB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YSxLQUFLLFlBQy9CLE9BQU94QixNQUFNNEMsVUFBVSxLQUFLLFlBQzVCLE9BQU81QyxNQUFNNkMsVUFBVSxLQUFLLFVBQVU7UUFDdEMsTUFBTSxJQUFJM0UsTUFBTTtJQUNwQjtBQUNKO0FBQ0EsU0FBUzJELEtBQUtpQixFQUFFO0lBQ1osT0FBTyxJQUFJQyxRQUFRLENBQUNDLFVBQVlDLFdBQVdELFNBQVNGO0FBQ3hEO0FBQ0EsU0FBU25CLHVCQUF1QnVCLFdBQVc7SUFDdkM5RSw0QkFBNEIrRSxTQUFTLENBQUNEO0FBQzFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvdG9rZW5zLmpzPzg2ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU1RPUkFHRV9UT0tFTlNfTkFNRSB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFR5cGVkRXZlbnRUYXJnZXQgfSBmcm9tICcuL1R5cGVkRXZlbnRUYXJnZXQuanMnO1xuY29uc3QgSUdOT1JFRF9FUlJPUiA9IG5ldyBFcnJvcigpO1xuSUdOT1JFRF9FUlJPUi5zdGFjayA9ICcnO1xuY29uc3QgYWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXJzID0gbmV3IFR5cGVkRXZlbnRUYXJnZXQoKTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBUb2tlbnMge1xuICAgIG9yaWdpbjtcbiAgICByZWZyZXNoO1xuICAgIGFjY2VzcztcbiAgICBleHBpcmVzO1xuICAgIF9yZXZva2VkID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIGVkaXRvciBvcmlnaW4gdGhhdCB0aG9zZSB0b2tlbnMgYXJlIGJvdW5kIHRvLCBtb3N0bHkgdXNlZCBmb3IgZGV2ZWxvcG1lbnRcbiAgICBvcmlnaW4sIFxuICAgIC8vIHRva2VuIHRvIHVzZSB0byBnZXQgYSBuZXcgYWNjZXNzIHRva2VuXG4gICAgcmVmcmVzaCwgXG4gICAgLy8gdG9rZW4gdG8gcHJvdmlkZSB0byB3ZWJjb250YWluZXJcbiAgICBhY2Nlc3MsIFxuICAgIC8vIHRpbWUgaW4gVVRDIHdoZW4gdGhlIHRva2VuIGV4cGlyZXNcbiAgICBleHBpcmVzKSB7XG4gICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luO1xuICAgICAgICB0aGlzLnJlZnJlc2ggPSByZWZyZXNoO1xuICAgICAgICB0aGlzLmFjY2VzcyA9IGFjY2VzcztcbiAgICAgICAgdGhpcy5leHBpcmVzID0gZXhwaXJlcztcbiAgICB9XG4gICAgYXN5bmMgYWN0aXZhdGUob25GYWlsZWRSZWZyZXNoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZXZva2VkLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rva2VuIHJldm9rZWQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGUgYWNjZXNzIHRva2VuIGV4cGlyZWQgd2UgZmV0Y2ggYSBuZXcgb25lXG4gICAgICAgIGlmICh0aGlzLmV4cGlyZXMgPCBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLl9mZXRjaE5ld0FjY2Vzc1Rva2VuKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N5bmMoKTtcbiAgICAgICAgdGhpcy5fc3RhcnRSZWZyZXNoVG9rZW5zTG9vcChvbkZhaWxlZFJlZnJlc2gpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgcmV2b2tlKGNsaWVudElkLCBpZ25vcmVSZXZva2VFcnJvcikge1xuICAgICAgICB0aGlzLl9yZXZva2VkLmFib3J0KCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMub3JpZ2lufS9vYXV0aC9yZXZva2VgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgdG9rZW46IHRoaXMucmVmcmVzaCwgdG9rZW5fdHlwZV9oaW50OiAncmVmcmVzaF90b2tlbicsIGNsaWVudF9pZDogY2xpZW50SWQgfSksXG4gICAgICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9nb3V0YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIWlnbm9yZVJldm9rZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUb2tlbnNJblN0b3JhZ2UoKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TdG9yYWdlKCkge1xuICAgICAgICBjb25zdCBzYXZlZFRva2VucyA9IHJlYWRUb2tlbnNGcm9tU3RvcmFnZSgpO1xuICAgICAgICBpZiAoIXNhdmVkVG9rZW5zKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRva2VucyhzYXZlZFRva2Vucy5vcmlnaW4sIHNhdmVkVG9rZW5zLnJlZnJlc2gsIHNhdmVkVG9rZW5zLmFjY2Vzcywgc2F2ZWRUb2tlbnMuZXhwaXJlcyk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBmcm9tQXV0aENvZGUoeyBlZGl0b3JPcmlnaW4sIGNsaWVudElkLCBjb2RlVmVyaWZpZXIsIGF1dGhDb2RlLCByZWRpcmVjdFVyaSwgfSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2VkaXRvck9yaWdpbn0vb2F1dGgvdG9rZW5gLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgY2xpZW50X2lkOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICBjb2RlOiBhdXRoQ29kZSxcbiAgICAgICAgICAgICAgICBjb2RlX3ZlcmlmaWVyOiBjb2RlVmVyaWZpZXIsXG4gICAgICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RfdXJpOiByZWRpcmVjdFVyaSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggdG9rZW46ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuUmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGFzc2VydFRva2VuUmVzcG9uc2UodG9rZW5SZXNwb25zZSk7XG4gICAgICAgIGNvbnN0IHsgYWNjZXNzX3Rva2VuOiBhY2Nlc3MsIHJlZnJlc2hfdG9rZW46IHJlZnJlc2ggfSA9IHRva2VuUmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IGV4cGlyZXMgPSBnZXRFeHBpcmVzRnJvbVRva2VuUmVzcG9uc2UodG9rZW5SZXNwb25zZSk7XG4gICAgICAgIHJldHVybiBuZXcgVG9rZW5zKGVkaXRvck9yaWdpbiwgcmVmcmVzaCwgYWNjZXNzLCBleHBpcmVzKTtcbiAgICB9XG4gICAgYXN5bmMgX2ZldGNoTmV3QWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMub3JpZ2lufS9vYXV0aC90b2tlbmAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgICAgICBncmFudF90eXBlOiAncmVmcmVzaF90b2tlbicsXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46IHRoaXMucmVmcmVzaCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiB0aGlzLl9yZXZva2VkLnNpZ25hbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IElHTk9SRURfRVJST1I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgYXNzZXJ0VG9rZW5SZXNwb25zZSh0b2tlblJlc3BvbnNlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgYWNjZXNzX3Rva2VuOiBhY2Nlc3MsIHJlZnJlc2hfdG9rZW46IHJlZnJlc2ggfSA9IHRva2VuUmVzcG9uc2U7XG4gICAgICAgICAgICBjb25zdCBleHBpcmVzID0gZ2V0RXhwaXJlc0Zyb21Ub2tlblJlc3BvbnNlKHRva2VuUmVzcG9uc2UpO1xuICAgICAgICAgICAgdGhpcy5hY2Nlc3MgPSBhY2Nlc3M7XG4gICAgICAgICAgICB0aGlzLmV4cGlyZXMgPSBleHBpcmVzO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoID0gcmVmcmVzaDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNsZWFyVG9rZW5zSW5TdG9yYWdlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3N5bmMoKSB7XG4gICAgICAgIHBlcnNpc3RUb2tlbnNJblN0b3JhZ2UodGhpcyk7XG4gICAgICAgIGZpcmVBY2Nlc3NUb2tlbkNoYW5nZWQodGhpcy5hY2Nlc3MpO1xuICAgIH1cbiAgICBhc3luYyBfc3RhcnRSZWZyZXNoVG9rZW5zTG9vcChvbkZhaWxlZFJlZnJlc2gpIHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyZXNJbiA9IHRoaXMuZXhwaXJlcyAtIERhdGUubm93KCkgLSAxMDAwO1xuICAgICAgICAgICAgYXdhaXQgd2FpdChNYXRoLm1heChleHBpcmVzSW4sIDEwMDApKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXZva2VkLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLl9mZXRjaE5ld0FjY2Vzc1Rva2VuKCkpIHtcbiAgICAgICAgICAgICAgICBvbkZhaWxlZFJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zeW5jKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJUb2tlbnNJblN0b3JhZ2UoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9UT0tFTlNfTkFNRSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICByZXR1cm4gYWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXJzLmxpc3RlbihsaXN0ZW5lcik7XG59XG5mdW5jdGlvbiByZWFkVG9rZW5zRnJvbVN0b3JhZ2UoKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFRva2VucyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfVE9LRU5TX05BTUUpO1xuICAgIGlmICghc2VyaWFsaXplZFRva2Vucykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2VyaWFsaXplZFRva2Vucyk7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gcGVyc2lzdFRva2Vuc0luU3RvcmFnZSh0b2tlbnMpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX1RPS0VOU19OQU1FLCBKU09OLnN0cmluZ2lmeSh0b2tlbnMpKTtcbn1cbmZ1bmN0aW9uIGdldEV4cGlyZXNGcm9tVG9rZW5SZXNwb25zZSh7IGNyZWF0ZWRfYXQsIGV4cGlyZXNfaW4gfSkge1xuICAgIHJldHVybiAoY3JlYXRlZF9hdCArIGV4cGlyZXNfaW4pICogMTAwMDtcbn1cbmZ1bmN0aW9uIGFzc2VydFRva2VuUmVzcG9uc2UodG9rZW4pIHtcbiAgICBpZiAodHlwZW9mIHRva2VuICE9PSAnb2JqZWN0JyB8fCAhdG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFRva2VuIFJlc3BvbnNlJyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdG9rZW4uYWNjZXNzX3Rva2VuICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICB0eXBlb2YgdG9rZW4ucmVmcmVzaF90b2tlbiAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgdHlwZW9mIHRva2VuLmNyZWF0ZWRfYXQgIT09ICdudW1iZXInIHx8XG4gICAgICAgIHR5cGVvZiB0b2tlbi5leHBpcmVzX2luICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVG9rZW4gUmVzcG9uc2UnKTtcbiAgICB9XG59XG5mdW5jdGlvbiB3YWl0KG1zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5mdW5jdGlvbiBmaXJlQWNjZXNzVG9rZW5DaGFuZ2VkKGFjY2Vzc1Rva2VuKSB7XG4gICAgYWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXJzLmZpcmVFdmVudChhY2Nlc3NUb2tlbik7XG59XG4iXSwibmFtZXMiOlsiU1RPUkFHRV9UT0tFTlNfTkFNRSIsIlR5cGVkRXZlbnRUYXJnZXQiLCJJR05PUkVEX0VSUk9SIiwiRXJyb3IiLCJzdGFjayIsImFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVycyIsIlRva2VucyIsImNvbnN0cnVjdG9yIiwib3JpZ2luIiwicmVmcmVzaCIsImFjY2VzcyIsImV4cGlyZXMiLCJfcmV2b2tlZCIsIkFib3J0Q29udHJvbGxlciIsImFjdGl2YXRlIiwib25GYWlsZWRSZWZyZXNoIiwic2lnbmFsIiwiYWJvcnRlZCIsIkRhdGUiLCJub3ciLCJfZmV0Y2hOZXdBY2Nlc3NUb2tlbiIsIl9zeW5jIiwiX3N0YXJ0UmVmcmVzaFRva2Vuc0xvb3AiLCJyZXZva2UiLCJjbGllbnRJZCIsImlnbm9yZVJldm9rZUVycm9yIiwiYWJvcnQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b2tlbiIsInRva2VuX3R5cGVfaGludCIsImNsaWVudF9pZCIsIm1vZGUiLCJvayIsImVycm9yIiwiY2xlYXJUb2tlbnNJblN0b3JhZ2UiLCJmcm9tU3RvcmFnZSIsInNhdmVkVG9rZW5zIiwicmVhZFRva2Vuc0Zyb21TdG9yYWdlIiwiZnJvbUF1dGhDb2RlIiwiZWRpdG9yT3JpZ2luIiwiY29kZVZlcmlmaWVyIiwiYXV0aENvZGUiLCJyZWRpcmVjdFVyaSIsImNvZGUiLCJjb2RlX3ZlcmlmaWVyIiwiZ3JhbnRfdHlwZSIsInJlZGlyZWN0X3VyaSIsInN0YXR1cyIsInRva2VuUmVzcG9uc2UiLCJqc29uIiwiYXNzZXJ0VG9rZW5SZXNwb25zZSIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hfdG9rZW4iLCJnZXRFeHBpcmVzRnJvbVRva2VuUmVzcG9uc2UiLCJwZXJzaXN0VG9rZW5zSW5TdG9yYWdlIiwiZmlyZUFjY2Vzc1Rva2VuQ2hhbmdlZCIsImV4cGlyZXNJbiIsIndhaXQiLCJNYXRoIiwibWF4IiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsImFkZEFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVyIiwibGlzdGVuZXIiLCJsaXN0ZW4iLCJzZXJpYWxpemVkVG9rZW5zIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsInRva2VucyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjcmVhdGVkX2F0IiwiZXhwaXJlc19pbiIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiYWNjZXNzVG9rZW4iLCJmaXJlRXZlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/preview-message-types.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* binding */ PreviewMessageType)\n/* harmony export */ });\n/**\n * This type is in a separate module so that localservice can import it\n * without bundling all the other webcontainer specific stuff.\n */ var PreviewMessageType;\n(function(PreviewMessageType) {\n    PreviewMessageType[\"UncaughtException\"] = \"PREVIEW_UNCAUGHT_EXCEPTION\";\n    PreviewMessageType[\"UnhandledRejection\"] = \"PREVIEW_UNHANDLED_REJECTION\";\n    PreviewMessageType[\"ConsoleError\"] = \"PREVIEW_CONSOLE_ERROR\";\n})(PreviewMessageType || (PreviewMessageType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9wcmV2aWV3LW1lc3NhZ2UtdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Q0FHQyxHQUNNLElBQUlBLG1CQUFtQjtBQUM3QixVQUFVQSxrQkFBa0I7SUFDekJBLGtCQUFrQixDQUFDLG9CQUFvQixHQUFHO0lBQzFDQSxrQkFBa0IsQ0FBQyxxQkFBcUIsR0FBRztJQUMzQ0Esa0JBQWtCLENBQUMsZUFBZSxHQUFHO0FBQ3pDLEdBQUdBLHNCQUF1QkEsQ0FBQUEscUJBQXFCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1vcy1tdnAvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9wcmV2aWV3LW1lc3NhZ2UtdHlwZXMuanM/NjNkMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgdHlwZSBpcyBpbiBhIHNlcGFyYXRlIG1vZHVsZSBzbyB0aGF0IGxvY2Fsc2VydmljZSBjYW4gaW1wb3J0IGl0XG4gKiB3aXRob3V0IGJ1bmRsaW5nIGFsbCB0aGUgb3RoZXIgd2ViY29udGFpbmVyIHNwZWNpZmljIHN0dWZmLlxuICovXG5leHBvcnQgdmFyIFByZXZpZXdNZXNzYWdlVHlwZTtcbihmdW5jdGlvbiAoUHJldmlld01lc3NhZ2VUeXBlKSB7XG4gICAgUHJldmlld01lc3NhZ2VUeXBlW1wiVW5jYXVnaHRFeGNlcHRpb25cIl0gPSBcIlBSRVZJRVdfVU5DQVVHSFRfRVhDRVBUSU9OXCI7XG4gICAgUHJldmlld01lc3NhZ2VUeXBlW1wiVW5oYW5kbGVkUmVqZWN0aW9uXCJdID0gXCJQUkVWSUVXX1VOSEFORExFRF9SRUpFQ1RJT05cIjtcbiAgICBQcmV2aWV3TWVzc2FnZVR5cGVbXCJDb25zb2xlRXJyb3JcIl0gPSBcIlBSRVZJRVdfQ09OU09MRV9FUlJPUlwiO1xufSkoUHJldmlld01lc3NhZ2VUeXBlIHx8IChQcmV2aWV3TWVzc2FnZVR5cGUgPSB7fSkpO1xuIl0sIm5hbWVzIjpbIlByZXZpZXdNZXNzYWdlVHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils.js":
/*!******************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* reexport safe */ _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__.PreviewMessageType),\n/* harmony export */   isPreviewMessage: () => (/* reexport safe */ _utils_is_preview_message_js__WEBPACK_IMPORTED_MODULE_2__.isPreviewMessage),\n/* harmony export */   reloadPreview: () => (/* reexport safe */ _utils_reload_preview_js__WEBPACK_IMPORTED_MODULE_0__.reloadPreview)\n/* harmony export */ });\n/* harmony import */ var _utils_reload_preview_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/reload-preview.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js\");\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n/* harmony import */ var _utils_is_preview_message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/is-preview-message.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEQ7QUFDTTtBQUNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdXRpbHMuanM/ODNiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyByZWxvYWRQcmV2aWV3IH0gZnJvbSAnLi91dGlscy9yZWxvYWQtcHJldmlldy5qcyc7XG5leHBvcnQgeyBQcmV2aWV3TWVzc2FnZVR5cGUgfSBmcm9tICcuL3ByZXZpZXctbWVzc2FnZS10eXBlcy5qcyc7XG5leHBvcnQgeyBpc1ByZXZpZXdNZXNzYWdlIH0gZnJvbSAnLi91dGlscy9pcy1wcmV2aWV3LW1lc3NhZ2UuanMnO1xuIl0sIm5hbWVzIjpbInJlbG9hZFByZXZpZXciLCJQcmV2aWV3TWVzc2FnZVR5cGUiLCJpc1ByZXZpZXdNZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js":
/*!******************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/file-system.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toExternalFileSystemTree: () => (/* binding */ toExternalFileSystemTree),\n/* harmony export */   toInternalFileSystemTree: () => (/* binding */ toInternalFileSystemTree)\n/* harmony export */ });\n/* harmony import */ var _null_prototype_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./null-prototype.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js\");\n\nconst binaryDecoder = new TextDecoder(\"latin1\");\n/**\n * @internal\n */ function toInternalFileSystemTree(tree) {\n    const newTree = {\n        d: {}\n    };\n    for (const name of Object.keys(tree)){\n        const entry = tree[name];\n        if (\"file\" in entry) {\n            if (\"symlink\" in entry.file) {\n                newTree.d[name] = {\n                    f: {\n                        l: entry.file.symlink\n                    }\n                };\n                continue;\n            }\n            const contents = entry.file.contents;\n            const stringContents = typeof contents === \"string\" ? contents : binaryDecoder.decode(contents);\n            const binary = typeof contents === \"string\" ? {} : {\n                b: true\n            };\n            newTree.d[name] = {\n                f: {\n                    c: stringContents,\n                    ...binary\n                }\n            };\n            continue;\n        }\n        const newEntry = toInternalFileSystemTree(entry.directory);\n        newTree.d[name] = newEntry;\n    }\n    return newTree;\n}\n/**\n * @internal\n */ function toExternalFileSystemTree(tree) {\n    const newTree = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)();\n    if (\"f\" in tree) {\n        throw new Error(\"It is not possible to export a single file in the JSON format.\");\n    }\n    if (\"d\" in tree) {\n        for (const name of Object.keys(tree.d)){\n            const entry = tree.d[name];\n            if (\"d\" in entry) {\n                newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                    directory: toExternalFileSystemTree(entry)\n                });\n            } else if (\"f\" in entry) {\n                if (\"c\" in entry.f) {\n                    newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                        file: (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                            contents: entry.f.b ? fromBinaryString(entry.f.c) : entry.f.c\n                        })\n                    });\n                } else if (\"l\" in entry.f) {\n                    newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                        file: (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                            symlink: entry.f.l\n                        })\n                    });\n                }\n            }\n        }\n    }\n    return newTree;\n}\nfunction fromBinaryString(s) {\n    const encoded = new Uint8Array(s.length);\n    for(let i = 0; i < s.length; i++){\n        encoded[i] = s[i].charCodeAt(0);\n    }\n    return encoded;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9maWxlLXN5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDcEQsTUFBTUMsZ0JBQWdCLElBQUlDLFlBQVk7QUFDdEM7O0NBRUMsR0FDTSxTQUFTQyx5QkFBeUJDLElBQUk7SUFDekMsTUFBTUMsVUFBVTtRQUFFQyxHQUFHLENBQUM7SUFBRTtJQUN4QixLQUFLLE1BQU1DLFFBQVFDLE9BQU9DLElBQUksQ0FBQ0wsTUFBTztRQUNsQyxNQUFNTSxRQUFRTixJQUFJLENBQUNHLEtBQUs7UUFDeEIsSUFBSSxVQUFVRyxPQUFPO1lBQ2pCLElBQUksYUFBYUEsTUFBTUMsSUFBSSxFQUFFO2dCQUN6Qk4sUUFBUUMsQ0FBQyxDQUFDQyxLQUFLLEdBQUc7b0JBQUVLLEdBQUc7d0JBQUVDLEdBQUdILE1BQU1DLElBQUksQ0FBQ0csT0FBTztvQkFBQztnQkFBRTtnQkFDakQ7WUFDSjtZQUNBLE1BQU1DLFdBQVdMLE1BQU1DLElBQUksQ0FBQ0ksUUFBUTtZQUNwQyxNQUFNQyxpQkFBaUIsT0FBT0QsYUFBYSxXQUFXQSxXQUFXZCxjQUFjZ0IsTUFBTSxDQUFDRjtZQUN0RixNQUFNRyxTQUFTLE9BQU9ILGFBQWEsV0FBVyxDQUFDLElBQUk7Z0JBQUVJLEdBQUc7WUFBSztZQUM3RGQsUUFBUUMsQ0FBQyxDQUFDQyxLQUFLLEdBQUc7Z0JBQUVLLEdBQUc7b0JBQUVRLEdBQUdKO29CQUFnQixHQUFHRSxNQUFNO2dCQUFDO1lBQUU7WUFDeEQ7UUFDSjtRQUNBLE1BQU1HLFdBQVdsQix5QkFBeUJPLE1BQU1ZLFNBQVM7UUFDekRqQixRQUFRQyxDQUFDLENBQUNDLEtBQUssR0FBR2M7SUFDdEI7SUFDQSxPQUFPaEI7QUFDWDtBQUNBOztDQUVDLEdBQ00sU0FBU2tCLHlCQUF5Qm5CLElBQUk7SUFDekMsTUFBTUMsVUFBVUwsaUVBQWFBO0lBQzdCLElBQUksT0FBT0ksTUFBTTtRQUNiLE1BQU0sSUFBSW9CLE1BQU07SUFDcEI7SUFDQSxJQUFJLE9BQU9wQixNQUFNO1FBQ2IsS0FBSyxNQUFNRyxRQUFRQyxPQUFPQyxJQUFJLENBQUNMLEtBQUtFLENBQUMsRUFBRztZQUNwQyxNQUFNSSxRQUFRTixLQUFLRSxDQUFDLENBQUNDLEtBQUs7WUFDMUIsSUFBSSxPQUFPRyxPQUFPO2dCQUNkTCxPQUFPLENBQUNFLEtBQUssR0FBR1AsaUVBQWFBLENBQUM7b0JBQzFCc0IsV0FBV0MseUJBQXlCYjtnQkFDeEM7WUFDSixPQUNLLElBQUksT0FBT0EsT0FBTztnQkFDbkIsSUFBSSxPQUFPQSxNQUFNRSxDQUFDLEVBQUU7b0JBQ2hCUCxPQUFPLENBQUNFLEtBQUssR0FBR1AsaUVBQWFBLENBQUM7d0JBQzFCVyxNQUFNWCxpRUFBYUEsQ0FBQzs0QkFDaEJlLFVBQVVMLE1BQU1FLENBQUMsQ0FBQ08sQ0FBQyxHQUFHTSxpQkFBaUJmLE1BQU1FLENBQUMsQ0FBQ1EsQ0FBQyxJQUFJVixNQUFNRSxDQUFDLENBQUNRLENBQUM7d0JBQ2pFO29CQUNKO2dCQUNKLE9BQ0ssSUFBSSxPQUFPVixNQUFNRSxDQUFDLEVBQUU7b0JBQ3JCUCxPQUFPLENBQUNFLEtBQUssR0FBR1AsaUVBQWFBLENBQUM7d0JBQzFCVyxNQUFNWCxpRUFBYUEsQ0FBQzs0QkFDaEJjLFNBQVNKLE1BQU1FLENBQUMsQ0FBQ0MsQ0FBQzt3QkFDdEI7b0JBQ0o7Z0JBQ0o7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPUjtBQUNYO0FBQ0EsU0FBU29CLGlCQUFpQkMsQ0FBQztJQUN2QixNQUFNQyxVQUFVLElBQUlDLFdBQVdGLEVBQUVHLE1BQU07SUFDdkMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlKLEVBQUVHLE1BQU0sRUFBRUMsSUFBSztRQUMvQkgsT0FBTyxDQUFDRyxFQUFFLEdBQUdKLENBQUMsQ0FBQ0ksRUFBRSxDQUFDQyxVQUFVLENBQUM7SUFDakM7SUFDQSxPQUFPSjtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdXRpbHMvZmlsZS1zeXN0ZW0uanM/MWM2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBudWxsUHJvdG90eXBlIH0gZnJvbSAnLi9udWxsLXByb3RvdHlwZS5qcyc7XG5jb25zdCBiaW5hcnlEZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCdsYXRpbjEnKTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0ludGVybmFsRmlsZVN5c3RlbVRyZWUodHJlZSkge1xuICAgIGNvbnN0IG5ld1RyZWUgPSB7IGQ6IHt9IH07XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKHRyZWUpKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdHJlZVtuYW1lXTtcbiAgICAgICAgaWYgKCdmaWxlJyBpbiBlbnRyeSkge1xuICAgICAgICAgICAgaWYgKCdzeW1saW5rJyBpbiBlbnRyeS5maWxlKSB7XG4gICAgICAgICAgICAgICAgbmV3VHJlZS5kW25hbWVdID0geyBmOiB7IGw6IGVudHJ5LmZpbGUuc3ltbGluayB9IH07XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb250ZW50cyA9IGVudHJ5LmZpbGUuY29udGVudHM7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdDb250ZW50cyA9IHR5cGVvZiBjb250ZW50cyA9PT0gJ3N0cmluZycgPyBjb250ZW50cyA6IGJpbmFyeURlY29kZXIuZGVjb2RlKGNvbnRlbnRzKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbmFyeSA9IHR5cGVvZiBjb250ZW50cyA9PT0gJ3N0cmluZycgPyB7fSA6IHsgYjogdHJ1ZSB9O1xuICAgICAgICAgICAgbmV3VHJlZS5kW25hbWVdID0geyBmOiB7IGM6IHN0cmluZ0NvbnRlbnRzLCAuLi5iaW5hcnkgfSB9O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3RW50cnkgPSB0b0ludGVybmFsRmlsZVN5c3RlbVRyZWUoZW50cnkuZGlyZWN0b3J5KTtcbiAgICAgICAgbmV3VHJlZS5kW25hbWVdID0gbmV3RW50cnk7XG4gICAgfVxuICAgIHJldHVybiBuZXdUcmVlO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRXh0ZXJuYWxGaWxlU3lzdGVtVHJlZSh0cmVlKSB7XG4gICAgY29uc3QgbmV3VHJlZSA9IG51bGxQcm90b3R5cGUoKTtcbiAgICBpZiAoJ2YnIGluIHRyZWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJdCBpcyBub3QgcG9zc2libGUgdG8gZXhwb3J0IGEgc2luZ2xlIGZpbGUgaW4gdGhlIEpTT04gZm9ybWF0LicpO1xuICAgIH1cbiAgICBpZiAoJ2QnIGluIHRyZWUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKHRyZWUuZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gdHJlZS5kW25hbWVdO1xuICAgICAgICAgICAgaWYgKCdkJyBpbiBlbnRyeSkge1xuICAgICAgICAgICAgICAgIG5ld1RyZWVbbmFtZV0gPSBudWxsUHJvdG90eXBlKHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiB0b0V4dGVybmFsRmlsZVN5c3RlbVRyZWUoZW50cnkpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJ2YnIGluIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCdjJyBpbiBlbnRyeS5mKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RyZWVbbmFtZV0gPSBudWxsUHJvdG90eXBlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IG51bGxQcm90b3R5cGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBlbnRyeS5mLmIgPyBmcm9tQmluYXJ5U3RyaW5nKGVudHJ5LmYuYykgOiBlbnRyeS5mLmMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdsJyBpbiBlbnRyeS5mKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RyZWVbbmFtZV0gPSBudWxsUHJvdG90eXBlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IG51bGxQcm90b3R5cGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWxpbms6IGVudHJ5LmYubCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld1RyZWU7XG59XG5mdW5jdGlvbiBmcm9tQmluYXJ5U3RyaW5nKHMpIHtcbiAgICBjb25zdCBlbmNvZGVkID0gbmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbmNvZGVkW2ldID0gc1tpXS5jaGFyQ29kZUF0KDApO1xuICAgIH1cbiAgICByZXR1cm4gZW5jb2RlZDtcbn1cbiJdLCJuYW1lcyI6WyJudWxsUHJvdG90eXBlIiwiYmluYXJ5RGVjb2RlciIsIlRleHREZWNvZGVyIiwidG9JbnRlcm5hbEZpbGVTeXN0ZW1UcmVlIiwidHJlZSIsIm5ld1RyZWUiLCJkIiwibmFtZSIsIk9iamVjdCIsImtleXMiLCJlbnRyeSIsImZpbGUiLCJmIiwibCIsInN5bWxpbmsiLCJjb250ZW50cyIsInN0cmluZ0NvbnRlbnRzIiwiZGVjb2RlIiwiYmluYXJ5IiwiYiIsImMiLCJuZXdFbnRyeSIsImRpcmVjdG9yeSIsInRvRXh0ZXJuYWxGaWxlU3lzdGVtVHJlZSIsIkVycm9yIiwiZnJvbUJpbmFyeVN0cmluZyIsInMiLCJlbmNvZGVkIiwiVWludDhBcnJheSIsImxlbmd0aCIsImkiLCJjaGFyQ29kZUF0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/is-preview-message.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPreviewMessage: () => (/* binding */ isPreviewMessage)\n/* harmony export */ });\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n\nconst PREVIEW_MESSAGE_TYPES = [\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.ConsoleError,\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.UncaughtException,\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.UnhandledRejection\n];\nfunction isPreviewMessage(data) {\n    if (data == null || typeof data !== \"object\") {\n        return false;\n    }\n    if (!(\"type\" in data) || !PREVIEW_MESSAGE_TYPES.includes(data.type)) {\n        return false;\n    }\n    return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9pcy1wcmV2aWV3LW1lc3NhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUU7QUFDakUsTUFBTUMsd0JBQXdCO0lBQzFCRCx5RUFBa0JBLENBQUNFLFlBQVk7SUFDL0JGLHlFQUFrQkEsQ0FBQ0csaUJBQWlCO0lBQ3BDSCx5RUFBa0JBLENBQUNJLGtCQUFrQjtDQUN4QztBQUNNLFNBQVNDLGlCQUFpQkMsSUFBSTtJQUNqQyxJQUFJQSxRQUFRLFFBQVEsT0FBT0EsU0FBUyxVQUFVO1FBQzFDLE9BQU87SUFDWDtJQUNBLElBQUksQ0FBRSxXQUFVQSxJQUFHLEtBQU0sQ0FBQ0wsc0JBQXNCTSxRQUFRLENBQUNELEtBQUtFLElBQUksR0FBRztRQUNqRSxPQUFPO0lBQ1g7SUFDQSxPQUFPO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1vcy1tdnAvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9pcy1wcmV2aWV3LW1lc3NhZ2UuanM/YzY5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmV2aWV3TWVzc2FnZVR5cGUgfSBmcm9tICcuLi9wcmV2aWV3LW1lc3NhZ2UtdHlwZXMuanMnO1xuY29uc3QgUFJFVklFV19NRVNTQUdFX1RZUEVTID0gW1xuICAgIFByZXZpZXdNZXNzYWdlVHlwZS5Db25zb2xlRXJyb3IsXG4gICAgUHJldmlld01lc3NhZ2VUeXBlLlVuY2F1Z2h0RXhjZXB0aW9uLFxuICAgIFByZXZpZXdNZXNzYWdlVHlwZS5VbmhhbmRsZWRSZWplY3Rpb24sXG5dO1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJldmlld01lc3NhZ2UoZGF0YSkge1xuICAgIGlmIChkYXRhID09IG51bGwgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCEoJ3R5cGUnIGluIGRhdGEpIHx8ICFQUkVWSUVXX01FU1NBR0VfVFlQRVMuaW5jbHVkZXMoZGF0YS50eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuIl0sIm5hbWVzIjpbIlByZXZpZXdNZXNzYWdlVHlwZSIsIlBSRVZJRVdfTUVTU0FHRV9UWVBFUyIsIkNvbnNvbGVFcnJvciIsIlVuY2F1Z2h0RXhjZXB0aW9uIiwiVW5oYW5kbGVkUmVqZWN0aW9uIiwiaXNQcmV2aWV3TWVzc2FnZSIsImRhdGEiLCJpbmNsdWRlcyIsInR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/null-prototype.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nullPrototype: () => (/* binding */ nullPrototype)\n/* harmony export */ });\n/**\n * @internal\n */ function nullPrototype(source) {\n    const prototype = Object.create(null);\n    if (!source) {\n        return prototype;\n    }\n    return Object.assign(prototype, source);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9udWxsLXByb3RvdHlwZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0NBRUMsR0FDTSxTQUFTQSxjQUFjQyxNQUFNO0lBQ2hDLE1BQU1DLFlBQVlDLE9BQU9DLE1BQU0sQ0FBQztJQUNoQyxJQUFJLENBQUNILFFBQVE7UUFDVCxPQUFPQztJQUNYO0lBQ0EsT0FBT0MsT0FBT0UsTUFBTSxDQUFDSCxXQUFXRDtBQUNwQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW9zLW12cC8uL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L3V0aWxzL251bGwtcHJvdG90eXBlLmpzP2IzNDUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bGxQcm90b3R5cGUoc291cmNlKSB7XG4gICAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gcHJvdG90eXBlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm90b3R5cGUsIHNvdXJjZSk7XG59XG4iXSwibmFtZXMiOlsibnVsbFByb3RvdHlwZSIsInNvdXJjZSIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/reload-preview.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reloadPreview: () => (/* binding */ reloadPreview)\n/* harmony export */ });\n/**\n * This function reloads the provided iframe.\n *\n * @param preview The iframe page to reload.\n * @param hardRefreshTimeout The timeout after which the preview is reset if it hasn't responded to the reload event.\n */ function reloadPreview(preview, hardRefreshTimeout = 200) {\n    const { port1, port2 } = new MessageChannel();\n    let resolve;\n    const promise = new Promise((_resolve)=>{\n        resolve = _resolve;\n    });\n    const done = ()=>{\n        resolve();\n        port2.close();\n    };\n    const timeout = setTimeout(()=>{\n        const iframeSrc = preview.src;\n        preview.src = iframeSrc;\n        done();\n    }, hardRefreshTimeout);\n    port2.addEventListener(\"message\", (event)=>{\n        const data = event.data;\n        if (data == null || typeof data !== \"object\") {\n            return;\n        }\n        if (data.type === \"LOCALSERVICE_WINDOW_RELOADED\") {\n            clearTimeout(timeout);\n            done();\n        }\n    });\n    preview.contentWindow?.postMessage({\n        type: \"LOCALSERVICE_RELOAD_WINDOW\",\n        callback: port1\n    }, \"*\", [\n        port1\n    ]);\n    return promise;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9yZWxvYWQtcHJldmlldy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7O0NBS0MsR0FDTSxTQUFTQSxjQUFjQyxPQUFPLEVBQUVDLHFCQUFxQixHQUFHO0lBQzNELE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxLQUFLLEVBQUUsR0FBRyxJQUFJQztJQUM3QixJQUFJQztJQUNKLE1BQU1DLFVBQVUsSUFBSUMsUUFBUSxDQUFDQztRQUN6QkgsVUFBVUc7SUFDZDtJQUNBLE1BQU1DLE9BQU87UUFDVEo7UUFDQUYsTUFBTU8sS0FBSztJQUNmO0lBQ0EsTUFBTUMsVUFBVUMsV0FBVztRQUN2QixNQUFNQyxZQUFZYixRQUFRYyxHQUFHO1FBQzdCZCxRQUFRYyxHQUFHLEdBQUdEO1FBQ2RKO0lBQ0osR0FBR1I7SUFDSEUsTUFBTVksZ0JBQWdCLENBQUMsV0FBVyxDQUFDQztRQUMvQixNQUFNQyxPQUFPRCxNQUFNQyxJQUFJO1FBQ3ZCLElBQUlBLFFBQVEsUUFBUSxPQUFPQSxTQUFTLFVBQVU7WUFDMUM7UUFDSjtRQUNBLElBQUlBLEtBQUtDLElBQUksS0FBSyxnQ0FBZ0M7WUFDOUNDLGFBQWFSO1lBQ2JGO1FBQ0o7SUFDSjtJQUNBVCxRQUFRb0IsYUFBYSxFQUFFQyxZQUFZO1FBQy9CSCxNQUFNO1FBQ05JLFVBQVVwQjtJQUNkLEdBQUcsS0FBSztRQUFDQTtLQUFNO0lBQ2YsT0FBT0k7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW9zLW12cC8uL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L3V0aWxzL3JlbG9hZC1wcmV2aWV3LmpzPzhmNjEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHJlbG9hZHMgdGhlIHByb3ZpZGVkIGlmcmFtZS5cbiAqXG4gKiBAcGFyYW0gcHJldmlldyBUaGUgaWZyYW1lIHBhZ2UgdG8gcmVsb2FkLlxuICogQHBhcmFtIGhhcmRSZWZyZXNoVGltZW91dCBUaGUgdGltZW91dCBhZnRlciB3aGljaCB0aGUgcHJldmlldyBpcyByZXNldCBpZiBpdCBoYXNuJ3QgcmVzcG9uZGVkIHRvIHRoZSByZWxvYWQgZXZlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWxvYWRQcmV2aWV3KHByZXZpZXcsIGhhcmRSZWZyZXNoVGltZW91dCA9IDIwMCkge1xuICAgIGNvbnN0IHsgcG9ydDEsIHBvcnQyIH0gPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKF9yZXNvbHZlKSA9PiB7XG4gICAgICAgIHJlc29sdmUgPSBfcmVzb2x2ZTtcbiAgICB9KTtcbiAgICBjb25zdCBkb25lID0gKCkgPT4ge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIHBvcnQyLmNsb3NlKCk7XG4gICAgfTtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlmcmFtZVNyYyA9IHByZXZpZXcuc3JjO1xuICAgICAgICBwcmV2aWV3LnNyYyA9IGlmcmFtZVNyYztcbiAgICAgICAgZG9uZSgpO1xuICAgIH0sIGhhcmRSZWZyZXNoVGltZW91dCk7XG4gICAgcG9ydDIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgICAgICAgaWYgKGRhdGEgPT0gbnVsbCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnTE9DQUxTRVJWSUNFX1dJTkRPV19SRUxPQURFRCcpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHByZXZpZXcuY29udGVudFdpbmRvdz8ucG9zdE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiAnTE9DQUxTRVJWSUNFX1JFTE9BRF9XSU5ET1cnLFxuICAgICAgICBjYWxsYmFjazogcG9ydDEsXG4gICAgfSwgJyonLCBbcG9ydDFdKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbiJdLCJuYW1lcyI6WyJyZWxvYWRQcmV2aWV3IiwicHJldmlldyIsImhhcmRSZWZyZXNoVGltZW91dCIsInBvcnQxIiwicG9ydDIiLCJNZXNzYWdlQ2hhbm5lbCIsInJlc29sdmUiLCJwcm9taXNlIiwiUHJvbWlzZSIsIl9yZXNvbHZlIiwiZG9uZSIsImNsb3NlIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJpZnJhbWVTcmMiLCJzcmMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkYXRhIiwidHlwZSIsImNsZWFyVGltZW91dCIsImNvbnRlbnRXaW5kb3ciLCJwb3N0TWVzc2FnZSIsImNhbGxiYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/vendor/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Comlink: () => (/* binding */ comlink_exports)\n/* harmony export */ });\nvar __defProp = Object.defineProperty;\nvar __export = (target, all)=>{\n    for(var name in all)__defProp(target, name, {\n        get: all[name],\n        enumerable: true\n    });\n};\n// dist/vendor/comlink.js\nvar comlink_exports = {};\n__export(comlink_exports, {\n    createEndpoint: ()=>createEndpoint,\n    expose: ()=>expose,\n    proxy: ()=>proxy,\n    proxyMarker: ()=>proxyMarker,\n    releaseProxy: ()=>releaseProxy,\n    transfer: ()=>transfer,\n    transferHandlers: ()=>transferHandlers,\n    windowEndpoint: ()=>windowEndpoint,\n    wrap: ()=>wrap\n});\n// ../../node_modules/comlink/dist/esm/comlink.mjs\nvar proxyMarker = Symbol(\"Comlink.proxy\");\nvar createEndpoint = Symbol(\"Comlink.endpoint\");\nvar releaseProxy = Symbol(\"Comlink.releaseProxy\");\nvar throwMarker = Symbol(\"Comlink.thrown\");\nvar isObject = (val)=>typeof val === \"object\" && val !== null || typeof val === \"function\";\nvar proxyTransferHandler = {\n    canHandle: (val)=>isObject(val) && val[proxyMarker],\n    serialize (obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [\n            port2,\n            [\n                port2\n            ]\n        ];\n    },\n    deserialize (port) {\n        port.start();\n        return wrap(port);\n    }\n};\nvar throwTransferHandler = {\n    canHandle: (value)=>isObject(value) && throwMarker in value,\n    serialize ({ value }) {\n        let serialized;\n        if (value instanceof Error) {\n            serialized = {\n                isError: true,\n                value: {\n                    message: value.message,\n                    name: value.name,\n                    stack: value.stack\n                }\n            };\n        } else {\n            serialized = {\n                isError: false,\n                value\n            };\n        }\n        return [\n            serialized,\n            []\n        ];\n    },\n    deserialize (serialized) {\n        if (serialized.isError) {\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\n        }\n        throw serialized.value;\n    }\n};\nvar transferHandlers = /* @__PURE__ */ new Map([\n    [\n        \"proxy\",\n        proxyTransferHandler\n    ],\n    [\n        \"throw\",\n        throwTransferHandler\n    ]\n]);\nfunction expose(obj, ep = self) {\n    ep.addEventListener(\"message\", function callback(ev) {\n        if (!ev || !ev.data) {\n            return;\n        }\n        const { id, type, path } = Object.assign({\n            path: []\n        }, ev.data);\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n        let returnValue;\n        try {\n            const parent = path.slice(0, -1).reduce((obj2, prop)=>obj2[prop], obj);\n            const rawValue = path.reduce((obj2, prop)=>obj2[prop], obj);\n            switch(type){\n                case 0:\n                    {\n                        returnValue = rawValue;\n                    }\n                    break;\n                case 1:\n                    {\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    break;\n                case 2:\n                    {\n                        returnValue = rawValue.apply(parent, argumentList);\n                    }\n                    break;\n                case 3:\n                    {\n                        const value = new rawValue(...argumentList);\n                        returnValue = proxy(value);\n                    }\n                    break;\n                case 4:\n                    {\n                        const { port1, port2 } = new MessageChannel();\n                        expose(obj, port2);\n                        returnValue = transfer(port1, [\n                            port1\n                        ]);\n                    }\n                    break;\n                case 5:\n                    {\n                        returnValue = void 0;\n                    }\n                    break;\n            }\n        } catch (value) {\n            returnValue = {\n                value,\n                [throwMarker]: 0\n            };\n        }\n        Promise.resolve(returnValue).catch((value)=>{\n            return {\n                value,\n                [throwMarker]: 0\n            };\n        }).then((returnValue2)=>{\n            const [wireValue, transferables] = toWireValue(returnValue2);\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), {\n                id\n            }), transferables);\n            if (type === 5) {\n                ep.removeEventListener(\"message\", callback);\n                closeEndPoint(ep);\n            }\n        });\n    });\n    if (ep.start) {\n        ep.start();\n    }\n}\nfunction isMessagePort(endpoint) {\n    return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n    if (isMessagePort(endpoint)) endpoint.close();\n}\nfunction wrap(ep, target) {\n    return createProxy(ep, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n    if (isReleased) {\n        throw new Error(\"Proxy has been released and is not useable\");\n    }\n}\nfunction createProxy(ep, path = [], target = function() {}) {\n    let isProxyReleased = false;\n    const proxy2 = new Proxy(target, {\n        get (_target, prop) {\n            throwIfProxyReleased(isProxyReleased);\n            if (prop === releaseProxy) {\n                return ()=>{\n                    return requestResponseMessage(ep, {\n                        type: 5,\n                        path: path.map((p)=>p.toString())\n                    }).then(()=>{\n                        closeEndPoint(ep);\n                        isProxyReleased = true;\n                    });\n                };\n            }\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return {\n                        then: ()=>proxy2\n                    };\n                }\n                const r = requestResponseMessage(ep, {\n                    type: 0,\n                    path: path.map((p)=>p.toString())\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, [\n                ...path,\n                prop\n            ]);\n        },\n        set (_target, prop, rawValue) {\n            throwIfProxyReleased(isProxyReleased);\n            const [value, transferables] = toWireValue(rawValue);\n            return requestResponseMessage(ep, {\n                type: 1,\n                path: [\n                    ...path,\n                    prop\n                ].map((p)=>p.toString()),\n                value\n            }, transferables).then(fromWireValue);\n        },\n        apply (_target, _thisArg, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const last = path[path.length - 1];\n            if (last === createEndpoint) {\n                return requestResponseMessage(ep, {\n                    type: 4\n                }).then(fromWireValue);\n            }\n            if (last === \"bind\") {\n                return createProxy(ep, path.slice(0, -1));\n            }\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: 2,\n                path: path.map((p)=>p.toString()),\n                argumentList\n            }, transferables).then(fromWireValue);\n        },\n        construct (_target, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: 3,\n                path: path.map((p)=>p.toString()),\n                argumentList\n            }, transferables).then(fromWireValue);\n        }\n    });\n    return proxy2;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    const processed = argumentList.map(toWireValue);\n    return [\n        processed.map((v)=>v[0]),\n        myFlat(processed.map((v)=>v[1]))\n    ];\n}\nvar transferCache = /* @__PURE__ */ new WeakMap();\nfunction transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nfunction proxy(obj) {\n    return Object.assign(obj, {\n        [proxyMarker]: true\n    });\n}\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\n    return {\n        postMessage: (msg, transferables)=>w.postMessage(msg, targetOrigin, transferables),\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context)\n    };\n}\nfunction toWireValue(value) {\n    for (const [name, handler] of transferHandlers){\n        if (handler.canHandle(value)) {\n            const [serializedValue, transferables] = handler.serialize(value);\n            return [\n                {\n                    type: 3,\n                    name,\n                    value: serializedValue\n                },\n                transferables\n            ];\n        }\n    }\n    return [\n        {\n            type: 0,\n            value\n        },\n        transferCache.get(value) || []\n    ];\n}\nfunction fromWireValue(value) {\n    switch(value.type){\n        case 3:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case 0:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n    return new Promise((resolve)=>{\n        const id = generateUUID();\n        ep.addEventListener(\"message\", function l(ev) {\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\n                return;\n            }\n            ep.removeEventListener(\"message\", l);\n            resolve(ev.data);\n        });\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(Object.assign({\n            id\n        }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4).fill(0).map(()=>Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16)).join(\"-\");\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC92ZW5kb3IvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUlBLFlBQVlDLE9BQU9DLGNBQWM7QUFDckMsSUFBSUMsV0FBVyxDQUFDQyxRQUFRQztJQUN0QixJQUFLLElBQUlDLFFBQVFELElBQ2ZMLFVBQVVJLFFBQVFFLE1BQU07UUFBRUMsS0FBS0YsR0FBRyxDQUFDQyxLQUFLO1FBQUVFLFlBQVk7SUFBSztBQUMvRDtBQUVBLHlCQUF5QjtBQUN6QixJQUFJQyxrQkFBa0IsQ0FBQztBQUN2Qk4sU0FBU00saUJBQWlCO0lBQ3hCQyxnQkFBZ0IsSUFBTUE7SUFDdEJDLFFBQVEsSUFBTUE7SUFDZEMsT0FBTyxJQUFNQTtJQUNiQyxhQUFhLElBQU1BO0lBQ25CQyxjQUFjLElBQU1BO0lBQ3BCQyxVQUFVLElBQU1BO0lBQ2hCQyxrQkFBa0IsSUFBTUE7SUFDeEJDLGdCQUFnQixJQUFNQTtJQUN0QkMsTUFBTSxJQUFNQTtBQUNkO0FBRUEsa0RBQWtEO0FBQ2xELElBQUlMLGNBQWNNLE9BQU87QUFDekIsSUFBSVQsaUJBQWlCUyxPQUFPO0FBQzVCLElBQUlMLGVBQWVLLE9BQU87QUFDMUIsSUFBSUMsY0FBY0QsT0FBTztBQUN6QixJQUFJRSxXQUFXLENBQUNDLE1BQVEsT0FBT0EsUUFBUSxZQUFZQSxRQUFRLFFBQVEsT0FBT0EsUUFBUTtBQUNsRixJQUFJQyx1QkFBdUI7SUFDekJDLFdBQVcsQ0FBQ0YsTUFBUUQsU0FBU0MsUUFBUUEsR0FBRyxDQUFDVCxZQUFZO0lBQ3JEWSxXQUFVQyxHQUFHO1FBQ1gsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLEtBQUssRUFBRSxHQUFHLElBQUlDO1FBQzdCbEIsT0FBT2UsS0FBS0M7UUFDWixPQUFPO1lBQUNDO1lBQU87Z0JBQUNBO2FBQU07U0FBQztJQUN6QjtJQUNBRSxhQUFZQyxJQUFJO1FBQ2RBLEtBQUtDLEtBQUs7UUFDVixPQUFPZCxLQUFLYTtJQUNkO0FBQ0Y7QUFDQSxJQUFJRSx1QkFBdUI7SUFDekJULFdBQVcsQ0FBQ1UsUUFBVWIsU0FBU2EsVUFBVWQsZUFBZWM7SUFDeERULFdBQVUsRUFBRVMsS0FBSyxFQUFFO1FBQ2pCLElBQUlDO1FBQ0osSUFBSUQsaUJBQWlCRSxPQUFPO1lBQzFCRCxhQUFhO2dCQUNYRSxTQUFTO2dCQUNUSCxPQUFPO29CQUNMSSxTQUFTSixNQUFNSSxPQUFPO29CQUN0QmhDLE1BQU00QixNQUFNNUIsSUFBSTtvQkFDaEJpQyxPQUFPTCxNQUFNSyxLQUFLO2dCQUNwQjtZQUNGO1FBQ0YsT0FBTztZQUNMSixhQUFhO2dCQUFFRSxTQUFTO2dCQUFPSDtZQUFNO1FBQ3ZDO1FBQ0EsT0FBTztZQUFDQztZQUFZLEVBQUU7U0FBQztJQUN6QjtJQUNBTCxhQUFZSyxVQUFVO1FBQ3BCLElBQUlBLFdBQVdFLE9BQU8sRUFBRTtZQUN0QixNQUFNcEMsT0FBT3VDLE1BQU0sQ0FBQyxJQUFJSixNQUFNRCxXQUFXRCxLQUFLLENBQUNJLE9BQU8sR0FBR0gsV0FBV0QsS0FBSztRQUMzRTtRQUNBLE1BQU1DLFdBQVdELEtBQUs7SUFDeEI7QUFDRjtBQUNBLElBQUlsQixtQkFBbUIsYUFBYSxHQUFHLElBQUl5QixJQUFJO0lBQzdDO1FBQUM7UUFBU2xCO0tBQXFCO0lBQy9CO1FBQUM7UUFBU1U7S0FBcUI7Q0FDaEM7QUFDRCxTQUFTdEIsT0FBT2UsR0FBRyxFQUFFZ0IsS0FBS0MsSUFBSTtJQUM1QkQsR0FBR0UsZ0JBQWdCLENBQUMsV0FBVyxTQUFTQyxTQUFTQyxFQUFFO1FBQ2pELElBQUksQ0FBQ0EsTUFBTSxDQUFDQSxHQUFHQyxJQUFJLEVBQUU7WUFDbkI7UUFDRjtRQUNBLE1BQU0sRUFBRUMsRUFBRSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRSxHQUFHakQsT0FBT3VDLE1BQU0sQ0FBQztZQUFFVSxNQUFNLEVBQUU7UUFBQyxHQUFHSixHQUFHQyxJQUFJO1FBQzlELE1BQU1JLGVBQWUsQ0FBQ0wsR0FBR0MsSUFBSSxDQUFDSSxZQUFZLElBQUksRUFBRSxFQUFFQyxHQUFHLENBQUNDO1FBQ3RELElBQUlDO1FBQ0osSUFBSTtZQUNGLE1BQU1DLFNBQVNMLEtBQUtNLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBR0MsTUFBTSxDQUFDLENBQUNDLE1BQU1DLE9BQVNELElBQUksQ0FBQ0MsS0FBSyxFQUFFakM7WUFDcEUsTUFBTWtDLFdBQVdWLEtBQUtPLE1BQU0sQ0FBQyxDQUFDQyxNQUFNQyxPQUFTRCxJQUFJLENBQUNDLEtBQUssRUFBRWpDO1lBQ3pELE9BQVF1QjtnQkFDTixLQUFLO29CQUNIO3dCQUNFSyxjQUFjTTtvQkFDaEI7b0JBQ0E7Z0JBQ0YsS0FBSztvQkFDSDt3QkFDRUwsTUFBTSxDQUFDTCxLQUFLTSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUdILGNBQWNQLEdBQUdDLElBQUksQ0FBQ2IsS0FBSzt3QkFDdkRvQixjQUFjO29CQUNoQjtvQkFDQTtnQkFDRixLQUFLO29CQUNIO3dCQUNFQSxjQUFjTSxTQUFTQyxLQUFLLENBQUNOLFFBQVFKO29CQUN2QztvQkFDQTtnQkFDRixLQUFLO29CQUNIO3dCQUNFLE1BQU1qQixRQUFRLElBQUkwQixZQUFZVDt3QkFDOUJHLGNBQWMxQyxNQUFNc0I7b0JBQ3RCO29CQUNBO2dCQUNGLEtBQUs7b0JBQ0g7d0JBQ0UsTUFBTSxFQUFFUCxLQUFLLEVBQUVDLEtBQUssRUFBRSxHQUFHLElBQUlDO3dCQUM3QmxCLE9BQU9lLEtBQUtFO3dCQUNaMEIsY0FBY3ZDLFNBQVNZLE9BQU87NEJBQUNBO3lCQUFNO29CQUN2QztvQkFDQTtnQkFDRixLQUFLO29CQUNIO3dCQUNFMkIsY0FBYyxLQUFLO29CQUNyQjtvQkFDQTtZQUNKO1FBQ0YsRUFBRSxPQUFPcEIsT0FBTztZQUNkb0IsY0FBYztnQkFBRXBCO2dCQUFPLENBQUNkLFlBQVksRUFBRTtZQUFFO1FBQzFDO1FBQ0EwQyxRQUFRQyxPQUFPLENBQUNULGFBQWFVLEtBQUssQ0FBQyxDQUFDOUI7WUFDbEMsT0FBTztnQkFBRUE7Z0JBQU8sQ0FBQ2QsWUFBWSxFQUFFO1lBQUU7UUFDbkMsR0FBRzZDLElBQUksQ0FBQyxDQUFDQztZQUNQLE1BQU0sQ0FBQ0MsV0FBV0MsY0FBYyxHQUFHQyxZQUFZSDtZQUMvQ3hCLEdBQUc0QixXQUFXLENBQUNyRSxPQUFPdUMsTUFBTSxDQUFDdkMsT0FBT3VDLE1BQU0sQ0FBQyxDQUFDLEdBQUcyQixZQUFZO2dCQUFFbkI7WUFBRyxJQUFJb0I7WUFDcEUsSUFBSW5CLFNBQVMsR0FBRztnQkFDZFAsR0FBRzZCLG1CQUFtQixDQUFDLFdBQVcxQjtnQkFDbEMyQixjQUFjOUI7WUFDaEI7UUFDRjtJQUNGO0lBQ0EsSUFBSUEsR0FBR1YsS0FBSyxFQUFFO1FBQ1pVLEdBQUdWLEtBQUs7SUFDVjtBQUNGO0FBQ0EsU0FBU3lDLGNBQWNDLFFBQVE7SUFDN0IsT0FBT0EsU0FBU0MsV0FBVyxDQUFDckUsSUFBSSxLQUFLO0FBQ3ZDO0FBQ0EsU0FBU2tFLGNBQWNFLFFBQVE7SUFDN0IsSUFBSUQsY0FBY0MsV0FDaEJBLFNBQVNFLEtBQUs7QUFDbEI7QUFDQSxTQUFTMUQsS0FBS3dCLEVBQUUsRUFBRXRDLE1BQU07SUFDdEIsT0FBT3lFLFlBQVluQyxJQUFJLEVBQUUsRUFBRXRDO0FBQzdCO0FBQ0EsU0FBUzBFLHFCQUFxQkMsVUFBVTtJQUN0QyxJQUFJQSxZQUFZO1FBQ2QsTUFBTSxJQUFJM0MsTUFBTTtJQUNsQjtBQUNGO0FBQ0EsU0FBU3lDLFlBQVluQyxFQUFFLEVBQUVRLE9BQU8sRUFBRSxFQUFFOUMsU0FBUyxZQUM3QyxDQUFDO0lBQ0MsSUFBSTRFLGtCQUFrQjtJQUN0QixNQUFNQyxTQUFTLElBQUlDLE1BQU05RSxRQUFRO1FBQy9CRyxLQUFJNEUsT0FBTyxFQUFFeEIsSUFBSTtZQUNmbUIscUJBQXFCRTtZQUNyQixJQUFJckIsU0FBUzdDLGNBQWM7Z0JBQ3pCLE9BQU87b0JBQ0wsT0FBT3NFLHVCQUF1QjFDLElBQUk7d0JBQ2hDTyxNQUFNO3dCQUNOQyxNQUFNQSxLQUFLRSxHQUFHLENBQUMsQ0FBQ2lDLElBQU1BLEVBQUVDLFFBQVE7b0JBQ2xDLEdBQUdyQixJQUFJLENBQUM7d0JBQ05PLGNBQWM5Qjt3QkFDZHNDLGtCQUFrQjtvQkFDcEI7Z0JBQ0Y7WUFDRjtZQUNBLElBQUlyQixTQUFTLFFBQVE7Z0JBQ25CLElBQUlULEtBQUtxQyxNQUFNLEtBQUssR0FBRztvQkFDckIsT0FBTzt3QkFBRXRCLE1BQU0sSUFBTWdCO29CQUFPO2dCQUM5QjtnQkFDQSxNQUFNTyxJQUFJSix1QkFBdUIxQyxJQUFJO29CQUNuQ08sTUFBTTtvQkFDTkMsTUFBTUEsS0FBS0UsR0FBRyxDQUFDLENBQUNpQyxJQUFNQSxFQUFFQyxRQUFRO2dCQUNsQyxHQUFHckIsSUFBSSxDQUFDWjtnQkFDUixPQUFPbUMsRUFBRXZCLElBQUksQ0FBQ3dCLElBQUksQ0FBQ0Q7WUFDckI7WUFDQSxPQUFPWCxZQUFZbkMsSUFBSTttQkFBSVE7Z0JBQU1TO2FBQUs7UUFDeEM7UUFDQStCLEtBQUlQLE9BQU8sRUFBRXhCLElBQUksRUFBRUMsUUFBUTtZQUN6QmtCLHFCQUFxQkU7WUFDckIsTUFBTSxDQUFDOUMsT0FBT2tDLGNBQWMsR0FBR0MsWUFBWVQ7WUFDM0MsT0FBT3dCLHVCQUF1QjFDLElBQUk7Z0JBQ2hDTyxNQUFNO2dCQUNOQyxNQUFNO3VCQUFJQTtvQkFBTVM7aUJBQUssQ0FBQ1AsR0FBRyxDQUFDLENBQUNpQyxJQUFNQSxFQUFFQyxRQUFRO2dCQUMzQ3BEO1lBQ0YsR0FBR2tDLGVBQWVILElBQUksQ0FBQ1o7UUFDekI7UUFDQVEsT0FBTXNCLE9BQU8sRUFBRVEsUUFBUSxFQUFFQyxlQUFlO1lBQ3RDZCxxQkFBcUJFO1lBQ3JCLE1BQU1hLE9BQU8zQyxJQUFJLENBQUNBLEtBQUtxQyxNQUFNLEdBQUcsRUFBRTtZQUNsQyxJQUFJTSxTQUFTbkYsZ0JBQWdCO2dCQUMzQixPQUFPMEUsdUJBQXVCMUMsSUFBSTtvQkFDaENPLE1BQU07Z0JBQ1IsR0FBR2dCLElBQUksQ0FBQ1o7WUFDVjtZQUNBLElBQUl3QyxTQUFTLFFBQVE7Z0JBQ25CLE9BQU9oQixZQUFZbkMsSUFBSVEsS0FBS00sS0FBSyxDQUFDLEdBQUcsQ0FBQztZQUN4QztZQUNBLE1BQU0sQ0FBQ0wsY0FBY2lCLGNBQWMsR0FBRzBCLGlCQUFpQkY7WUFDdkQsT0FBT1IsdUJBQXVCMUMsSUFBSTtnQkFDaENPLE1BQU07Z0JBQ05DLE1BQU1BLEtBQUtFLEdBQUcsQ0FBQyxDQUFDaUMsSUFBTUEsRUFBRUMsUUFBUTtnQkFDaENuQztZQUNGLEdBQUdpQixlQUFlSCxJQUFJLENBQUNaO1FBQ3pCO1FBQ0EwQyxXQUFVWixPQUFPLEVBQUVTLGVBQWU7WUFDaENkLHFCQUFxQkU7WUFDckIsTUFBTSxDQUFDN0IsY0FBY2lCLGNBQWMsR0FBRzBCLGlCQUFpQkY7WUFDdkQsT0FBT1IsdUJBQXVCMUMsSUFBSTtnQkFDaENPLE1BQU07Z0JBQ05DLE1BQU1BLEtBQUtFLEdBQUcsQ0FBQyxDQUFDaUMsSUFBTUEsRUFBRUMsUUFBUTtnQkFDaENuQztZQUNGLEdBQUdpQixlQUFlSCxJQUFJLENBQUNaO1FBQ3pCO0lBQ0Y7SUFDQSxPQUFPNEI7QUFDVDtBQUNBLFNBQVNlLE9BQU9DLEdBQUc7SUFDakIsT0FBT0MsTUFBTUMsU0FBUyxDQUFDQyxNQUFNLENBQUN2QyxLQUFLLENBQUMsRUFBRSxFQUFFb0M7QUFDMUM7QUFDQSxTQUFTSCxpQkFBaUIzQyxZQUFZO0lBQ3BDLE1BQU1rRCxZQUFZbEQsYUFBYUMsR0FBRyxDQUFDaUI7SUFDbkMsT0FBTztRQUFDZ0MsVUFBVWpELEdBQUcsQ0FBQyxDQUFDa0QsSUFBTUEsQ0FBQyxDQUFDLEVBQUU7UUFBR04sT0FBT0ssVUFBVWpELEdBQUcsQ0FBQyxDQUFDa0QsSUFBTUEsQ0FBQyxDQUFDLEVBQUU7S0FBRztBQUN6RTtBQUNBLElBQUlDLGdCQUFnQixhQUFhLEdBQUcsSUFBSUM7QUFDeEMsU0FBU3pGLFNBQVNXLEdBQUcsRUFBRStFLFNBQVM7SUFDOUJGLGNBQWNiLEdBQUcsQ0FBQ2hFLEtBQUsrRTtJQUN2QixPQUFPL0U7QUFDVDtBQUNBLFNBQVNkLE1BQU1jLEdBQUc7SUFDaEIsT0FBT3pCLE9BQU91QyxNQUFNLENBQUNkLEtBQUs7UUFBRSxDQUFDYixZQUFZLEVBQUU7SUFBSztBQUNsRDtBQUNBLFNBQVNJLGVBQWV5RixDQUFDLEVBQUVDLFVBQVVoRSxJQUFJLEVBQUVpRSxlQUFlLEdBQUc7SUFDM0QsT0FBTztRQUNMdEMsYUFBYSxDQUFDdUMsS0FBS3pDLGdCQUFrQnNDLEVBQUVwQyxXQUFXLENBQUN1QyxLQUFLRCxjQUFjeEM7UUFDdEV4QixrQkFBa0IrRCxRQUFRL0QsZ0JBQWdCLENBQUM2QyxJQUFJLENBQUNrQjtRQUNoRHBDLHFCQUFxQm9DLFFBQVFwQyxtQkFBbUIsQ0FBQ2tCLElBQUksQ0FBQ2tCO0lBQ3hEO0FBQ0Y7QUFDQSxTQUFTdEMsWUFBWW5DLEtBQUs7SUFDeEIsS0FBSyxNQUFNLENBQUM1QixNQUFNd0csUUFBUSxJQUFJOUYsaUJBQWtCO1FBQzlDLElBQUk4RixRQUFRdEYsU0FBUyxDQUFDVSxRQUFRO1lBQzVCLE1BQU0sQ0FBQzZFLGlCQUFpQjNDLGNBQWMsR0FBRzBDLFFBQVFyRixTQUFTLENBQUNTO1lBQzNELE9BQU87Z0JBQ0w7b0JBQ0VlLE1BQU07b0JBQ04zQztvQkFDQTRCLE9BQU82RTtnQkFDVDtnQkFDQTNDO2FBQ0Q7UUFDSDtJQUNGO0lBQ0EsT0FBTztRQUNMO1lBQ0VuQixNQUFNO1lBQ05mO1FBQ0Y7UUFDQXFFLGNBQWNoRyxHQUFHLENBQUMyQixVQUFVLEVBQUU7S0FDL0I7QUFDSDtBQUNBLFNBQVNtQixjQUFjbkIsS0FBSztJQUMxQixPQUFRQSxNQUFNZSxJQUFJO1FBQ2hCLEtBQUs7WUFDSCxPQUFPakMsaUJBQWlCVCxHQUFHLENBQUMyQixNQUFNNUIsSUFBSSxFQUFFd0IsV0FBVyxDQUFDSSxNQUFNQSxLQUFLO1FBQ2pFLEtBQUs7WUFDSCxPQUFPQSxNQUFNQSxLQUFLO0lBQ3RCO0FBQ0Y7QUFDQSxTQUFTa0QsdUJBQXVCMUMsRUFBRSxFQUFFbUUsR0FBRyxFQUFFSixTQUFTO0lBQ2hELE9BQU8sSUFBSTNDLFFBQVEsQ0FBQ0M7UUFDbEIsTUFBTWYsS0FBS2dFO1FBQ1h0RSxHQUFHRSxnQkFBZ0IsQ0FBQyxXQUFXLFNBQVNxRSxFQUFFbkUsRUFBRTtZQUMxQyxJQUFJLENBQUNBLEdBQUdDLElBQUksSUFBSSxDQUFDRCxHQUFHQyxJQUFJLENBQUNDLEVBQUUsSUFBSUYsR0FBR0MsSUFBSSxDQUFDQyxFQUFFLEtBQUtBLElBQUk7Z0JBQ2hEO1lBQ0Y7WUFDQU4sR0FBRzZCLG1CQUFtQixDQUFDLFdBQVcwQztZQUNsQ2xELFFBQVFqQixHQUFHQyxJQUFJO1FBQ2pCO1FBQ0EsSUFBSUwsR0FBR1YsS0FBSyxFQUFFO1lBQ1pVLEdBQUdWLEtBQUs7UUFDVjtRQUNBVSxHQUFHNEIsV0FBVyxDQUFDckUsT0FBT3VDLE1BQU0sQ0FBQztZQUFFUTtRQUFHLEdBQUc2RCxNQUFNSjtJQUM3QztBQUNGO0FBQ0EsU0FBU087SUFDUCxPQUFPLElBQUlkLE1BQU0sR0FBR2dCLElBQUksQ0FBQyxHQUFHOUQsR0FBRyxDQUFDLElBQU0rRCxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBS0MsT0FBT0MsZ0JBQWdCLEVBQUVqQyxRQUFRLENBQUMsS0FBS2tDLElBQUksQ0FBQztBQUMvRztBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktb3MtbXZwLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdmVuZG9yL2luZGV4LmpzPzdmZGEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcblxuLy8gZGlzdC92ZW5kb3IvY29tbGluay5qc1xudmFyIGNvbWxpbmtfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoY29tbGlua19leHBvcnRzLCB7XG4gIGNyZWF0ZUVuZHBvaW50OiAoKSA9PiBjcmVhdGVFbmRwb2ludCxcbiAgZXhwb3NlOiAoKSA9PiBleHBvc2UsXG4gIHByb3h5OiAoKSA9PiBwcm94eSxcbiAgcHJveHlNYXJrZXI6ICgpID0+IHByb3h5TWFya2VyLFxuICByZWxlYXNlUHJveHk6ICgpID0+IHJlbGVhc2VQcm94eSxcbiAgdHJhbnNmZXI6ICgpID0+IHRyYW5zZmVyLFxuICB0cmFuc2ZlckhhbmRsZXJzOiAoKSA9PiB0cmFuc2ZlckhhbmRsZXJzLFxuICB3aW5kb3dFbmRwb2ludDogKCkgPT4gd2luZG93RW5kcG9pbnQsXG4gIHdyYXA6ICgpID0+IHdyYXBcbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvY29tbGluay9kaXN0L2VzbS9jb21saW5rLm1qc1xudmFyIHByb3h5TWFya2VyID0gU3ltYm9sKFwiQ29tbGluay5wcm94eVwiKTtcbnZhciBjcmVhdGVFbmRwb2ludCA9IFN5bWJvbChcIkNvbWxpbmsuZW5kcG9pbnRcIik7XG52YXIgcmVsZWFzZVByb3h5ID0gU3ltYm9sKFwiQ29tbGluay5yZWxlYXNlUHJveHlcIik7XG52YXIgdGhyb3dNYXJrZXIgPSBTeW1ib2woXCJDb21saW5rLnRocm93blwiKTtcbnZhciBpc09iamVjdCA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbnZhciBwcm94eVRyYW5zZmVySGFuZGxlciA9IHtcbiAgY2FuSGFuZGxlOiAodmFsKSA9PiBpc09iamVjdCh2YWwpICYmIHZhbFtwcm94eU1hcmtlcl0sXG4gIHNlcmlhbGl6ZShvYmopIHtcbiAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgZXhwb3NlKG9iaiwgcG9ydDEpO1xuICAgIHJldHVybiBbcG9ydDIsIFtwb3J0Ml1dO1xuICB9LFxuICBkZXNlcmlhbGl6ZShwb3J0KSB7XG4gICAgcG9ydC5zdGFydCgpO1xuICAgIHJldHVybiB3cmFwKHBvcnQpO1xuICB9XG59O1xudmFyIHRocm93VHJhbnNmZXJIYW5kbGVyID0ge1xuICBjYW5IYW5kbGU6ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpICYmIHRocm93TWFya2VyIGluIHZhbHVlLFxuICBzZXJpYWxpemUoeyB2YWx1ZSB9KSB7XG4gICAgbGV0IHNlcmlhbGl6ZWQ7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHNlcmlhbGl6ZWQgPSB7XG4gICAgICAgIGlzRXJyb3I6IHRydWUsXG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgbWVzc2FnZTogdmFsdWUubWVzc2FnZSxcbiAgICAgICAgICBuYW1lOiB2YWx1ZS5uYW1lLFxuICAgICAgICAgIHN0YWNrOiB2YWx1ZS5zdGFja1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJpYWxpemVkID0geyBpc0Vycm9yOiBmYWxzZSwgdmFsdWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIFtzZXJpYWxpemVkLCBbXV07XG4gIH0sXG4gIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWQpIHtcbiAgICBpZiAoc2VyaWFsaXplZC5pc0Vycm9yKSB7XG4gICAgICB0aHJvdyBPYmplY3QuYXNzaWduKG5ldyBFcnJvcihzZXJpYWxpemVkLnZhbHVlLm1lc3NhZ2UpLCBzZXJpYWxpemVkLnZhbHVlKTtcbiAgICB9XG4gICAgdGhyb3cgc2VyaWFsaXplZC52YWx1ZTtcbiAgfVxufTtcbnZhciB0cmFuc2ZlckhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICBbXCJwcm94eVwiLCBwcm94eVRyYW5zZmVySGFuZGxlcl0sXG4gIFtcInRocm93XCIsIHRocm93VHJhbnNmZXJIYW5kbGVyXVxuXSk7XG5mdW5jdGlvbiBleHBvc2Uob2JqLCBlcCA9IHNlbGYpIHtcbiAgZXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gY2FsbGJhY2soZXYpIHtcbiAgICBpZiAoIWV2IHx8ICFldi5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgaWQsIHR5cGUsIHBhdGggfSA9IE9iamVjdC5hc3NpZ24oeyBwYXRoOiBbXSB9LCBldi5kYXRhKTtcbiAgICBjb25zdCBhcmd1bWVudExpc3QgPSAoZXYuZGF0YS5hcmd1bWVudExpc3QgfHwgW10pLm1hcChmcm9tV2lyZVZhbHVlKTtcbiAgICBsZXQgcmV0dXJuVmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHBhdGguc2xpY2UoMCwgLTEpLnJlZHVjZSgob2JqMiwgcHJvcCkgPT4gb2JqMltwcm9wXSwgb2JqKTtcbiAgICAgIGNvbnN0IHJhd1ZhbHVlID0gcGF0aC5yZWR1Y2UoKG9iajIsIHByb3ApID0+IG9iajJbcHJvcF0sIG9iaik7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcGFyZW50W3BhdGguc2xpY2UoLTEpWzBdXSA9IGZyb21XaXJlVmFsdWUoZXYuZGF0YS52YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSByYXdWYWx1ZS5hcHBseShwYXJlbnQsIGFyZ3VtZW50TGlzdCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBuZXcgcmF3VmFsdWUoLi4uYXJndW1lbnRMaXN0KTtcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gcHJveHkodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcG9ydDEsIHBvcnQyIH0gPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgICAgIGV4cG9zZShvYmosIHBvcnQyKTtcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gdHJhbnNmZXIocG9ydDEsIFtwb3J0MV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGNhdGNoICh2YWx1ZSkge1xuICAgICAgcmV0dXJuVmFsdWUgPSB7IHZhbHVlLCBbdGhyb3dNYXJrZXJdOiAwIH07XG4gICAgfVxuICAgIFByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSkuY2F0Y2goKHZhbHVlKSA9PiB7XG4gICAgICByZXR1cm4geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9O1xuICAgIH0pLnRoZW4oKHJldHVyblZhbHVlMikgPT4ge1xuICAgICAgY29uc3QgW3dpcmVWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSB0b1dpcmVWYWx1ZShyZXR1cm5WYWx1ZTIpO1xuICAgICAgZXAucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB3aXJlVmFsdWUpLCB7IGlkIH0pLCB0cmFuc2ZlcmFibGVzKTtcbiAgICAgIGlmICh0eXBlID09PSA1KSB7XG4gICAgICAgIGVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGNhbGxiYWNrKTtcbiAgICAgICAgY2xvc2VFbmRQb2ludChlcCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBpZiAoZXAuc3RhcnQpIHtcbiAgICBlcC5zdGFydCgpO1xuICB9XG59XG5mdW5jdGlvbiBpc01lc3NhZ2VQb3J0KGVuZHBvaW50KSB7XG4gIHJldHVybiBlbmRwb2ludC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk1lc3NhZ2VQb3J0XCI7XG59XG5mdW5jdGlvbiBjbG9zZUVuZFBvaW50KGVuZHBvaW50KSB7XG4gIGlmIChpc01lc3NhZ2VQb3J0KGVuZHBvaW50KSlcbiAgICBlbmRwb2ludC5jbG9zZSgpO1xufVxuZnVuY3Rpb24gd3JhcChlcCwgdGFyZ2V0KSB7XG4gIHJldHVybiBjcmVhdGVQcm94eShlcCwgW10sIHRhcmdldCk7XG59XG5mdW5jdGlvbiB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1JlbGVhc2VkKSB7XG4gIGlmIChpc1JlbGVhc2VkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUHJveHkgaGFzIGJlZW4gcmVsZWFzZWQgYW5kIGlzIG5vdCB1c2VhYmxlXCIpO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVQcm94eShlcCwgcGF0aCA9IFtdLCB0YXJnZXQgPSBmdW5jdGlvbigpIHtcbn0pIHtcbiAgbGV0IGlzUHJveHlSZWxlYXNlZCA9IGZhbHNlO1xuICBjb25zdCBwcm94eTIgPSBuZXcgUHJveHkodGFyZ2V0LCB7XG4gICAgZ2V0KF90YXJnZXQsIHByb3ApIHtcbiAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XG4gICAgICBpZiAocHJvcCA9PT0gcmVsZWFzZVByb3h5KSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICAgIHR5cGU6IDUsXG4gICAgICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKVxuICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY2xvc2VFbmRQb2ludChlcCk7XG4gICAgICAgICAgICBpc1Byb3h5UmVsZWFzZWQgPSB0cnVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKHByb3AgPT09IFwidGhlblwiKSB7XG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiB7IHRoZW46ICgpID0+IHByb3h5MiB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgICAgdHlwZTogMCxcbiAgICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKVxuICAgICAgICB9KS50aGVuKGZyb21XaXJlVmFsdWUpO1xuICAgICAgICByZXR1cm4gci50aGVuLmJpbmQocik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIFsuLi5wYXRoLCBwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQoX3RhcmdldCwgcHJvcCwgcmF3VmFsdWUpIHtcbiAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XG4gICAgICBjb25zdCBbdmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gdG9XaXJlVmFsdWUocmF3VmFsdWUpO1xuICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgdHlwZTogMSxcbiAgICAgICAgcGF0aDogWy4uLnBhdGgsIHByb3BdLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcbiAgICAgICAgdmFsdWVcbiAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgfSxcbiAgICBhcHBseShfdGFyZ2V0LCBfdGhpc0FyZywgcmF3QXJndW1lbnRMaXN0KSB7XG4gICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xuICAgICAgY29uc3QgbGFzdCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0ID09PSBjcmVhdGVFbmRwb2ludCkge1xuICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICAgIHR5cGU6IDRcbiAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChsYXN0ID09PSBcImJpbmRcIikge1xuICAgICAgICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpO1xuICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgdHlwZTogMixcbiAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXG4gICAgICAgIGFyZ3VtZW50TGlzdFxuICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICB9LFxuICAgIGNvbnN0cnVjdChfdGFyZ2V0LCByYXdBcmd1bWVudExpc3QpIHtcbiAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XG4gICAgICBjb25zdCBbYXJndW1lbnRMaXN0LCB0cmFuc2ZlcmFibGVzXSA9IHByb2Nlc3NBcmd1bWVudHMocmF3QXJndW1lbnRMaXN0KTtcbiAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgIHR5cGU6IDMsXG4gICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxuICAgICAgICBhcmd1bWVudExpc3RcbiAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHByb3h5Mjtcbn1cbmZ1bmN0aW9uIG15RmxhdChhcnIpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFycik7XG59XG5mdW5jdGlvbiBwcm9jZXNzQXJndW1lbnRzKGFyZ3VtZW50TGlzdCkge1xuICBjb25zdCBwcm9jZXNzZWQgPSBhcmd1bWVudExpc3QubWFwKHRvV2lyZVZhbHVlKTtcbiAgcmV0dXJuIFtwcm9jZXNzZWQubWFwKCh2KSA9PiB2WzBdKSwgbXlGbGF0KHByb2Nlc3NlZC5tYXAoKHYpID0+IHZbMV0pKV07XG59XG52YXIgdHJhbnNmZXJDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gdHJhbnNmZXIob2JqLCB0cmFuc2ZlcnMpIHtcbiAgdHJhbnNmZXJDYWNoZS5zZXQob2JqLCB0cmFuc2ZlcnMpO1xuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gcHJveHkob2JqKSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwgeyBbcHJveHlNYXJrZXJdOiB0cnVlIH0pO1xufVxuZnVuY3Rpb24gd2luZG93RW5kcG9pbnQodywgY29udGV4dCA9IHNlbGYsIHRhcmdldE9yaWdpbiA9IFwiKlwiKSB7XG4gIHJldHVybiB7XG4gICAgcG9zdE1lc3NhZ2U6IChtc2csIHRyYW5zZmVyYWJsZXMpID0+IHcucG9zdE1lc3NhZ2UobXNnLCB0YXJnZXRPcmlnaW4sIHRyYW5zZmVyYWJsZXMpLFxuICAgIGFkZEV2ZW50TGlzdGVuZXI6IGNvbnRleHQuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGNvbnRleHQucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpXG4gIH07XG59XG5mdW5jdGlvbiB0b1dpcmVWYWx1ZSh2YWx1ZSkge1xuICBmb3IgKGNvbnN0IFtuYW1lLCBoYW5kbGVyXSBvZiB0cmFuc2ZlckhhbmRsZXJzKSB7XG4gICAgaWYgKGhhbmRsZXIuY2FuSGFuZGxlKHZhbHVlKSkge1xuICAgICAgY29uc3QgW3NlcmlhbGl6ZWRWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSBoYW5kbGVyLnNlcmlhbGl6ZSh2YWx1ZSk7XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogMyxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHZhbHVlOiBzZXJpYWxpemVkVmFsdWVcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNmZXJhYmxlc1xuICAgICAgXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICB0eXBlOiAwLFxuICAgICAgdmFsdWVcbiAgICB9LFxuICAgIHRyYW5zZmVyQ2FjaGUuZ2V0KHZhbHVlKSB8fCBbXVxuICBdO1xufVxuZnVuY3Rpb24gZnJvbVdpcmVWYWx1ZSh2YWx1ZSkge1xuICBzd2l0Y2ggKHZhbHVlLnR5cGUpIHtcbiAgICBjYXNlIDM6XG4gICAgICByZXR1cm4gdHJhbnNmZXJIYW5kbGVycy5nZXQodmFsdWUubmFtZSkuZGVzZXJpYWxpemUodmFsdWUudmFsdWUpO1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiB2YWx1ZS52YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgbXNnLCB0cmFuc2ZlcnMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3QgaWQgPSBnZW5lcmF0ZVVVSUQoKTtcbiAgICBlcC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbiBsKGV2KSB7XG4gICAgICBpZiAoIWV2LmRhdGEgfHwgIWV2LmRhdGEuaWQgfHwgZXYuZGF0YS5pZCAhPT0gaWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbCk7XG4gICAgICByZXNvbHZlKGV2LmRhdGEpO1xuICAgIH0pO1xuICAgIGlmIChlcC5zdGFydCkge1xuICAgICAgZXAuc3RhcnQoKTtcbiAgICB9XG4gICAgZXAucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbih7IGlkIH0sIG1zZyksIHRyYW5zZmVycyk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKCkge1xuICByZXR1cm4gbmV3IEFycmF5KDQpLmZpbGwoMCkubWFwKCgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKS50b1N0cmluZygxNikpLmpvaW4oXCItXCIpO1xufVxuZXhwb3J0IHtcbiAgY29tbGlua19leHBvcnRzIGFzIENvbWxpbmtcbn07XG4iXSwibmFtZXMiOlsiX19kZWZQcm9wIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJfX2V4cG9ydCIsInRhcmdldCIsImFsbCIsIm5hbWUiLCJnZXQiLCJlbnVtZXJhYmxlIiwiY29tbGlua19leHBvcnRzIiwiY3JlYXRlRW5kcG9pbnQiLCJleHBvc2UiLCJwcm94eSIsInByb3h5TWFya2VyIiwicmVsZWFzZVByb3h5IiwidHJhbnNmZXIiLCJ0cmFuc2ZlckhhbmRsZXJzIiwid2luZG93RW5kcG9pbnQiLCJ3cmFwIiwiU3ltYm9sIiwidGhyb3dNYXJrZXIiLCJpc09iamVjdCIsInZhbCIsInByb3h5VHJhbnNmZXJIYW5kbGVyIiwiY2FuSGFuZGxlIiwic2VyaWFsaXplIiwib2JqIiwicG9ydDEiLCJwb3J0MiIsIk1lc3NhZ2VDaGFubmVsIiwiZGVzZXJpYWxpemUiLCJwb3J0Iiwic3RhcnQiLCJ0aHJvd1RyYW5zZmVySGFuZGxlciIsInZhbHVlIiwic2VyaWFsaXplZCIsIkVycm9yIiwiaXNFcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsImFzc2lnbiIsIk1hcCIsImVwIiwic2VsZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYWxsYmFjayIsImV2IiwiZGF0YSIsImlkIiwidHlwZSIsInBhdGgiLCJhcmd1bWVudExpc3QiLCJtYXAiLCJmcm9tV2lyZVZhbHVlIiwicmV0dXJuVmFsdWUiLCJwYXJlbnQiLCJzbGljZSIsInJlZHVjZSIsIm9iajIiLCJwcm9wIiwicmF3VmFsdWUiLCJhcHBseSIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2F0Y2giLCJ0aGVuIiwicmV0dXJuVmFsdWUyIiwid2lyZVZhbHVlIiwidHJhbnNmZXJhYmxlcyIsInRvV2lyZVZhbHVlIiwicG9zdE1lc3NhZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VFbmRQb2ludCIsImlzTWVzc2FnZVBvcnQiLCJlbmRwb2ludCIsImNvbnN0cnVjdG9yIiwiY2xvc2UiLCJjcmVhdGVQcm94eSIsInRocm93SWZQcm94eVJlbGVhc2VkIiwiaXNSZWxlYXNlZCIsImlzUHJveHlSZWxlYXNlZCIsInByb3h5MiIsIlByb3h5IiwiX3RhcmdldCIsInJlcXVlc3RSZXNwb25zZU1lc3NhZ2UiLCJwIiwidG9TdHJpbmciLCJsZW5ndGgiLCJyIiwiYmluZCIsInNldCIsIl90aGlzQXJnIiwicmF3QXJndW1lbnRMaXN0IiwibGFzdCIsInByb2Nlc3NBcmd1bWVudHMiLCJjb25zdHJ1Y3QiLCJteUZsYXQiLCJhcnIiLCJBcnJheSIsInByb3RvdHlwZSIsImNvbmNhdCIsInByb2Nlc3NlZCIsInYiLCJ0cmFuc2ZlckNhY2hlIiwiV2Vha01hcCIsInRyYW5zZmVycyIsInciLCJjb250ZXh0IiwidGFyZ2V0T3JpZ2luIiwibXNnIiwiaGFuZGxlciIsInNlcmlhbGl6ZWRWYWx1ZSIsImdlbmVyYXRlVVVJRCIsImwiLCJmaWxsIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImpvaW4iLCJDb21saW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js\n");

/***/ })

};
;